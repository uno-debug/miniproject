;/*FB_PKG_DELIM*/

__d("WACustomError",[],(function(a,b,c,d,e,f){"use strict";var g=Object.create(Error.prototype,{constructor:{value:void 0,writable:!0,configurable:!0}});function a(a,b,c){b===void 0&&(b=!0);function d(c){var d=Error.call(this,c);this.message=c;d.name=a;this.name=a;b&&(this.stack=d.stack)}d.prototype=Object.create(c?c.prototype:g);d.prototype.constructor=d;return d}function h(a){if(a.length===0)return"No errors";return a.length===1?a[0].message:a.map(function(a){return"- "+a.message}).join("\n")}e=function(a){babelHelpers.inheritsLoose(b,a);function b(b,c){c=c!=null&&c.length>0?c:h(b);c=a.call(this,c)||this;c.errors=b;return c}return b}(a("AggregateError",!0));var i=function(b){babelHelpers.inheritsLoose(a,b);function a(){return b.apply(this,arguments)||this}return a}(a("TimeoutError",!1)),j=function(b){babelHelpers.inheritsLoose(a,b);function a(a,c){a=b.call(this,a)||this;a.code=c;return a}return a}(a("HttpError",!1)),k=function(b){babelHelpers.inheritsLoose(a,b);function a(){return b.apply(this,arguments)||this}return a}(a("UnimplementedMethod")),l=!1;function b(a){if(a==null||a.name!=="QuotaExceededError")throw a;l=!0}function c(){return l}function d(a){return JSON.stringify(a,Object.getOwnPropertyNames(a))}var m=function(b){babelHelpers.inheritsLoose(a,b);function a(a,c){a=b.call(this,a)||this;a.inner=c;return a}return a}(babelHelpers.wrapNativeSuper(Error));f.customError=a;f.AggregateError=e;f.TimeoutError=i;f.HttpError=j;f.UnimplementedMethod=k;f.supressQuotaExceededError=b;f.hasSupressedQuotaExceededError=c;f.obtainErrorSummary=d;f.WrappedError=m}),66);
__d("WAAbortError",["WACustomError"],(function(a,b,c,d,e,f,g){"use strict";b=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}return b}(d("WACustomError").customError("AbortError"));var h="AbortError";function a(a){return function(b){if(b.name===h)return a(b);else throw b}}g.AbortError=b;g.ABORT_ERROR=h;g.catchAbort=a}),98);
__d("WAArrayBufferUtils",["Promise","err"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a){var b=new ArrayBuffer(a.length);b=new Uint8Array(b);var c,d;for(c=0,d=a.length;c<d;c++)b[c]=a.charCodeAt(c);return b.buffer}function d(a,c){c===void 0&&(c=5e5);return new(h||(h=b("Promise")))(function(b,d){var e=a.length,f=new ArrayBuffer(e),g=new Uint8Array(f),h=0;setTimeout(i,0);function i(){var d=Math.min(h+c,e);while(h<d)g[h]=a.charCodeAt(h),h++;if(h===e){b(f);return}setTimeout(i,16)}})}function e(a){return String.fromCharCode.apply(null,new Uint8Array(a))}var i=8388607;function f(a,b){a=new Uint8Array(a);if(b>i)throw c("err")("Divisor is too big");var d=0;for(var e=0;e<a.length;++e)d=((d<<8)+a[e])%b;return d}function j(a){a=a.map(function(a){return new Uint8Array(a)});var b=a.reduce(function(a,b){return a+b.byteLength},0),c=new Uint8Array(b);a.reduce(function(a,b){c.set(b,a);return a+b.byteLength},0);return c.buffer.slice(c.byteOffset,c.byteOffset+c.byteLength)}function k(a,b){a=new Uint8Array(a);b=new Uint8Array(b);return l(a,b)}function l(a,b){if(a.byteLength!==b.byteLength)return!1;for(var c=0;c!==a.byteLength;c++)if(a[c]!==b[c])return!1;return!0}g.stringToArrayBuffer=a;g.largeStringToArrayBuffer=d;g.arrayBufferToString=e;g.arrayBufferMod=f;g.concatBuffers=j;g.arrayBuffersEqualUNSAFE=k;g.uint8ArraysEqualUNSAFE=l}),98);
__d("WAArrayUtils",["regeneratorRuntime"],(function(a,b,c,d,e,f){"use strict";var g=b("regeneratorRuntime").mark(c);function a(a,b){var c=a.pop();b<a.length&&(a[b]=c)}function c(a,c){var d;return b("regeneratorRuntime").wrap(function(b){while(1)switch(b.prev=b.next){case 0:d=0;case 1:if(!(d<a.length)){b.next=7;break}b.next=4;return a.slice(d,d+c);case 4:d+=c;b.next=1;break;case 7:case"end":return b.stop()}},g,this)}f.removeIndexWithoutPreservingOrder=a;f.peekEvery=c}),66);
__d("WAAssertUnreachable",["err"],(function(a,b,c,d,e,f,g){"use strict";function a(a){throw c("err")("Impossible value, the default statement should never be reached for value: "+a)}g["default"]=a}),98);
/**
 * License: https://www.facebook.com/legal/license/OKBVmODmb-W/
 */
__d("tweetnacl-1.0.3",[],(function(a,b,c,d,e,f){"use strict";b={};var g={exports:b};function h(){(function(a){var b=function(a){var b,c=new Float64Array(16);if(a)for(b=0;b<a.length;b++)c[b]=a[b];return c},c=function(){throw new Error("no PRNG")},d=new Uint8Array(16),e=new Uint8Array(32);e[0]=9;var f=b(),g=b([1]),h=b([56129,1]),i=b([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),j=b([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),k=b([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),l=b([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),m=b([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function n(a,b,c,d){a[b]=c>>24&255,a[b+1]=c>>16&255,a[b+2]=c>>8&255,a[b+3]=c&255,a[b+4]=d>>24&255,a[b+5]=d>>16&255,a[b+6]=d>>8&255,a[b+7]=d&255}function o(a,b,c,d,e){var f,g=0;for(f=0;f<e;f++)g|=a[b+f]^c[d+f];return(1&g-1>>>8)-1}function p(a,b,c,d){return o(a,b,c,d,16)}function q(a,b,c,d){return o(a,b,c,d,32)}function r(a,b,c,d){var e=d[0]&255|(d[1]&255)<<8|(d[2]&255)<<16|(d[3]&255)<<24,f=c[0]&255|(c[1]&255)<<8|(c[2]&255)<<16|(c[3]&255)<<24,g=c[4]&255|(c[5]&255)<<8|(c[6]&255)<<16|(c[7]&255)<<24,h=c[8]&255|(c[9]&255)<<8|(c[10]&255)<<16|(c[11]&255)<<24,i=c[12]&255|(c[13]&255)<<8|(c[14]&255)<<16|(c[15]&255)<<24,j=d[4]&255|(d[5]&255)<<8|(d[6]&255)<<16|(d[7]&255)<<24,k=b[0]&255|(b[1]&255)<<8|(b[2]&255)<<16|(b[3]&255)<<24,l=b[4]&255|(b[5]&255)<<8|(b[6]&255)<<16|(b[7]&255)<<24,m=b[8]&255|(b[9]&255)<<8|(b[10]&255)<<16|(b[11]&255)<<24;b=b[12]&255|(b[13]&255)<<8|(b[14]&255)<<16|(b[15]&255)<<24;var n=d[8]&255|(d[9]&255)<<8|(d[10]&255)<<16|(d[11]&255)<<24,o=c[16]&255|(c[17]&255)<<8|(c[18]&255)<<16|(c[19]&255)<<24,p=c[20]&255|(c[21]&255)<<8|(c[22]&255)<<16|(c[23]&255)<<24,q=c[24]&255|(c[25]&255)<<8|(c[26]&255)<<16|(c[27]&255)<<24;c=c[28]&255|(c[29]&255)<<8|(c[30]&255)<<16|(c[31]&255)<<24;d=d[12]&255|(d[13]&255)<<8|(d[14]&255)<<16|(d[15]&255)<<24;var r=e,s=f,t=g,u=h,v=i,w=j,x=k,y=l,z=m,A=b,B=n,C=o,D=p,E=q,F=c,G=d,H;for(var I=0;I<20;I+=2)H=r+D|0,v^=H<<7|H>>>32-7,H=v+r|0,z^=H<<9|H>>>32-9,H=z+v|0,D^=H<<13|H>>>32-13,H=D+z|0,r^=H<<18|H>>>32-18,H=w+s|0,A^=H<<7|H>>>32-7,H=A+w|0,E^=H<<9|H>>>32-9,H=E+A|0,s^=H<<13|H>>>32-13,H=s+E|0,w^=H<<18|H>>>32-18,H=B+x|0,F^=H<<7|H>>>32-7,H=F+B|0,t^=H<<9|H>>>32-9,H=t+F|0,x^=H<<13|H>>>32-13,H=x+t|0,B^=H<<18|H>>>32-18,H=G+C|0,u^=H<<7|H>>>32-7,H=u+G|0,y^=H<<9|H>>>32-9,H=y+u|0,C^=H<<13|H>>>32-13,H=C+y|0,G^=H<<18|H>>>32-18,H=r+u|0,s^=H<<7|H>>>32-7,H=s+r|0,t^=H<<9|H>>>32-9,H=t+s|0,u^=H<<13|H>>>32-13,H=u+t|0,r^=H<<18|H>>>32-18,H=w+v|0,x^=H<<7|H>>>32-7,H=x+w|0,y^=H<<9|H>>>32-9,H=y+x|0,v^=H<<13|H>>>32-13,H=v+y|0,w^=H<<18|H>>>32-18,H=B+A|0,C^=H<<7|H>>>32-7,H=C+B|0,z^=H<<9|H>>>32-9,H=z+C|0,A^=H<<13|H>>>32-13,H=A+z|0,B^=H<<18|H>>>32-18,H=G+F|0,D^=H<<7|H>>>32-7,H=D+G|0,E^=H<<9|H>>>32-9,H=E+D|0,F^=H<<13|H>>>32-13,H=F+E|0,G^=H<<18|H>>>32-18;r=r+e|0;s=s+f|0;t=t+g|0;u=u+h|0;v=v+i|0;w=w+j|0;x=x+k|0;y=y+l|0;z=z+m|0;A=A+b|0;B=B+n|0;C=C+o|0;D=D+p|0;E=E+q|0;F=F+c|0;G=G+d|0;a[0]=r>>>0&255;a[1]=r>>>8&255;a[2]=r>>>16&255;a[3]=r>>>24&255;a[4]=s>>>0&255;a[5]=s>>>8&255;a[6]=s>>>16&255;a[7]=s>>>24&255;a[8]=t>>>0&255;a[9]=t>>>8&255;a[10]=t>>>16&255;a[11]=t>>>24&255;a[12]=u>>>0&255;a[13]=u>>>8&255;a[14]=u>>>16&255;a[15]=u>>>24&255;a[16]=v>>>0&255;a[17]=v>>>8&255;a[18]=v>>>16&255;a[19]=v>>>24&255;a[20]=w>>>0&255;a[21]=w>>>8&255;a[22]=w>>>16&255;a[23]=w>>>24&255;a[24]=x>>>0&255;a[25]=x>>>8&255;a[26]=x>>>16&255;a[27]=x>>>24&255;a[28]=y>>>0&255;a[29]=y>>>8&255;a[30]=y>>>16&255;a[31]=y>>>24&255;a[32]=z>>>0&255;a[33]=z>>>8&255;a[34]=z>>>16&255;a[35]=z>>>24&255;a[36]=A>>>0&255;a[37]=A>>>8&255;a[38]=A>>>16&255;a[39]=A>>>24&255;a[40]=B>>>0&255;a[41]=B>>>8&255;a[42]=B>>>16&255;a[43]=B>>>24&255;a[44]=C>>>0&255;a[45]=C>>>8&255;a[46]=C>>>16&255;a[47]=C>>>24&255;a[48]=D>>>0&255;a[49]=D>>>8&255;a[50]=D>>>16&255;a[51]=D>>>24&255;a[52]=E>>>0&255;a[53]=E>>>8&255;a[54]=E>>>16&255;a[55]=E>>>24&255;a[56]=F>>>0&255;a[57]=F>>>8&255;a[58]=F>>>16&255;a[59]=F>>>24&255;a[60]=G>>>0&255;a[61]=G>>>8&255;a[62]=G>>>16&255;a[63]=G>>>24&255}function s(a,b,c,d){var e=d[0]&255|(d[1]&255)<<8|(d[2]&255)<<16|(d[3]&255)<<24,f=c[0]&255|(c[1]&255)<<8|(c[2]&255)<<16|(c[3]&255)<<24,g=c[4]&255|(c[5]&255)<<8|(c[6]&255)<<16|(c[7]&255)<<24,h=c[8]&255|(c[9]&255)<<8|(c[10]&255)<<16|(c[11]&255)<<24,i=c[12]&255|(c[13]&255)<<8|(c[14]&255)<<16|(c[15]&255)<<24,j=d[4]&255|(d[5]&255)<<8|(d[6]&255)<<16|(d[7]&255)<<24,k=b[0]&255|(b[1]&255)<<8|(b[2]&255)<<16|(b[3]&255)<<24,l=b[4]&255|(b[5]&255)<<8|(b[6]&255)<<16|(b[7]&255)<<24,m=b[8]&255|(b[9]&255)<<8|(b[10]&255)<<16|(b[11]&255)<<24;b=b[12]&255|(b[13]&255)<<8|(b[14]&255)<<16|(b[15]&255)<<24;var n=d[8]&255|(d[9]&255)<<8|(d[10]&255)<<16|(d[11]&255)<<24,o=c[16]&255|(c[17]&255)<<8|(c[18]&255)<<16|(c[19]&255)<<24,p=c[20]&255|(c[21]&255)<<8|(c[22]&255)<<16|(c[23]&255)<<24,q=c[24]&255|(c[25]&255)<<8|(c[26]&255)<<16|(c[27]&255)<<24;c=c[28]&255|(c[29]&255)<<8|(c[30]&255)<<16|(c[31]&255)<<24;d=d[12]&255|(d[13]&255)<<8|(d[14]&255)<<16|(d[15]&255)<<24;e=e;f=f;g=g;h=h;i=i;j=j;k=k;l=l;m=m;b=b;n=n;o=o;p=p;q=q;c=c;d=d;var r;for(var s=0;s<20;s+=2)r=e+p|0,i^=r<<7|r>>>32-7,r=i+e|0,m^=r<<9|r>>>32-9,r=m+i|0,p^=r<<13|r>>>32-13,r=p+m|0,e^=r<<18|r>>>32-18,r=j+f|0,b^=r<<7|r>>>32-7,r=b+j|0,q^=r<<9|r>>>32-9,r=q+b|0,f^=r<<13|r>>>32-13,r=f+q|0,j^=r<<18|r>>>32-18,r=n+k|0,c^=r<<7|r>>>32-7,r=c+n|0,g^=r<<9|r>>>32-9,r=g+c|0,k^=r<<13|r>>>32-13,r=k+g|0,n^=r<<18|r>>>32-18,r=d+o|0,h^=r<<7|r>>>32-7,r=h+d|0,l^=r<<9|r>>>32-9,r=l+h|0,o^=r<<13|r>>>32-13,r=o+l|0,d^=r<<18|r>>>32-18,r=e+h|0,f^=r<<7|r>>>32-7,r=f+e|0,g^=r<<9|r>>>32-9,r=g+f|0,h^=r<<13|r>>>32-13,r=h+g|0,e^=r<<18|r>>>32-18,r=j+i|0,k^=r<<7|r>>>32-7,r=k+j|0,l^=r<<9|r>>>32-9,r=l+k|0,i^=r<<13|r>>>32-13,r=i+l|0,j^=r<<18|r>>>32-18,r=n+b|0,o^=r<<7|r>>>32-7,r=o+n|0,m^=r<<9|r>>>32-9,r=m+o|0,b^=r<<13|r>>>32-13,r=b+m|0,n^=r<<18|r>>>32-18,r=d+c|0,p^=r<<7|r>>>32-7,r=p+d|0,q^=r<<9|r>>>32-9,r=q+p|0,c^=r<<13|r>>>32-13,r=c+q|0,d^=r<<18|r>>>32-18;a[0]=e>>>0&255;a[1]=e>>>8&255;a[2]=e>>>16&255;a[3]=e>>>24&255;a[4]=j>>>0&255;a[5]=j>>>8&255;a[6]=j>>>16&255;a[7]=j>>>24&255;a[8]=n>>>0&255;a[9]=n>>>8&255;a[10]=n>>>16&255;a[11]=n>>>24&255;a[12]=d>>>0&255;a[13]=d>>>8&255;a[14]=d>>>16&255;a[15]=d>>>24&255;a[16]=k>>>0&255;a[17]=k>>>8&255;a[18]=k>>>16&255;a[19]=k>>>24&255;a[20]=l>>>0&255;a[21]=l>>>8&255;a[22]=l>>>16&255;a[23]=l>>>24&255;a[24]=m>>>0&255;a[25]=m>>>8&255;a[26]=m>>>16&255;a[27]=m>>>24&255;a[28]=b>>>0&255;a[29]=b>>>8&255;a[30]=b>>>16&255;a[31]=b>>>24&255}function t(a,b,c,d){r(a,b,c,d)}function u(a,b,c,d){s(a,b,c,d)}var v=new Uint8Array([101,120,112,97,110,100,32,51,50,45,98,121,116,101,32,107]);function w(a,b,c,d,e,f,g){var h=new Uint8Array(16),i=new Uint8Array(64),j;for(j=0;j<16;j++)h[j]=0;for(j=0;j<8;j++)h[j]=f[j];while(e>=64){t(i,h,g,v);for(j=0;j<64;j++)a[b+j]=c[d+j]^i[j];f=1;for(j=8;j<16;j++)f=f+(h[j]&255)|0,h[j]=f&255,f>>>=8;e-=64;b+=64;d+=64}if(e>0){t(i,h,g,v);for(j=0;j<e;j++)a[b+j]=c[d+j]^i[j]}return 0}function x(a,b,c,d,e){var f=new Uint8Array(16),g=new Uint8Array(64),h;for(h=0;h<16;h++)f[h]=0;for(h=0;h<8;h++)f[h]=d[h];while(c>=64){t(g,f,e,v);for(h=0;h<64;h++)a[b+h]=g[h];d=1;for(h=8;h<16;h++)d=d+(f[h]&255)|0,f[h]=d&255,d>>>=8;c-=64;b+=64}if(c>0){t(g,f,e,v);for(h=0;h<c;h++)a[b+h]=g[h]}return 0}function y(a,b,c,d,e){var f=new Uint8Array(32);u(f,d,e,v);e=new Uint8Array(8);for(var g=0;g<8;g++)e[g]=d[g+16];return x(a,b,c,e,f)}function z(a,b,c,d,e,f,g){var h=new Uint8Array(32);u(h,f,g,v);g=new Uint8Array(8);for(var i=0;i<8;i++)g[i]=f[i+16];return w(a,b,c,d,e,g,h)}var A=function(a){this.buffer=new Uint8Array(16);this.r=new Uint16Array(10);this.h=new Uint16Array(10);this.pad=new Uint16Array(8);this.leftover=0;this.fin=0;var b,c;b=a[0]&255|(a[1]&255)<<8;this.r[0]=b&8191;c=a[2]&255|(a[3]&255)<<8;this.r[1]=(b>>>13|c<<3)&8191;b=a[4]&255|(a[5]&255)<<8;this.r[2]=(c>>>10|b<<6)&7939;c=a[6]&255|(a[7]&255)<<8;this.r[3]=(b>>>7|c<<9)&8191;b=a[8]&255|(a[9]&255)<<8;this.r[4]=(c>>>4|b<<12)&255;this.r[5]=b>>>1&8190;c=a[10]&255|(a[11]&255)<<8;this.r[6]=(b>>>14|c<<2)&8191;b=a[12]&255|(a[13]&255)<<8;this.r[7]=(c>>>11|b<<5)&8065;c=a[14]&255|(a[15]&255)<<8;this.r[8]=(b>>>8|c<<8)&8191;this.r[9]=c>>>5&127;this.pad[0]=a[16]&255|(a[17]&255)<<8;this.pad[1]=a[18]&255|(a[19]&255)<<8;this.pad[2]=a[20]&255|(a[21]&255)<<8;this.pad[3]=a[22]&255|(a[23]&255)<<8;this.pad[4]=a[24]&255|(a[25]&255)<<8;this.pad[5]=a[26]&255|(a[27]&255)<<8;this.pad[6]=a[28]&255|(a[29]&255)<<8;this.pad[7]=a[30]&255|(a[31]&255)<<8};A.prototype.blocks=function(a,b,c){var d=this.fin?0:1<<11,e,f,g,h,i,j,k,l,m,n,o,p=this.h[0],q=this.h[1],r=this.h[2],s=this.h[3],t=this.h[4],u=this.h[5],v=this.h[6],w=this.h[7],x=this.h[8],y=this.h[9],z=this.r[0],A=this.r[1],B=this.r[2],C=this.r[3],D=this.r[4],E=this.r[5],F=this.r[6],G=this.r[7],H=this.r[8],I=this.r[9];while(c>=16)e=a[b+0]&255|(a[b+1]&255)<<8,p+=e&8191,f=a[b+2]&255|(a[b+3]&255)<<8,q+=(e>>>13|f<<3)&8191,e=a[b+4]&255|(a[b+5]&255)<<8,r+=(f>>>10|e<<6)&8191,f=a[b+6]&255|(a[b+7]&255)<<8,s+=(e>>>7|f<<9)&8191,e=a[b+8]&255|(a[b+9]&255)<<8,t+=(f>>>4|e<<12)&8191,u+=e>>>1&8191,f=a[b+10]&255|(a[b+11]&255)<<8,v+=(e>>>14|f<<2)&8191,e=a[b+12]&255|(a[b+13]&255)<<8,w+=(f>>>11|e<<5)&8191,f=a[b+14]&255|(a[b+15]&255)<<8,x+=(e>>>8|f<<8)&8191,y+=f>>>5|d,e=0,f=e,f+=p*z,f+=q*(5*I),f+=r*(5*H),f+=s*(5*G),f+=t*(5*F),e=f>>>13,f&=8191,f+=u*(5*E),f+=v*(5*D),f+=w*(5*C),f+=x*(5*B),f+=y*(5*A),e+=f>>>13,f&=8191,g=e,g+=p*A,g+=q*z,g+=r*(5*I),g+=s*(5*H),g+=t*(5*G),e=g>>>13,g&=8191,g+=u*(5*F),g+=v*(5*E),g+=w*(5*D),g+=x*(5*C),g+=y*(5*B),e+=g>>>13,g&=8191,h=e,h+=p*B,h+=q*A,h+=r*z,h+=s*(5*I),h+=t*(5*H),e=h>>>13,h&=8191,h+=u*(5*G),h+=v*(5*F),h+=w*(5*E),h+=x*(5*D),h+=y*(5*C),e+=h>>>13,h&=8191,i=e,i+=p*C,i+=q*B,i+=r*A,i+=s*z,i+=t*(5*I),e=i>>>13,i&=8191,i+=u*(5*H),i+=v*(5*G),i+=w*(5*F),i+=x*(5*E),i+=y*(5*D),e+=i>>>13,i&=8191,j=e,j+=p*D,j+=q*C,j+=r*B,j+=s*A,j+=t*z,e=j>>>13,j&=8191,j+=u*(5*I),j+=v*(5*H),j+=w*(5*G),j+=x*(5*F),j+=y*(5*E),e+=j>>>13,j&=8191,k=e,k+=p*E,k+=q*D,k+=r*C,k+=s*B,k+=t*A,e=k>>>13,k&=8191,k+=u*z,k+=v*(5*I),k+=w*(5*H),k+=x*(5*G),k+=y*(5*F),e+=k>>>13,k&=8191,l=e,l+=p*F,l+=q*E,l+=r*D,l+=s*C,l+=t*B,e=l>>>13,l&=8191,l+=u*A,l+=v*z,l+=w*(5*I),l+=x*(5*H),l+=y*(5*G),e+=l>>>13,l&=8191,m=e,m+=p*G,m+=q*F,m+=r*E,m+=s*D,m+=t*C,e=m>>>13,m&=8191,m+=u*B,m+=v*A,m+=w*z,m+=x*(5*I),m+=y*(5*H),e+=m>>>13,m&=8191,n=e,n+=p*H,n+=q*G,n+=r*F,n+=s*E,n+=t*D,e=n>>>13,n&=8191,n+=u*C,n+=v*B,n+=w*A,n+=x*z,n+=y*(5*I),e+=n>>>13,n&=8191,o=e,o+=p*I,o+=q*H,o+=r*G,o+=s*F,o+=t*E,e=o>>>13,o&=8191,o+=u*D,o+=v*C,o+=w*B,o+=x*A,o+=y*z,e+=o>>>13,o&=8191,e=(e<<2)+e|0,e=e+f|0,f=e&8191,e=e>>>13,g+=e,p=f,q=g,r=h,s=i,t=j,u=k,v=l,w=m,x=n,y=o,b+=16,c-=16;this.h[0]=p;this.h[1]=q;this.h[2]=r;this.h[3]=s;this.h[4]=t;this.h[5]=u;this.h[6]=v;this.h[7]=w;this.h[8]=x;this.h[9]=y};A.prototype.finish=function(a,b){var c=new Uint16Array(10),d,e;if(this.leftover){e=this.leftover;this.buffer[e++]=1;for(;e<16;e++)this.buffer[e]=0;this.fin=1;this.blocks(this.buffer,0,16)}d=this.h[1]>>>13;this.h[1]&=8191;for(e=2;e<10;e++)this.h[e]+=d,d=this.h[e]>>>13,this.h[e]&=8191;this.h[0]+=d*5;d=this.h[0]>>>13;this.h[0]&=8191;this.h[1]+=d;d=this.h[1]>>>13;this.h[1]&=8191;this.h[2]+=d;c[0]=this.h[0]+5;d=c[0]>>>13;c[0]&=8191;for(e=1;e<10;e++)c[e]=this.h[e]+d,d=c[e]>>>13,c[e]&=8191;c[9]-=1<<13;d=(d^1)-1;for(e=0;e<10;e++)c[e]&=d;d=~d;for(e=0;e<10;e++)this.h[e]=this.h[e]&d|c[e];this.h[0]=(this.h[0]|this.h[1]<<13)&65535;this.h[1]=(this.h[1]>>>3|this.h[2]<<10)&65535;this.h[2]=(this.h[2]>>>6|this.h[3]<<7)&65535;this.h[3]=(this.h[3]>>>9|this.h[4]<<4)&65535;this.h[4]=(this.h[4]>>>12|this.h[5]<<1|this.h[6]<<14)&65535;this.h[5]=(this.h[6]>>>2|this.h[7]<<11)&65535;this.h[6]=(this.h[7]>>>5|this.h[8]<<8)&65535;this.h[7]=(this.h[8]>>>8|this.h[9]<<5)&65535;c=this.h[0]+this.pad[0];this.h[0]=c&65535;for(e=1;e<8;e++)c=(this.h[e]+this.pad[e]|0)+(c>>>16)|0,this.h[e]=c&65535;a[b+0]=this.h[0]>>>0&255;a[b+1]=this.h[0]>>>8&255;a[b+2]=this.h[1]>>>0&255;a[b+3]=this.h[1]>>>8&255;a[b+4]=this.h[2]>>>0&255;a[b+5]=this.h[2]>>>8&255;a[b+6]=this.h[3]>>>0&255;a[b+7]=this.h[3]>>>8&255;a[b+8]=this.h[4]>>>0&255;a[b+9]=this.h[4]>>>8&255;a[b+10]=this.h[5]>>>0&255;a[b+11]=this.h[5]>>>8&255;a[b+12]=this.h[6]>>>0&255;a[b+13]=this.h[6]>>>8&255;a[b+14]=this.h[7]>>>0&255;a[b+15]=this.h[7]>>>8&255};A.prototype.update=function(a,b,c){var d,e;if(this.leftover){e=16-this.leftover;e>c&&(e=c);for(d=0;d<e;d++)this.buffer[this.leftover+d]=a[b+d];c-=e;b+=e;this.leftover+=e;if(this.leftover<16)return;this.blocks(this.buffer,0,16);this.leftover=0}c>=16&&(e=c-c%16,this.blocks(a,b,e),b+=e,c-=e);if(c){for(d=0;d<c;d++)this.buffer[this.leftover+d]=a[b+d];this.leftover+=c}};function B(a,b,c,d,e,f){f=new A(f);f.update(c,d,e);f.finish(a,b);return 0}function C(a,b,c,d,e,f){var g=new Uint8Array(16);B(g,0,c,d,e,f);return p(a,b,g,0)}function D(a,b,c,d,e){if(c<32)return-1;z(a,0,b,0,c,d,e);B(a,16,a,32,c-32,a);for(b=0;b<16;b++)a[b]=0;return 0}function E(a,b,c,d,e){var f=new Uint8Array(32);if(c<32)return-1;y(f,0,32,d,e);if(C(b,16,b,32,c-32,f)!==0)return-1;z(a,0,b,0,c,d,e);for(f=0;f<32;f++)a[f]=0;return 0}function F(a,b){var c;for(c=0;c<16;c++)a[c]=b[c]|0}function G(a){var b,c,d=1;for(b=0;b<16;b++)c=a[b]+d+65535,d=Math.floor(c/65536),a[b]=c-d*65536;a[0]+=d-1+37*(d-1)}function H(a,b,c){var d;c=~(c-1);for(var e=0;e<16;e++)d=c&(a[e]^b[e]),a[e]^=d,b[e]^=d}function I(a,c){var d,e,f=b(),g=b();for(d=0;d<16;d++)g[d]=c[d];G(g);G(g);G(g);for(c=0;c<2;c++){f[0]=g[0]-65517;for(d=1;d<15;d++)f[d]=g[d]-65535-(f[d-1]>>16&1),f[d-1]&=65535;f[15]=g[15]-32767-(f[14]>>16&1);e=f[15]>>16&1;f[14]&=65535;H(g,f,1-e)}for(d=0;d<16;d++)a[2*d]=g[d]&255,a[2*d+1]=g[d]>>8}function J(a,b){var c=new Uint8Array(32),d=new Uint8Array(32);I(c,a);I(d,b);return q(c,0,d,0)}function K(a){var b=new Uint8Array(32);I(b,a);return b[0]&1}function L(a,b){var c;for(c=0;c<16;c++)a[c]=b[2*c]+(b[2*c+1]<<8);a[15]&=32767}function M(a,b,c){for(var d=0;d<16;d++)a[d]=b[d]+c[d]}function N(a,b,c){for(var d=0;d<16;d++)a[d]=b[d]-c[d]}function O(a,b,c){var d,e=0,f=0,g=0,h=0,i=0,j=0,k=0,l=0,m=0,n=0,o=0,p=0,q=0,r=0,s=0,t=0,u=0,v=0,w=0,x=0,y=0,z=0,A=0,B=0,C=0,D=0,E=0,F=0,G=0,H=0,I=0,J=c[0],K=c[1],L=c[2],M=c[3],N=c[4],O=c[5],P=c[6],Q=c[7],R=c[8],S=c[9],T=c[10],U=c[11],V=c[12],W=c[13],X=c[14];c=c[15];d=b[0];e+=d*J;f+=d*K;g+=d*L;h+=d*M;i+=d*N;j+=d*O;k+=d*P;l+=d*Q;m+=d*R;n+=d*S;o+=d*T;p+=d*U;q+=d*V;r+=d*W;s+=d*X;t+=d*c;d=b[1];f+=d*J;g+=d*K;h+=d*L;i+=d*M;j+=d*N;k+=d*O;l+=d*P;m+=d*Q;n+=d*R;o+=d*S;p+=d*T;q+=d*U;r+=d*V;s+=d*W;t+=d*X;u+=d*c;d=b[2];g+=d*J;h+=d*K;i+=d*L;j+=d*M;k+=d*N;l+=d*O;m+=d*P;n+=d*Q;o+=d*R;p+=d*S;q+=d*T;r+=d*U;s+=d*V;t+=d*W;u+=d*X;v+=d*c;d=b[3];h+=d*J;i+=d*K;j+=d*L;k+=d*M;l+=d*N;m+=d*O;n+=d*P;o+=d*Q;p+=d*R;q+=d*S;r+=d*T;s+=d*U;t+=d*V;u+=d*W;v+=d*X;w+=d*c;d=b[4];i+=d*J;j+=d*K;k+=d*L;l+=d*M;m+=d*N;n+=d*O;o+=d*P;p+=d*Q;q+=d*R;r+=d*S;s+=d*T;t+=d*U;u+=d*V;v+=d*W;w+=d*X;x+=d*c;d=b[5];j+=d*J;k+=d*K;l+=d*L;m+=d*M;n+=d*N;o+=d*O;p+=d*P;q+=d*Q;r+=d*R;s+=d*S;t+=d*T;u+=d*U;v+=d*V;w+=d*W;x+=d*X;y+=d*c;d=b[6];k+=d*J;l+=d*K;m+=d*L;n+=d*M;o+=d*N;p+=d*O;q+=d*P;r+=d*Q;s+=d*R;t+=d*S;u+=d*T;v+=d*U;w+=d*V;x+=d*W;y+=d*X;z+=d*c;d=b[7];l+=d*J;m+=d*K;n+=d*L;o+=d*M;p+=d*N;q+=d*O;r+=d*P;s+=d*Q;t+=d*R;u+=d*S;v+=d*T;w+=d*U;x+=d*V;y+=d*W;z+=d*X;A+=d*c;d=b[8];m+=d*J;n+=d*K;o+=d*L;p+=d*M;q+=d*N;r+=d*O;s+=d*P;t+=d*Q;u+=d*R;v+=d*S;w+=d*T;x+=d*U;y+=d*V;z+=d*W;A+=d*X;B+=d*c;d=b[9];n+=d*J;o+=d*K;p+=d*L;q+=d*M;r+=d*N;s+=d*O;t+=d*P;u+=d*Q;v+=d*R;w+=d*S;x+=d*T;y+=d*U;z+=d*V;A+=d*W;B+=d*X;C+=d*c;d=b[10];o+=d*J;p+=d*K;q+=d*L;r+=d*M;s+=d*N;t+=d*O;u+=d*P;v+=d*Q;w+=d*R;x+=d*S;y+=d*T;z+=d*U;A+=d*V;B+=d*W;C+=d*X;D+=d*c;d=b[11];p+=d*J;q+=d*K;r+=d*L;s+=d*M;t+=d*N;u+=d*O;v+=d*P;w+=d*Q;x+=d*R;y+=d*S;z+=d*T;A+=d*U;B+=d*V;C+=d*W;D+=d*X;E+=d*c;d=b[12];q+=d*J;r+=d*K;s+=d*L;t+=d*M;u+=d*N;v+=d*O;w+=d*P;x+=d*Q;y+=d*R;z+=d*S;A+=d*T;B+=d*U;C+=d*V;D+=d*W;E+=d*X;F+=d*c;d=b[13];r+=d*J;s+=d*K;t+=d*L;u+=d*M;v+=d*N;w+=d*O;x+=d*P;y+=d*Q;z+=d*R;A+=d*S;B+=d*T;C+=d*U;D+=d*V;E+=d*W;F+=d*X;G+=d*c;d=b[14];s+=d*J;t+=d*K;u+=d*L;v+=d*M;w+=d*N;x+=d*O;y+=d*P;z+=d*Q;A+=d*R;B+=d*S;C+=d*T;D+=d*U;E+=d*V;F+=d*W;G+=d*X;H+=d*c;d=b[15];t+=d*J;u+=d*K;v+=d*L;w+=d*M;x+=d*N;y+=d*O;z+=d*P;A+=d*Q;B+=d*R;C+=d*S;D+=d*T;E+=d*U;F+=d*V;G+=d*W;H+=d*X;I+=d*c;e+=38*u;f+=38*v;g+=38*w;h+=38*x;i+=38*y;j+=38*z;k+=38*A;l+=38*B;m+=38*C;n+=38*D;o+=38*E;p+=38*F;q+=38*G;r+=38*H;s+=38*I;b=1;d=e+b+65535;b=Math.floor(d/65536);e=d-b*65536;d=f+b+65535;b=Math.floor(d/65536);f=d-b*65536;d=g+b+65535;b=Math.floor(d/65536);g=d-b*65536;d=h+b+65535;b=Math.floor(d/65536);h=d-b*65536;d=i+b+65535;b=Math.floor(d/65536);i=d-b*65536;d=j+b+65535;b=Math.floor(d/65536);j=d-b*65536;d=k+b+65535;b=Math.floor(d/65536);k=d-b*65536;d=l+b+65535;b=Math.floor(d/65536);l=d-b*65536;d=m+b+65535;b=Math.floor(d/65536);m=d-b*65536;d=n+b+65535;b=Math.floor(d/65536);n=d-b*65536;d=o+b+65535;b=Math.floor(d/65536);o=d-b*65536;d=p+b+65535;b=Math.floor(d/65536);p=d-b*65536;d=q+b+65535;b=Math.floor(d/65536);q=d-b*65536;d=r+b+65535;b=Math.floor(d/65536);r=d-b*65536;d=s+b+65535;b=Math.floor(d/65536);s=d-b*65536;d=t+b+65535;b=Math.floor(d/65536);t=d-b*65536;e+=b-1+37*(b-1);b=1;d=e+b+65535;b=Math.floor(d/65536);e=d-b*65536;d=f+b+65535;b=Math.floor(d/65536);f=d-b*65536;d=g+b+65535;b=Math.floor(d/65536);g=d-b*65536;d=h+b+65535;b=Math.floor(d/65536);h=d-b*65536;d=i+b+65535;b=Math.floor(d/65536);i=d-b*65536;d=j+b+65535;b=Math.floor(d/65536);j=d-b*65536;d=k+b+65535;b=Math.floor(d/65536);k=d-b*65536;d=l+b+65535;b=Math.floor(d/65536);l=d-b*65536;d=m+b+65535;b=Math.floor(d/65536);m=d-b*65536;d=n+b+65535;b=Math.floor(d/65536);n=d-b*65536;d=o+b+65535;b=Math.floor(d/65536);o=d-b*65536;d=p+b+65535;b=Math.floor(d/65536);p=d-b*65536;d=q+b+65535;b=Math.floor(d/65536);q=d-b*65536;d=r+b+65535;b=Math.floor(d/65536);r=d-b*65536;d=s+b+65535;b=Math.floor(d/65536);s=d-b*65536;d=t+b+65535;b=Math.floor(d/65536);t=d-b*65536;e+=b-1+37*(b-1);a[0]=e;a[1]=f;a[2]=g;a[3]=h;a[4]=i;a[5]=j;a[6]=k;a[7]=l;a[8]=m;a[9]=n;a[10]=o;a[11]=p;a[12]=q;a[13]=r;a[14]=s;a[15]=t}function P(a,b){O(a,b,b)}function Q(a,c){var d=b(),e;for(e=0;e<16;e++)d[e]=c[e];for(e=253;e>=0;e--)P(d,d),e!==2&&e!==4&&O(d,d,c);for(e=0;e<16;e++)a[e]=d[e]}function R(a,c){var d=b(),e;for(e=0;e<16;e++)d[e]=c[e];for(e=250;e>=0;e--)P(d,d),e!==1&&O(d,d,c);for(e=0;e<16;e++)a[e]=d[e]}function S(a,c,d){var e=new Uint8Array(32),f=new Float64Array(80),g,i=b(),j=b(),k=b(),l=b(),m=b(),n=b();for(g=0;g<31;g++)e[g]=c[g];e[31]=c[31]&127|64;e[0]&=248;L(f,d);for(g=0;g<16;g++)j[g]=f[g],l[g]=i[g]=k[g]=0;i[0]=l[0]=1;for(g=254;g>=0;--g)c=e[g>>>3]>>>(g&7)&1,H(i,j,c),H(k,l,c),M(m,i,k),N(i,i,k),M(k,j,l),N(j,j,l),P(l,m),P(n,i),O(i,k,i),O(k,j,m),M(m,i,k),N(i,i,k),P(j,i),N(k,l,n),O(i,k,h),M(i,i,l),O(k,k,i),O(i,l,n),O(l,j,f),P(j,m),H(i,j,c),H(k,l,c);for(g=0;g<16;g++)f[g+16]=i[g],f[g+32]=k[g],f[g+48]=j[g],f[g+64]=l[g];d=f.subarray(32);c=f.subarray(16);Q(d,d);O(c,c,d);I(a,c);return 0}function T(a,b){return S(a,b,e)}function U(a,b){c(b,32);return T(a,b)}function V(a,b,c){var e=new Uint8Array(32);S(e,c,b);return u(a,d,e,v)}var W=D,X=E;function aa(a,b,c,d,e,f){var g=new Uint8Array(32);V(g,e,f);return W(a,b,c,d,g)}function ba(a,b,c,d,e,f){var g=new Uint8Array(32);V(g,e,f);return X(a,b,c,d,g)}var ca=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function da(a,b,c,d){var e=new Int32Array(16),f=new Int32Array(16),g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G=a[0],H=a[1],I=a[2],J=a[3],K=a[4],L=a[5],M=a[6],N=a[7],O=b[0],P=b[1],Q=b[2],R=b[3],S=b[4],T=b[5],U=b[6],V=b[7],W=0;while(d>=128){for(y=0;y<16;y++)z=8*y+W,e[y]=c[z+0]<<24|c[z+1]<<16|c[z+2]<<8|c[z+3],f[y]=c[z+4]<<24|c[z+5]<<16|c[z+6]<<8|c[z+7];for(y=0;y<80;y++){g=G;h=H;i=I;j=J;k=K;l=L;m=M;N;o=O;p=P;q=Q;r=R;s=S;t=T;u=U;V;A=N;B=V;C=B&65535;D=B>>>16;E=A&65535;F=A>>>16;A=(K>>>14|S<<32-14)^(K>>>18|S<<32-18)^(S>>>41-32|K<<32-(41-32));B=(S>>>14|K<<32-14)^(S>>>18|K<<32-18)^(K>>>41-32|S<<32-(41-32));C+=B&65535;D+=B>>>16;E+=A&65535;F+=A>>>16;A=K&L^~K&M;B=S&T^~S&U;C+=B&65535;D+=B>>>16;E+=A&65535;F+=A>>>16;A=ca[y*2];B=ca[y*2+1];C+=B&65535;D+=B>>>16;E+=A&65535;F+=A>>>16;A=e[y%16];B=f[y%16];C+=B&65535;D+=B>>>16;E+=A&65535;F+=A>>>16;D+=C>>>16;E+=D>>>16;F+=E>>>16;w=E&65535|F<<16;x=C&65535|D<<16;A=w;B=x;C=B&65535;D=B>>>16;E=A&65535;F=A>>>16;A=(G>>>28|O<<32-28)^(O>>>34-32|G<<32-(34-32))^(O>>>39-32|G<<32-(39-32));B=(O>>>28|G<<32-28)^(G>>>34-32|O<<32-(34-32))^(G>>>39-32|O<<32-(39-32));C+=B&65535;D+=B>>>16;E+=A&65535;F+=A>>>16;A=G&H^G&I^H&I;B=O&P^O&Q^P&Q;C+=B&65535;D+=B>>>16;E+=A&65535;F+=A>>>16;D+=C>>>16;E+=D>>>16;F+=E>>>16;n=E&65535|F<<16;v=C&65535|D<<16;A=j;B=r;C=B&65535;D=B>>>16;E=A&65535;F=A>>>16;A=w;B=x;C+=B&65535;D+=B>>>16;E+=A&65535;F+=A>>>16;D+=C>>>16;E+=D>>>16;F+=E>>>16;j=E&65535|F<<16;r=C&65535|D<<16;H=g;I=h;J=i;K=j;L=k;M=l;N=m;G=n;P=o;Q=p;R=q;S=r;T=s;U=t;V=u;O=v;if(y%16===15)for(z=0;z<16;z++)A=e[z],B=f[z],C=B&65535,D=B>>>16,E=A&65535,F=A>>>16,A=e[(z+9)%16],B=f[(z+9)%16],C+=B&65535,D+=B>>>16,E+=A&65535,F+=A>>>16,w=e[(z+1)%16],x=f[(z+1)%16],A=(w>>>1|x<<32-1)^(w>>>8|x<<32-8)^w>>>7,B=(x>>>1|w<<32-1)^(x>>>8|w<<32-8)^(x>>>7|w<<32-7),C+=B&65535,D+=B>>>16,E+=A&65535,F+=A>>>16,w=e[(z+14)%16],x=f[(z+14)%16],A=(w>>>19|x<<32-19)^(x>>>61-32|w<<32-(61-32))^w>>>6,B=(x>>>19|w<<32-19)^(w>>>61-32|x<<32-(61-32))^(x>>>6|w<<32-6),C+=B&65535,D+=B>>>16,E+=A&65535,F+=A>>>16,D+=C>>>16,E+=D>>>16,F+=E>>>16,e[z]=E&65535|F<<16,f[z]=C&65535|D<<16}A=G;B=O;C=B&65535;D=B>>>16;E=A&65535;F=A>>>16;A=a[0];B=b[0];C+=B&65535;D+=B>>>16;E+=A&65535;F+=A>>>16;D+=C>>>16;E+=D>>>16;F+=E>>>16;a[0]=G=E&65535|F<<16;b[0]=O=C&65535|D<<16;A=H;B=P;C=B&65535;D=B>>>16;E=A&65535;F=A>>>16;A=a[1];B=b[1];C+=B&65535;D+=B>>>16;E+=A&65535;F+=A>>>16;D+=C>>>16;E+=D>>>16;F+=E>>>16;a[1]=H=E&65535|F<<16;b[1]=P=C&65535|D<<16;A=I;B=Q;C=B&65535;D=B>>>16;E=A&65535;F=A>>>16;A=a[2];B=b[2];C+=B&65535;D+=B>>>16;E+=A&65535;F+=A>>>16;D+=C>>>16;E+=D>>>16;F+=E>>>16;a[2]=I=E&65535|F<<16;b[2]=Q=C&65535|D<<16;A=J;B=R;C=B&65535;D=B>>>16;E=A&65535;F=A>>>16;A=a[3];B=b[3];C+=B&65535;D+=B>>>16;E+=A&65535;F+=A>>>16;D+=C>>>16;E+=D>>>16;F+=E>>>16;a[3]=J=E&65535|F<<16;b[3]=R=C&65535|D<<16;A=K;B=S;C=B&65535;D=B>>>16;E=A&65535;F=A>>>16;A=a[4];B=b[4];C+=B&65535;D+=B>>>16;E+=A&65535;F+=A>>>16;D+=C>>>16;E+=D>>>16;F+=E>>>16;a[4]=K=E&65535|F<<16;b[4]=S=C&65535|D<<16;A=L;B=T;C=B&65535;D=B>>>16;E=A&65535;F=A>>>16;A=a[5];B=b[5];C+=B&65535;D+=B>>>16;E+=A&65535;F+=A>>>16;D+=C>>>16;E+=D>>>16;F+=E>>>16;a[5]=L=E&65535|F<<16;b[5]=T=C&65535|D<<16;A=M;B=U;C=B&65535;D=B>>>16;E=A&65535;F=A>>>16;A=a[6];B=b[6];C+=B&65535;D+=B>>>16;E+=A&65535;F+=A>>>16;D+=C>>>16;E+=D>>>16;F+=E>>>16;a[6]=M=E&65535|F<<16;b[6]=U=C&65535|D<<16;A=N;B=V;C=B&65535;D=B>>>16;E=A&65535;F=A>>>16;A=a[7];B=b[7];C+=B&65535;D+=B>>>16;E+=A&65535;F+=A>>>16;D+=C>>>16;E+=D>>>16;F+=E>>>16;a[7]=N=E&65535|F<<16;b[7]=V=C&65535|D<<16;W+=128;d-=128}return d}function Y(a,b,c){var d=new Int32Array(8),e=new Int32Array(8),f=new Uint8Array(256),g,h=c;d[0]=1779033703;d[1]=3144134277;d[2]=1013904242;d[3]=2773480762;d[4]=1359893119;d[5]=2600822924;d[6]=528734635;d[7]=1541459225;e[0]=4089235720;e[1]=2227873595;e[2]=4271175723;e[3]=1595750129;e[4]=2917565137;e[5]=725511199;e[6]=4215389547;e[7]=327033209;da(d,e,b,c);c%=128;for(g=0;g<c;g++)f[g]=b[h-c+g];f[c]=128;c=256-128*(c<112?1:0);f[c-9]=0;n(f,c-8,h/536870912|0,h<<3);da(d,e,f,c);for(g=0;g<8;g++)n(a,8*g,d[g],e[g]);return 0}function ea(a,c){var d=b(),e=b(),f=b(),g=b(),h=b(),i=b(),k=b(),l=b(),m=b();N(d,a[1],a[0]);N(m,c[1],c[0]);O(d,d,m);M(e,a[0],a[1]);M(m,c[0],c[1]);O(e,e,m);O(f,a[3],c[3]);O(f,f,j);O(g,a[2],c[2]);M(g,g,g);N(h,e,d);N(i,g,f);M(k,g,f);M(l,e,d);O(a[0],h,i);O(a[1],l,k);O(a[2],k,i);O(a[3],h,l)}function fa(a,b,c){var d;for(d=0;d<4;d++)H(a[d],b[d],c)}function ga(a,c){var d=b(),e=b(),f=b();Q(f,c[2]);O(d,c[0],f);O(e,c[1],f);I(a,e);a[31]^=K(d)<<7}function ha(a,b,c){var d,e;F(a[0],f);F(a[1],g);F(a[2],g);F(a[3],f);for(e=255;e>=0;--e)d=c[e/8|0]>>(e&7)&1,fa(a,b,d),ea(b,a),ea(a,a),fa(a,b,d)}function ia(a,c){var d=[b(),b(),b(),b()];F(d[0],k);F(d[1],l);F(d[2],g);O(d[3],k,l);ha(a,d,c)}function ja(a,d,e){var f=new Uint8Array(64),g=[b(),b(),b(),b()];e||c(d,32);Y(f,d,32);f[0]&=248;f[31]&=127;f[31]|=64;ia(g,f);ga(a,g);for(e=0;e<32;e++)d[e+32]=a[e];return 0}var ka=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]);function la(a,b){var c,d,e,f;for(d=63;d>=32;--d){c=0;for(e=d-32,f=d-12;e<f;++e)b[e]+=c-16*b[d]*ka[e-(d-32)],c=Math.floor((b[e]+128)/256),b[e]-=c*256;b[e]+=c;b[d]=0}c=0;for(e=0;e<32;e++)b[e]+=c-(b[31]>>4)*ka[e],c=b[e]>>8,b[e]&=255;for(e=0;e<32;e++)b[e]-=c*ka[e];for(d=0;d<32;d++)b[d+1]+=b[d]>>8,a[d]=b[d]&255}function ma(a){var b=new Float64Array(64),c;for(c=0;c<64;c++)b[c]=a[c];for(c=0;c<64;c++)a[c]=0;la(a,b)}function na(a,c,d,e){var f=new Uint8Array(64),g=new Uint8Array(64),h=new Uint8Array(64),i,j=new Float64Array(64),k=[b(),b(),b(),b()];Y(f,e,32);f[0]&=248;f[31]&=127;f[31]|=64;var l=d+64;for(i=0;i<d;i++)a[64+i]=c[i];for(i=0;i<32;i++)a[32+i]=f[32+i];Y(h,a.subarray(32),d+32);ma(h);ia(k,h);ga(a,k);for(i=32;i<64;i++)a[i]=e[i];Y(g,a,d+64);ma(g);for(i=0;i<64;i++)j[i]=0;for(i=0;i<32;i++)j[i]=h[i];for(i=0;i<32;i++)for(c=0;c<32;c++)j[i+c]+=g[i]*f[c];la(a.subarray(32),j);return l}function oa(a,c){var d=b(),e=b(),h=b(),j=b(),k=b(),l=b(),n=b();F(a[2],g);L(a[1],c);P(h,a[1]);O(j,h,i);N(h,h,a[2]);M(j,a[2],j);P(k,j);P(l,k);O(n,l,k);O(d,n,h);O(d,d,j);R(d,d);O(d,d,h);O(d,d,j);O(d,d,j);O(a[0],d,j);P(e,a[0]);O(e,e,j);J(e,h)&&O(a[0],a[0],m);P(e,a[0]);O(e,e,j);if(J(e,h))return-1;K(a[0])===c[31]>>7&&N(a[0],f,a[0]);O(a[3],a[0],a[1]);return 0}function pa(a,c,d,e){var f,g=new Uint8Array(32),h=new Uint8Array(64),i=[b(),b(),b(),b()],j=[b(),b(),b(),b()];if(d<64)return-1;if(oa(j,e))return-1;for(f=0;f<d;f++)a[f]=c[f];for(f=0;f<32;f++)a[f+32]=e[f];Y(h,a,d);ma(h);ha(i,j,h);ia(j,c.subarray(32));ea(i,j);ga(g,i);d-=64;if(q(c,0,g,0)){for(f=0;f<d;f++)a[f]=0;return-1}for(f=0;f<d;f++)a[f]=c[f+64];return d}var qa=32,ra=24,sa=32,ta=16,ua=32,va=32,wa=32,xa=32,ya=32,za=ra,Aa=sa,Ba=ta,Z=64,Ca=32,Da=64,Ea=32,Fa=64;a.lowlevel={crypto_core_hsalsa20:u,crypto_stream_xor:z,crypto_stream:y,crypto_stream_salsa20_xor:w,crypto_stream_salsa20:x,crypto_onetimeauth:B,crypto_onetimeauth_verify:C,crypto_verify_16:p,crypto_verify_32:q,crypto_secretbox:D,crypto_secretbox_open:E,crypto_scalarmult:S,crypto_scalarmult_base:T,crypto_box_beforenm:V,crypto_box_afternm:W,crypto_box:aa,crypto_box_open:ba,crypto_box_keypair:U,crypto_hash:Y,crypto_sign:na,crypto_sign_keypair:ja,crypto_sign_open:pa,crypto_secretbox_KEYBYTES:qa,crypto_secretbox_NONCEBYTES:ra,crypto_secretbox_ZEROBYTES:sa,crypto_secretbox_BOXZEROBYTES:ta,crypto_scalarmult_BYTES:ua,crypto_scalarmult_SCALARBYTES:va,crypto_box_PUBLICKEYBYTES:wa,crypto_box_SECRETKEYBYTES:xa,crypto_box_BEFORENMBYTES:ya,crypto_box_NONCEBYTES:za,crypto_box_ZEROBYTES:Aa,crypto_box_BOXZEROBYTES:Ba,crypto_sign_BYTES:Z,crypto_sign_PUBLICKEYBYTES:Ca,crypto_sign_SECRETKEYBYTES:Da,crypto_sign_SEEDBYTES:Ea,crypto_hash_BYTES:Fa,gf:b,D:i,L:ka,pack25519:I,unpack25519:L,M:O,A:M,S:P,Z:N,pow2523:R,add:ea,set25519:F,modL:la,scalarmult:ha,scalarbase:ia};function Ga(a,b){if(a.length!==qa)throw new Error("bad key size");if(b.length!==ra)throw new Error("bad nonce size")}function Ha(a,b){if(a.length!==wa)throw new Error("bad public key size");if(b.length!==xa)throw new Error("bad secret key size")}function $(){for(var a=0;a<arguments.length;a++)if(!(arguments[a]instanceof Uint8Array))throw new TypeError("unexpected type, use Uint8Array")}function Ia(a){for(var b=0;b<a.length;b++)a[b]=0}a.randomBytes=function(a){var b=new Uint8Array(a);c(b,a);return b};a.secretbox=function(a,b,c){$(a,b,c);Ga(c,b);var d=new Uint8Array(sa+a.length),e=new Uint8Array(d.length);for(var f=0;f<a.length;f++)d[f+sa]=a[f];D(e,d,d.length,b,c);return e.subarray(ta)};a.secretbox.open=function(a,b,c){$(a,b,c);Ga(c,b);var d=new Uint8Array(ta+a.length),e=new Uint8Array(d.length);for(var f=0;f<a.length;f++)d[f+ta]=a[f];if(d.length<32)return null;return E(e,d,d.length,b,c)!==0?null:e.subarray(sa)};a.secretbox.keyLength=qa;a.secretbox.nonceLength=ra;a.secretbox.overheadLength=ta;a.scalarMult=function(a,b){$(a,b);if(a.length!==va)throw new Error("bad n size");if(b.length!==ua)throw new Error("bad p size");var c=new Uint8Array(ua);S(c,a,b);return c};a.scalarMult.base=function(a){$(a);if(a.length!==va)throw new Error("bad n size");var b=new Uint8Array(ua);T(b,a);return b};a.scalarMult.scalarLength=va;a.scalarMult.groupElementLength=ua;a.box=function(b,c,d,e){d=a.box.before(d,e);return a.secretbox(b,c,d)};a.box.before=function(a,b){$(a,b);Ha(a,b);var c=new Uint8Array(ya);V(c,a,b);return c};a.box.after=a.secretbox;a.box.open=function(b,c,d,e){d=a.box.before(d,e);return a.secretbox.open(b,c,d)};a.box.open.after=a.secretbox.open;a.box.keyPair=function(){var a=new Uint8Array(wa),b=new Uint8Array(xa);U(a,b);return{publicKey:a,secretKey:b}};a.box.keyPair.fromSecretKey=function(a){$(a);if(a.length!==xa)throw new Error("bad secret key size");var b=new Uint8Array(wa);T(b,a);return{publicKey:b,secretKey:new Uint8Array(a)}};a.box.publicKeyLength=wa;a.box.secretKeyLength=xa;a.box.sharedKeyLength=ya;a.box.nonceLength=za;a.box.overheadLength=a.secretbox.overheadLength;a.sign=function(a,b){$(a,b);if(b.length!==Da)throw new Error("bad secret key size");var c=new Uint8Array(Z+a.length);na(c,a,a.length,b);return c};a.sign.open=function(a,b){$(a,b);if(b.length!==Ca)throw new Error("bad public key size");var c=new Uint8Array(a.length);a=pa(c,a,a.length,b);if(a<0)return null;b=new Uint8Array(a);for(a=0;a<b.length;a++)b[a]=c[a];return b};a.sign.detached=function(b,c){b=a.sign(b,c);c=new Uint8Array(Z);for(var d=0;d<c.length;d++)c[d]=b[d];return c};a.sign.detached.verify=function(a,b,c){$(a,b,c);if(b.length!==Z)throw new Error("bad signature size");if(c.length!==Ca)throw new Error("bad public key size");var d=new Uint8Array(Z+a.length),e=new Uint8Array(Z+a.length),f;for(f=0;f<Z;f++)d[f]=b[f];for(f=0;f<a.length;f++)d[f+Z]=a[f];return pa(e,d,d.length,c)>=0};a.sign.keyPair=function(){var a=new Uint8Array(Ca),b=new Uint8Array(Da);ja(a,b);return{publicKey:a,secretKey:b}};a.sign.keyPair.fromSecretKey=function(a){$(a);if(a.length!==Da)throw new Error("bad secret key size");var b=new Uint8Array(Ca);for(var c=0;c<b.length;c++)b[c]=a[32+c];return{publicKey:b,secretKey:new Uint8Array(a)}};a.sign.keyPair.fromSeed=function(a){$(a);if(a.length!==Ea)throw new Error("bad seed size");var b=new Uint8Array(Ca),c=new Uint8Array(Da);for(var d=0;d<32;d++)c[d]=a[d];ja(b,c,!0);return{publicKey:b,secretKey:c}};a.sign.publicKeyLength=Ca;a.sign.secretKeyLength=Da;a.sign.seedLength=Ea;a.sign.signatureLength=Z;a.hash=function(a){$(a);var b=new Uint8Array(Fa);Y(b,a,a.length);return b};a.hash.hashLength=Fa;a.verify=function(a,b){$(a,b);if(a.length===0||b.length===0)return!1;return a.length!==b.length?!1:o(a,0,b,0,a.length)===0?!0:!1};a.setPRNG=function(a){c=a};(function(){var b=typeof self!=="undefined"?self.crypto||self.msCrypto:null;if(b&&b.getRandomValues){var c=65536;a.setPRNG(function(a,d){var e,f=new Uint8Array(d);for(e=0;e<d;e+=c)b.getRandomValues(f.subarray(e,e+Math.min(d-e,c)));for(e=0;e<d;e++)a[e]=f[e];Ia(f)})}else b&&b.randomBytes&&a.setPRNG(function(a,c){var d,e=b.randomBytes(c);for(d=0;d<c;d++)a[d]=e[d];Ia(e)})})()})(typeof g!=="undefined"&&g.exports?g.exports:self.nacl=self.nacl||{})}var i=!1;function j(){i||(i=!0,h());return g.exports}function a(a){switch(a){case void 0:return j()}}e.exports=a}),null);
__d("tweetnacl",["tweetnacl-1.0.3"],(function(a,b,c,d,e,f){e.exports=b("tweetnacl-1.0.3")()}),null);
__d("WACryptoDependencies",["tweetnacl"],(function(a,b,c,d,e,f,g){"use strict";var h=self.crypto;function a(a){h=a;var b=65536;d("tweetnacl").setPRNG(function(c,d){var e,f=new Uint8Array(d);for(e=0;e<d;e+=b)a.getRandomValues(f.subarray(e,e+Math.min(d-e,b)));for(e=0;e<d;e++)c[e]=f[e];for(e=0;e<f.length;e++)f[e]=0})}function b(){return h}g.setCrypto=a;g.getCrypto=b}),98);
__d("WAHex",["WACryptoDependencies","err"],(function(a,b,c,d,e,f,g){"use strict";var h=16,i=[48,49,50,51,52,53,54,55,56,57,65,66,67,68,69,70],j=[48,49,50,51,52,53,54,55,56,57,97,98,99,100,101,102];function a(a){a=new Uint8Array(a);d("WACryptoDependencies").getCrypto().getRandomValues(a);return k(a)}function k(a){var b=[];for(var c=0;c<a.length;c++){var d=a[c];b.push(i[d>>4],i[d&15])}return String.fromCharCode.apply(String,b)}function b(a){var b=[];for(var c=0;c<a.length;c++){var d=a[c];b.push(j[d>>4],j[d&15])}return String.fromCharCode.apply(String,b)}function e(a){a=m(a);if(a.length%2!==0)throw c("err")('parseHex given hex "'+a+'" which is not a multiple of 8-bits.');var b=new Uint8Array(a.length>>1);for(var d=0,e=0;d<a.length;d+=2,e++)b[e]=l(a,d)<<4|l(a,d+1);return b.buffer}function l(a,b){a=a.charCodeAt(b);if(a<=57)return a-48;else if(a<=70)return 10+a-65;else return 10+a-97}function m(a){if(/[^0-9a-fA-F]/.test(a))throw c("err")('"'+a+'" is not a valid hex');return a}function f(a){var b=a.buffer;return a.byteOffset===0&&a.length===b.byteLength?b:b.slice(a.byteOffset,a.byteOffset+a.length)}function n(a){var b=!0,c=a.length;while(b&&c){var d=a[--c];b=32<=d&&d<127}if(b)return JSON.stringify(String.fromCharCode.apply(String,a));else return k(a)}function o(a,b){b===void 0&&(b=!1);a=m(a);w(a,h);return(b?"-":"")+"0x"+q(a,h)}function p(a,b,c){c===void 0&&(c=!1);a=x(a);b=x(b);return(c?"-":"")+"0x"+a+b}function q(a,b){b=b-a.length;a=a;for(var c=0;c<b;c++)a="0"+a;return a}function r(a){var b=a<0;a=b?(-a).toString(16):a.toString(16);return o(a,b)}function s(a){return a.substring(a.indexOf("0x")+2)}function t(a){return a[0]==="-"}function u(a,b){var c=t(a),d=t(b);if(c!==d)return!c;d=s(a)>s(b);return c?!d:d}function v(a){return t(a)?a.slice(1):"-"+a}function w(a,b){if(a.length>b)throw c("err")('"'+a+'" is longer than '+b*4+" bits.")}function x(a){if(a>4294967295||a<-4294967296)throw c("err")("uint32ToLowerCaseHex given number over 32 bits");a=(a>=0?a:4294967296+a).toString(16);return q(a,8)}g.NUM_HEX_IN_LONG=h;g.HEX_LOWER=j;g.randomHex=a;g.toHex=k;g.toLowerCaseHex=b;g.parseHex=e;g.hexAt=l;g.hexOrThrow=m;g.bytesToBuffer=f;g.bytesToDebugString=n;g.createHexLong=o;g.createHexLongFrom32Bits=p;g.hexLongFromNumber=r;g.hexLongToHex=s;g.hexLongIsNegative=t;g.isBiggerHexLong=u;g.negateHexLong=v}),98);
__d("WALoggerUtils",["WAHex"],(function(a,b,c,d,e,f,g){"use strict";function h(a){if(typeof a==="string")return"'"+a+"'";else if(a==null||typeof a!=="object")return String(a);else if(Array.isArray(a))return"["+a.join(",")+"]";else if(a instanceof Uint8Array)if(a.length<64)return"<<"+i(a)+">>";else{var b=a.subarray(0,32);return"<<"+i(b)+", "+(a.length-b.length)+" more bytes>>"}else if(a instanceof Error)return a.name?"("+a.name+")":"";else if(a.toString===Object.prototype.toString)return JSON.stringify(a,function(a,b){return a?String(b):b});else return String(a)}function i(a){var b=!0,c=a.length;while(b&&c){var e=a[--c];b=32<=e&&e<127}if(b)return JSON.stringify(String.fromCharCode.apply(String,a));else return d("WAHex").toHex(a)}function a(a,b){var c=[a[0]];b.forEach(function(b,d){c.push(h(b),a[d+1])});return c.join("")}function b(a){return a}g.debugStr=h;g.bytesToDebugString=i;g.rebuildTemplate=a;g.dynamicLoggingSampling=b}),98);
__d("WANullthrows",["err"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){b===void 0&&(b="?");if(a==null)throw c("err")("Unexpected null or undefined: "+b);return a}g["default"]=a}),98);
__d("WATagsLogger",["Promise","WALoggerUtils","WANullthrows","regeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["[","] ",""]);i=function(){return a};return a}var j,k=new(h||b("Promise"))(function(a){j=a});function a(){return b("regeneratorRuntime").async(function(a){while(1)switch(a.prev=a.next){case 0:a.next=2;return b("regeneratorRuntime").awrap(k);case 2:case"end":return a.stop()}},null,this)}var l=null;function e(a){l=a,j==null?void 0:j(),j=null}function m(){return c("WANullthrows")(l,"WALogger called before initialization")}function n(a){return{TAGS:function(b){return n([].concat(a,b))},DEV:function(b){for(var c=arguments.length,e=new Array(c>1?c-1:0),f=1;f<c;f++)e[f-1]=arguments[f];var g=d("WALoggerUtils").rebuildTemplate(b,e),h={level:"DEV",template:b,expressions:e,logString:g};m().debug(g,a,h);return o(h)},DEV_XMPP:function(b){for(var c=arguments.length,e=new Array(c>1?c-1:0),f=1;f<c;f++)e[f-1]=arguments[f];var g=d("WALoggerUtils").rebuildTemplate(b,e),h={level:"DEV_XMPP",template:b,expressions:e,logString:g};m().logRestricted(g,a,h);return o(h)},LOG:function(b){for(var c=arguments.length,e=new Array(c>1?c-1:0),f=1;f<c;f++)e[f-1]=arguments[f];var g=d("WALoggerUtils").rebuildTemplate(b,e),h={level:"LOG",template:b,expressions:e,logString:g};m().info(g,a,h);return o(h)},WARN:function(b){for(var c=arguments.length,e=new Array(c>1?c-1:0),f=1;f<c;f++)e[f-1]=arguments[f];var g=d("WALoggerUtils").rebuildTemplate(b,e),h={level:"WARN",template:b,expressions:e,logString:g};m().warn(g,a,h);return o(h)},ERROR:function(b){for(var c=arguments.length,e=new Array(c>1?c-1:0),f=1;f<c;f++)e[f-1]=arguments[f];var g=d("WALoggerUtils").rebuildTemplate(b,e),h={level:"ERROR",template:b,expressions:e,logString:g},i=void 0;for(var j=0;j<e.length;j++){var k=e[j];if(k instanceof Error){i=k;break}}i!=null?m().error(g,a,i,h):m().error(g,a,void 0,h);return o(h)},CATCHING:function(b){for(var c=arguments.length,e=new Array(c>1?c-1:0),f=1;f<c;f++)e[f-1]=arguments[f];var g=d("WALoggerUtils").rebuildTemplate(b,e),h={level:"CATCHING",template:b,expressions:e,logString:g};m().error(g,a,void 0,h);return o(h)},EXPECTED_ERROR:function(b){for(var c=arguments.length,e=new Array(c>1?c-1:0),f=1;f<c;f++)e[f-1]=arguments[f];var g=d("WALoggerUtils").rebuildTemplate(b,e),h={level:"ERROR",template:b,expressions:e,logString:g,tags:[].concat(a)};return o(h)}}}function o(a){return{verbose:function(){a.verbose=!0;return o(a)},color:function(b){a.color=b;return o(a)},devConsole:function(){var b;for(var c=arguments.length,d=new Array(c),e=0;e<c;e++)d[e]=arguments[e];(b=m()).devConsole.apply(b,[a.level,a.logString,[]].concat(d));return o(a)},sendLogs:function(b,c){if(m().sendLogs!=null)a.sendLogs={reason:b,sampling:c==null?void 0:c.sampling,sendLogsType:c==null?void 0:c.sendLogsType},m().sendLogs==null?void 0:m().sendLogs(a);else if(a.level!=="ERROR"&&a.level!=="CATCHING")return n([]).ERROR(i(),b,a.logString);return o(a)},tags:function(){for(var b=arguments.length,c=new Array(b),d=0;d<b;d++)c[d]=arguments[d];a.tags=c;m().tags!=null&&(m().tags==null?void 0:m().tags(c));return o(a)},expect:function(b){if(a.level!=="ERROR")return o(a);var c=void 0;for(var d=a.expressions,e=Array.isArray(d),f=0,d=e?d:d[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var g;if(e){if(f>=d.length)break;g=d[f++]}else{f=d.next();if(f.done)break;g=f.value}g=g;if(g instanceof Error){c=g;break}}f=(d=(f=(g=c)==null?void 0:g.message)!=null?f:(e=c)==null?void 0:e.name)!=null?d:(g=c)==null?void 0:g.description;for(e=0;e<b.length;e++){d=b[e];if(f==null?void 0:f.includes(d)){m().error(a.logString,[].concat((g=a.tags)!=null?g:[],["expected-error-log"]),(d=c)!=null?d:void 0,a);return o(a)}}m().error(a.logString,(g=a==null?void 0:a.tags)!=null?g:[],(d=c)!=null?d:void 0,a);return o(a)}}}g.whenReady=a;g.initializeWaLogger=e;g.TAGS=n;g.getWaLoggerAdditionalOptions=o}),98);
__d("WALogger",["$InternalEnum","WATagsLogger"],(function(a,b,c,d,e,f,g){"use strict";a=b("$InternalEnum").Mirrored(["UNCAUGHT_EXCEPTION_SAD","UNHANDLED_REJECTED_PROMISE_SAD","CRASH_OR_UNRECOVERABLE_ERROR_SAD","USER_FORCEFULLY_LOGGED_OUT_SAD","UNCATEGORIZED_SAD","EXTREMELY_BAD_USER_EXPERIENCE_SAD","UNCAUGHT_EXCEPTION","UNHANDLED_REJECTED_PROMISE","MINOR_ISSUE","INVESTIGATION","COUNTING_STAT","UNCATEGORIZED"]);c=new Set([a.UNCATEGORIZED_SAD,a.UNCAUGHT_EXCEPTION_SAD,a.UNHANDLED_REJECTED_PROMISE_SAD,a.CRASH_OR_UNRECOVERABLE_ERROR_SAD,a.USER_FORCEFULLY_LOGGED_OUT_SAD,a.EXTREMELY_BAD_USER_EXPERIENCE_SAD]);e=d("WATagsLogger").TAGS([]);f=e.DEV;b=e.DEV_XMPP;d=e.LOG;var h=e.WARN,i=e.ERROR;e=e.EXPECTED_ERROR;g.SendLogsType=a;g.SadSendLogsTypes=c;g.DEV=f;g.DEV_XMPP=b;g.LOG=d;g.WARN=h;g.ERROR=i;g.EXPECTED_ERROR=e}),98);
__d("WABase64",["WACryptoDependencies","WALogger","err"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["Found unexpected character code while decoding B64 at index ",", length ",": ",""]);h=function(){return a};return a}var i=43,j=47,k=61,l=45,m=95,n=3e3,o="data:image/jpeg;base64,",p=function(a){return typeof a==="string"&&/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(a)};function q(a){return r(a,i,j,!0)}function a(a,b){b===void 0&&(b=!1);return r(a,l,m,b)}function r(a,b,c,d){a=Array.isArray(a)||a instanceof ArrayBuffer?new Uint8Array(a):a;if(a.length<=n)return s(a,b,c,d);else{var e=[];for(var f=0;f<a.length;f+=n)e.push(s(a.subarray(f,f+n),b,c,d));return e.join("")}}function s(a,b,c,d){var e=Math.ceil(a.length*4/3),f=4*Math.ceil(a.length/3),g=new Array(f);for(var h=0,i=0;h<f;h+=4,i+=3){var j=a[i]<<16|a[i+1]<<8|a[i+2];g[h]=j>>18;g[h+1]=j>>12&63;g[h+2]=j>>6&63;g[h+3]=j&63}for(j=0;j<e;j++){a=g[j];a<26?g[j]=65+a:a<52?g[j]=71+a:a<62?g[j]=a-4:a===62?g[j]=b:g[j]=c}for(h=e;h<f;h++)g[h]=61;i=String.fromCharCode.apply(String,g);return d?i:i.substring(0,e)}function t(a,b,c,e){var f=a.length,g=new Int32Array(f+f%4);for(var i=0;i<f;i++){var j=a.charCodeAt(i);if(65<=j&&j<=90)g[i]=j-65;else if(97<=j&&j<=122)g[i]=j-71;else if(48<=j&&j<=57)g[i]=j+4;else if(j===b)g[i]=62;else if(j===c)g[i]=63;else if(j===e){f=i;break}else{self.ERROR!=null&&d("WALogger").ERROR(h(),i,f,j);return null}}j=g.length/4;for(b=0,c=0;b<j;b++,c+=4)g[b]=g[c]<<18|g[c+1]<<12|g[c+2]<<6|g[c+3];e=Math.floor(f*3/4);i=new Uint8Array(e);a=0;b=0;for(;b+3<=e;a++,b+=3){j=g[a];i[b]=j>>16;i[b+1]=j>>8&255;i[b+2]=j&255}switch(e-b){case 2:i[b]=g[a]>>16;i[b+1]=g[a]>>8&255;break;case 1:i[b]=g[a]>>16}return i}function b(a){a=t(a,i,j,k);if(a)return a.buffer;else throw c("err")("Base64.decode given invalid string")}function e(a,b){b===void 0&&(b=!1);a=t(a,l,m,b?k:-1);if(a)return a.buffer;else throw c("err")("Base64.decode given invalid string")}function f(a){a=a instanceof ArrayBuffer?new Uint8Array(a):t(a,i,j,k);return a&&Array.from(a)}function u(a){return Math.floor(a.length*3/4)}function v(a){a=new Uint8Array(a);d("WACryptoDependencies").getCrypto().getRandomValues(a);return q(a)}g.BASE64_DATA_URL_SCHEME=o;g.isBase64=p;g.encodeB64=q;g.encodeB64UrlSafe=a;g.decodeB64=b;g.decodeB64UrlSafe=e;g.decodeB64ToJsArray=f;g.sizeWhenB64Decoded=u;g.randomBase64=v}),98);
__d("WABinary",["WAHex","err"],(function(a,b,c,d,e,f,g){"use strict";var h=65533,i=10,j=new Uint8Array(i),k=new Uint8Array(0);a=function(){function a(b,c){var d=this;b===void 0&&(b=k);c===void 0&&(c=!1);this.$1=new Uint8Array(0);this.$2=0;this.$4=0;this.write=function(){for(var b=0;b<arguments.length;b++){var c=b<0||arguments.length<=b?void 0:arguments[b];typeof c==="string"?d.writeString(c):typeof c==="number"?d.writeUint8(c):c instanceof a?d.writeBinary(c):c instanceof ArrayBuffer?d.writeBuffer(c):c instanceof Uint8Array&&d.writeByteArray(c)}};b instanceof ArrayBuffer?(this.$1=new Uint8Array(b),this.$2=this.$4=b.byteLength):b instanceof Uint8Array&&(this.$1=b,this.$2=this.$4=b.length);this.$5=0;this.$6=this.$3=0;this.$7=null;this.$8=c;this.$9=0;this.$10=0}var b=a.prototype;b.size=function(){return this.$2-this.$3};b.peek=function(a,b){this.$9++;var c=this.$3,d=this.$5;try{return a(this,b)}finally{this.$9--,this.$3=c-(this.$5-d)}};b.advance=function(a){this.$11(a)};b.readWithViewParser=function(a,b,c,d){return b(this.$12(),this.$11(a),a,c,d)};b.readWithBytesParser=function(a,b,c,d){return b(this.$1,this.$11(a),a,c,d)};b.readUint8=function(){return p(this,1,r,!1)};b.readInt8=function(){return p(this,1,r,!0)};b.readUint16=function(a){a===void 0&&(a=this.$8);return p(this,2,s,a)};b.readInt32=function(a){a===void 0&&(a=this.$8);return p(this,4,t,a)};b.readUint32=function(a){a===void 0&&(a=this.$8);return p(this,4,u,a)};b.readInt64=function(a){a===void 0&&(a=this.$8);return p(this,8,v,U,a)};b.readUint64=function(a){a===void 0&&(a=this.$8);return p(this,8,v,V,a)};b.readLong=function(a,b){b===void 0&&(b=this.$8);return p(this,8,v,a,b)};b.readFloat32=function(a){a===void 0&&(a=this.$8);return p(this,4,w,a)};b.readFloat64=function(a){a===void 0&&(a=this.$8);return p(this,8,x,a)};b.readVarInt=function(a){var b=this.size();b=q(this,0,y,b);return q(this,b,z,a)};b.readBuffer=function(a){a===void 0&&(a=this.size());return a===0?new ArrayBuffer(0):q(this,a,A)};b.readByteArray=function(a){a===void 0&&(a=this.size());return a===0?new Uint8Array(0):q(this,a,B)};b.readBinary=function(b,c){b===void 0&&(b=this.size());c===void 0&&(c=this.$8);if(b===0)return new a(void 0,c);b=q(this,b,B);return new a(b,c)};b.indexOf=function(a){if(a.length===0)return 0;var b=this.$1,c=this.$2,d=this.$3,e=0,f=d;for(var g=d;g<c;g++)if(b[g]===a[e]){e===0&&(f=g);e++;if(e===a.byteLength)return g-d-a.byteLength+1}else e>0&&(e=0,g=f);return-1};b.readString=function(a){return q(this,a,C)};b.ensureCapacity=function(a){this.$13(this.$3+a)};b.ensureAdditionalCapacity=function(a){this.$13(this.$4+a)};b.writeToView=function(a,b,c,d){var e=this.$14(a);return b(this.$12(),e,a,c,d)};b.writeToBytes=function(a,b,c,d){var e=this.$14(a);return b(this.$1,e,a,c,d)};b.writeUint8=function(a){S(a,0,256,"uint8"),E(this,1,F,a,!1)};b.writeInt8=function(a){S(a,-128,128,"signed int8"),E(this,1,F,a,!0)};b.writeUint16=function(a,b){b===void 0&&(b=this.$8),S(a,0,65536,"uint16"),D(this,2,G,a,b)};b.writeInt16=function(a,b){b===void 0&&(b=this.$8),S(a,-32768,32768,"signed int16"),D(this,2,H,a,b)};b.writeUint32=function(a,b){b===void 0&&(b=this.$8),S(a,0,4294967296,"uint32"),D(this,4,I,a,b)};b.writeInt32=function(a,b){b===void 0&&(b=this.$8),S(a,-2147483648,2147483648,"signed int32"),D(this,4,J,a,b)};b.writeUint64=function(a,b){b===void 0&&(b=this.$8),S(a,0,18446744073709552e3,"uint64"),D(this,8,K,a,b)};b.writeInt64=function(a,b){b===void 0&&(b=this.$8),S(a,-9223372036854776e3,9223372036854776e3,"signed int64"),D(this,8,K,a,b)};b.writeFloat32=function(a,b){b===void 0&&(b=this.$8),D(this,4,L,a,b)};b.writeFloat64=function(a,b){b===void 0&&(b=this.$8),D(this,8,M,a,b)};b.writeVarInt=function(a){S(a,-9223372036854776e3,9223372036854776e3,"varint (signed int64)");var b=a<0;a=b?-a:a;var c=Math.floor(a/4294967296);a=a-c*4294967296;b&&(c=~c,a===0?c++:a=-a);b=R(c,a);E(this,b,N,c,a)};b.writeVarIntFromHexLong=function(a){var b=d("WAHex").hexLongIsNegative(a);a=b?d("WAHex").negateHexLong(a):a;a=d("WAHex").hexLongToHex(a);var c=0,e=0;for(var f=0;f<d("WAHex").NUM_HEX_IN_LONG;f++)c=c<<4|e>>>28,e=e<<4|d("WAHex").hexAt(a,f);b&&(c=~c,e===0?c++:e=-e);a=R(c,e);E(this,a,N,c,e)};b.writeBinary=function(a){a=a.peek(function(a){return a.readByteArray()});if(a.length){var b=this.$14(a.length);this.$1.set(a,b)}};b.writeBuffer=function(a){this.writeByteArray(new Uint8Array(a))};b.writeByteArray=function(a){var b=this.$14(a.length);this.$1.set(a,b)};b.writeBufferView=function(a){this.writeByteArray(new Uint8Array(a.buffer,a.byteOffset,a.byteLength))};b.writeString=function(a){E(this,n(a),O,a)};b.writeHexLong=function(a,b){b===void 0&&(b=this.$8),D(this,8,P,a,b)};b.writeBytes=function(){for(var a=arguments.length,b=new Array(a),c=0;c<a;c++)b[c]=arguments[c];for(var d=0;d<b.length;d++)S(b[d],0,256,"byte");E(this,b.length,Q,b)};b.writeAtomically=function(a,b){this.$10++;var c=this.$4,d=this.$5;try{a=a(this,b);c=this.$4;d=this.$5;return a}finally{this.$10--,this.$4=c-(this.$5-d)}};b.writeWithVarIntLength=function(a,b){var c=this.$4;a=this.writeAtomically(a,b);b=this.$4;this.writeVarInt(b-c);var d=this.$4-b,e=this.$1;for(var f=0;f<d;f++)j[f]=e[b+f];for(f=b-1;f>=c;f--)e[f+d]=e[f];for(b=0;b<d;b++)e[c+b]=j[b];return a};a.build=function(){for(var b=arguments.length,c=new Array(b),d=0;d<b;d++)c[d]=arguments[d];var e=0;for(var f=0;f<c.length;f++){var g=c[f];typeof g==="string"?e+=n(g):typeof g==="number"?e++:g instanceof a?e+=g.size():g instanceof ArrayBuffer?e+=g.byteLength:g instanceof Uint8Array&&(e+=g.length)}var h=new a();h.ensureCapacity(e);h.write.apply(h,arguments);return h};b.$12=function(){return this.$7||(this.$7=new DataView(this.$1.buffer,this.$1.byteOffset))};b.$11=function(a){if(a<0)throw c("err")("ReadError: given negative number of bytes to read");var b=this.$3;a=b+a;if(a>this.$2)throw c("err")(b===this.$2?"ReadError: tried to read from depleted binary":"ReadError: tried to read beyond end of binary");this.$3=a;this.$9||(this.$6=a);return b};b.$13=function(a){var b=this.$1;if(a<=b.length)return a;else{var c=this.$6;a=a-c;var d=Math.max(a,2*(b.length-c),64);d=new Uint8Array(d);c?(d.set(b.subarray(c)),this.$5+=c,this.$3-=c,this.$2-=c,this.$4-=c,this.$6=0):d.set(b);this.$1=d;this.$7=null;return a}};b.$14=function(a){a=this.$13(this.$4+a);var b=this.$4;this.$4=a;this.$10||(this.$2=a);return b};return a}();var l="",m=0;function n(a){if(a===l)return m;var b=a.length,c=0;for(var d=0;d<b;d++){var e=a.charCodeAt(d);if(e<128)c++;else if(e<2048)c+=2;else if(e<55296||57344<=e&&e<=65535)c+=3;else if(55296<=e&&e<56320&&d+1!==b){e=a.charCodeAt(d+1);56320<=e&&e<57344?(d++,c+=4):c+=3}else c+=3}l=a;return m=c}function o(a,b,c){var d=b>>21;if(!a)return d===0;else{a=b&2097151;b=Boolean(a||c);return d===0||d===-1&&b}}function p(a,b,c,d,e){return a.readWithViewParser(b,c,d,e)}function q(a,b,c,d,e){return a.readWithBytesParser(b,c,d,e)}function r(a,b,c,d){return d?a.getInt8(b):a.getUint8(b)}function s(a,b,c,d){return a.getUint16(b,d)}function t(a,b,c,d){return a.getInt32(b,d)}function u(a,b,c,d){return a.getUint32(b,d)}function v(a,b,c,d,e){c=a.getInt32(e?b+4:b,e);a=a.getInt32(e?b:b+4,e);return d(c,a)}function w(a,b,c,d){return a.getFloat32(b,d)}function x(a,b,c,d){return a.getFloat64(b,d)}function y(a,b,d,e){d=Math.min(e,i);e=0;var f=128;while(e<d&&f&128)f=a[b+e++];if(e===i&&f>1)throw c("err")("ParseError: varint exceeds 64 bits");else if(f&128)return e+1;return e}function z(b,c,d,a){var e=0,f=0,g=d;d===i&&(g--,f=b[c+g]&1);for(d=g-1;d>=0;d--)e=e<<7|f>>>25,f=f<<7|b[c+d]&127;return a(e,f)}function A(a,b,c){b=b+a.byteOffset;a=a.buffer;return b===0&&c===a.byteLength?a:a.slice(b,b+c)}function B(a,b,c){return a.subarray(b,b+c)}function C(a,b,c){c=b+c;var d=[],e=null;for(b=b;b<c;b++){d.length>5e3&&(e||(e=[]),e.push(String.fromCharCode.apply(String,d)),d=[]);var f=a[b]|0;if((f&128)===0)d.push(f);else if((f&224)===192){var g=W(a,b+1,c);if(g){b++;g=(f&31)<<6|g&63;g>=128?d.push(g):d.push(h)}else d.push(h)}else if((f&240)===224){g=W(a,b+1,c);var i=W(a,b+2,c);if(g&&i){b+=2;i=(f&15)<<12|(g&63)<<6|i&63;i>=2048&&!(55296<=i&&i<57344)?d.push(i):d.push(h)}else g?(b++,d.push(h)):d.push(h)}else if((f&248)===240){i=W(a,b+1,c);g=W(a,b+2,c);var j=W(a,b+3,c);if(i&&g&&j){b+=3;f=(f&7)<<18|(i&63)<<12|(g&63)<<6|j&63;if(f>=65536&&f<=1114111){j=f-65536;d.push(55296|j>>10,56320|j&1023)}else d.push(h)}else i&&g?(b+=2,d.push(h)):i?(b++,d.push(h)):d.push(h)}else d.push(h)}f=String.fromCharCode.apply(String,d);if(e){e.push(f);return e.join("")}else return f}function D(a,b,c,d,e){return a.writeToView(b,c,d,e)}function E(a,b,c,d,e){return a.writeToBytes(b,c,d,e)}function F(a,b,c,d){a[b]=d}function G(a,b,c,d,e){a.setUint16(b,d,e)}function H(a,b,c,d,e){a.setInt16(b,d,e)}function I(a,b,c,d,e){a.setUint32(b,d,e)}function J(a,b,c,d,e){a.setInt32(b,d,e)}function K(a,b,c,d,e){c=d<0;d=c?-d:d;var f=Math.floor(d/4294967296);d=d-f*4294967296;c&&(f=~f,d===0?f++:d=-d);a.setUint32(e?b+4:b,f,e);a.setUint32(e?b:b+4,d,e)}function L(a,b,c,d,e){a.setFloat32(b,d,e)}function M(a,b,c,d,e){a.setFloat64(b,d,e)}function N(a,b,c,d,e){d=d;e=e;c=b+c-1;for(b=b;b<c;b++)a[b]=128|e&127,e=d<<25|e>>>7,d>>>=7;a[c]=e}function O(a,b,c,d){c=b;b=d.length;for(var e=0;e<b;e++){var f=d.charCodeAt(e);if(f<128)a[c++]=f;else if(f<2048)a[c++]=192|f>>6,a[c++]=128|f&63;else if(f<55296||57344<=f)a[c++]=224|f>>12,a[c++]=128|f>>6&63,a[c++]=128|f&63;else if(55296<=f&&f<56320&&e+1!==b){var g=d.charCodeAt(e+1);if(56320<=g&&g<57344){e++;f=65536+((f&1023)<<10|g&1023);a[c++]=240|f>>18;a[c++]=128|f>>12&63;a[c++]=128|f>>6&63;a[c++]=128|f&63}else a[c++]=239,a[c++]=191,a[c++]=189}else a[c++]=239,a[c++]=191,a[c++]=189}}function P(a,b,c,e,f){c=d("WAHex").hexLongIsNegative(e);e=d("WAHex").hexLongToHex(e);var g=0,h=0;for(var i=0;i<16;i++)g=g<<4|h>>>28,h=h<<4|d("WAHex").hexAt(e,i);c&&(g=~g,h===0?g++:h=-h);a.setUint32(f?b+4:b,g,f);a.setUint32(f?b:b+4,h,f)}function Q(a,b,c,d){for(var e=0;e<c;e++)a[b+e]=d[e]}function R(a,b){var c;a?(c=5,a=a>>>3):(c=1,a=b>>>7);while(a)c++,a>>>=7;return c}function S(a,b,d,e){if(typeof a!=="number"||a!==a||Math.floor(a)!==a||a<b||a>=d)throw c("err")(typeof a==="string"?'TyperError WriteError: string "'+a+'" is not a valid '+e:"TypeError WriteError: "+String(a)+" is not a valid "+e)}function T(a,b,d){var e=o(a,b,d),f;b>=0?f=b:f=a?b:4294967296+b;a=d>=0?d:4294967296+d;b=f*4294967296+a;if(!e)throw c("err")("ReadError: integer exceeded 53 bits ("+b+")");return b}function U(a,b){return T(!0,a,b)}function V(a,b){return T(!1,a,b)}function W(a,b,c){if(b>=c)return 0;c=a[b]|0;return(c&192)===128?c:0}g.Binary=a;g.numUtf8Bytes=n;g.longFitsInDouble=o;g.parseInt64OrThrow=U;g.parseUint64OrThrow=V}),98);
__d("WACamelCase",[],(function(a,b,c,d,e,f){"use strict";function a(a){return a.replace(/_|-/g," ").replace(/[0-9]/g,function(a){return a+" "}).replace(/(?:^\w|[A-Z]|\b\w)/g,function(a,b){return b===0?a.toLowerCase():a.toUpperCase()}).replace(/\s+/g,"")}f["default"]=a}),66);
__d("WAErrors",["WACustomError"],(function(a,b,c,d,e,f,g){"use strict";b=(a=d("WACustomError")).customError("BufferTooLarge",!1);c=a.customError("Disconnected",!1);e=a.customError("Offline",!1,c);f=a.customError("MaxRetries",!1);d=a.customError("Aborted",!1);g.BufferTooLargeError=b;g.Disconnected=c;g.Offline=e;g.MaxRetries=f;g.Aborted=d}),98);
__d("WANotifyConnectionChangeFactory",[],(function(a,b,c,d,e,f){"use strict";var g=15e3;function a(a,b,c){c===void 0&&(c=g);var d={timeoutID:null,connectionStatus:"disconnected",optimismLevel:"optimist"},e=function(){var a=d.optimismLevel,e=d.connectionStatus;a==="optimist"?d.timeoutID=setTimeout(function(){d.optimismLevel="realist",b(e)},c):b(e)};return function(c){d.connectionStatus=c,c==="disconnected"?e():c==="in_handshake"?e():(c,d.timeoutID!=null&&(clearTimeout(d.timeoutID),d.timeoutID=null),b(c)),a(c)}}f.notifyConnectionChangeFactory=a}),66);
__d("WAPromiseBackoffs",["Promise","err"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a,b){if(a===0)return 0;var c=o(b.algo);for(var d=1;d<a;d++)c();return j(b,c())}function i(a){var b=a.relativeDelay,c=b===void 0?!1:b,d=null,e=o(a.algo);return function(){var b=d;if(b==null){d=c?Date.now():0;return 0}var f=j(a,e());if(c){var g=Date.now();b=g-b;b>0&&(f=Math.max(0,f-b));d=g}return f}}function d(a){var c=i(a);return function(a){return new(h||(h=b("Promise")))(function(b){var d=c();d>0?setTimeout(b,d,a):b(a)})}}function j(a,b){var c=a.max,d=a.min;a=a.jitter;a=a===void 0?.1:a;b=b;c!=null&&b>c&&(b=c);d!=null&&b<d&&(b=d);a!==0&&(b=Math.ceil(b*(1+a*Math.random())));return b}function k(a){var b=a.second-a.first,c=a.first-b;return function(){var a=b+c;c=b;b=a;return a}}function l(a){var b=a.base,c=b===void 0?2:b,d=a.first;return function(){var a=d;d*=c;return a}}function m(a){var b=a.delay;return function(){return b}}function n(a){var b=a.toMs;a=a.backoff;var c=o(a);return function(){return b(c())}}function o(a){switch(a.type){case"fibonacci":return k(a);case"exponential":return l(a);case"constant":return m(a);case"adjust":return n(a);default:a;throw c("err")("makeTimeFunc unrecognized backoff "+a.type)}}g.getDelay=a;g.createTimer=i;g.createPromiseTimer=d}),98);
__d("WAPromiseDelays",["Promise","WAAbortError"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a,c){return new(h||(h=b("Promise")))(function(b,e){if(c==null?void 0:c.aborted)throw new(d("WAAbortError").AbortError)();var f=setTimeout(g,a);c==null?void 0:c.addEventListener("abort",h);function g(){c==null?void 0:c.removeEventListener("abort",h),b()}function h(){c==null?void 0:c.removeEventListener("abort",h),clearTimeout(f),e(new(d("WAAbortError").AbortError)())}})}function c(a,c,d){return new(h||(h=b("Promise")))(function(b,e){var f=setTimeout(function(){try{b(d())}catch(a){e(a)}},c);a.then(function(a){clearTimeout(f),b(a)},function(a){clearTimeout(f),e(a)})})}g.delayMs=a;g.withTimeout=c}),98);
__d("WAResolvable",["Promise"],(function(a,b,c,d,e,f){"use strict";var g;a=function(){function a(){var a=this;this.$1=function(){};this.$2=!1;this.isSettled=!1;this.promise=new(g||(g=b("Promise")))(function(b){a.$1=b})}var c=a.prototype;c.resolve=function(a){this.$2=!0,this.isSettled=!0,this.$1(a)};c.reject=function(a){this.isSettled=!0,this.resolve((g||(g=b("Promise"))).reject(a))};c.resolveWasCalled=function(){return this.$2};return a}();f.Resolvable=a}),66);
__d("WAPromiseRetryLoop",["Promise","WALogger","WAPromiseBackoffs","WAPromiseDelays","WAResolvable","err"],(function(a,b,c,d,e,f,g){"use strict";var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["PromiseRetryLoop: retrying "," in ","ms"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["PromiseRetryLoop: resetting ",""]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["PromiseRetryLoop was called several times. You may have race conditions"]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["PromiseRetryLoop: starting ",""]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["PromiseRetryLoop: resetting ",""]);m=function(){return a};return a}a=function(){function a(a){var b=this;this.$2=new(d("WAResolvable").Resolvable)();this.$3=null;this.$4=null;this.$5=0;this.endWithValue=function(a){b.$5++,b.$2.resolve(a)};this.$1=a}var e=a.prototype;e.resetTimeoutAfter=function(a){this.$4=Date.now()+a};e.cancelReset=function(){this.$4=null};e.reset=function(){if(this.$2.resolveWasCalled())return;d("WALogger").LOG(m(),this.$1.name);this.$5++;this.$6()};e.start=function(){if(this.$2.resolveWasCalled())return;d("WALogger").LOG(l(),this.$1.name);this.$5!==0&&d("WALogger").ERROR(k());this.$5++;this.$6()};e.$6=function(){var a=this,c=this.$1,e=this.$5,f=d("WAPromiseBackoffs").createTimer(this.$1.timer);f();var g=function b(){if(a.$2.resolveWasCalled())return;if(e!==a.$5)return;var g=Date.now();a.$3=c.code(a.endWithValue).then(function(){if(a.$2.resolveWasCalled())return;var e=c.resetDelay;(e!==void 0&&Date.now()>=g+e||a.$4!=null&&a.$4<=Date.now())&&(d("WALogger").LOG(j(),c.name),f=d("WAPromiseBackoffs").createTimer(a.$1.timer));a.$4=null;e=f();d("WALogger").LOG(i(),c.name,e);return d("WAPromiseDelays").delayMs(e).then(b)});return a.$3};this.$3=(h||(h=b("Promise"))).resolve().then(g)};e.promise=function(){var a=this;if(this.$2.resolveWasCalled())return this.$2.promise;return!this.$3?(h||(h=b("Promise"))).reject(c("err")("PromiseRetryLoop "+this.$1.name+" had promise() called before start()")):(h||(h=b("Promise"))).race([this.$2.promise,this.$3.then(function(){return a.$2.promise})])};return a}();g.PromiseRetryLoop=a}),98);
__d("WAResultOrError",["Promise","regeneratorRuntime"],(function(a,b,c,d,e,f){"use strict";var g;function h(a,b){if(b!=null)return{success:!1,error:a,payload:b};else return{success:!1,error:a}}function i(a){return{success:!0,value:a}}function a(a,b){return!a.success?a:i(b(a.value))}function c(a,c){var d;return b("regeneratorRuntime").async(function(e){while(1)switch(e.prev=e.next){case 0:e.next=2;return b("regeneratorRuntime").awrap(a);case 2:d=e.sent;if(d.success){e.next=5;break}return e.abrupt("return",d);case 5:return e.abrupt("return",i(c(d.value)));case 6:case"end":return e.stop()}},null,this)}function j(a,c){var d;return b("regeneratorRuntime").async(function(e){while(1)switch(e.prev=e.next){case 0:if(a.success){e.next=2;break}return e.abrupt("return",a);case 2:e.next=4;return b("regeneratorRuntime").awrap(c(a.value));case 4:d=e.sent;return e.abrupt("return",i(d));case 6:case"end":return e.stop()}},null,this)}function d(a,b){return a.success?i(a.value):h(b(a.error),a.payload)}function k(a,c){var d;return b("regeneratorRuntime").async(function(e){while(1)switch(e.prev=e.next){case 0:if(!a.success){e.next=2;break}return e.abrupt("return",i(a.value));case 2:e.next=4;return b("regeneratorRuntime").awrap(c(a.error));case 4:d=e.sent;return e.abrupt("return",h(d,a.payload));case 6:case"end":return e.stop()}},null,this)}function e(a,b){return a.success?b(a.value):a}function l(a,c){return a.success?c(a.value):(g||(g=b("Promise"))).resolve(a)}function m(a){return function(b){return j(b,a)}}function n(a){return function(c){return b("regeneratorRuntime").async(function(d){while(1)switch(d.prev=d.next){case 0:d.next=2;return b("regeneratorRuntime").awrap(k(c,a));case 2:case"end":return d.stop()}},null,this)}}f.makeError=h;f.makeResult=i;f.mapResult=a;f.mapAsyncResult=c;f.asyncMapResult=j;f.mapError=d;f.asyncMapError=k;f.chain=e;f.asyncChain=l;f.onResult=m;f.catchError=n}),66);
__d("WAShiftTimer",["err"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a){var b=this;this.$2=0;this.$3=0;this.ts=0;this.$4=0;this.$5=0;this.$6=0;this.$7=void 0;this.$8=function(){var a=b.$7,c=b.$1;b.$3=0;b.$2=0;b.ts=0;b.$4=0;b.$5=0;b.$6=0;b.$7=void 0;c(a)};this.onOrBefore=function(a,c){h(a);var d=Date.now();d=d+a;var e=b.$5;if(e!==0&&e<d)return;e=b.$6;if(e!==0&&d<e)return;b.$5=d;!b.$3&&(!b.$2||d<b.ts)&&b.$9(d,a,c)};this.forceRunNow=function(a){b.$2&&clearTimeout(b.$2),b.$3&&cancelAnimationFrame(b.$3),b.$7=a,b.$8()};this.cancel=function(){b.$2&&clearTimeout(b.$2),b.$3&&cancelAnimationFrame(b.$3),b.$2=0,b.$3=0,b.ts=0,b.$4=0,b.$5=0,b.$6=0,b.$7=void 0};this.$1=a}var b=a.prototype;b.onOrBeforeRepaint=function(a){if(this.$3)return;var b=Date.now(),c=this.$6;if(c!==0&&b<c)return;c=this.$5;(c===0||b<c)&&(this.$5=b);this.$2&&(clearTimeout(this.$2),this.$2=0);(!this.ts||this.ts>b)&&(this.ts=b);this.$7=a;this.$3=requestAnimationFrame(this.$8)};b.onOrAfter=function(a,b){h(a);var c=Date.now();c=c+a;var d=this.$6;if(d!==0&&c<d)return;d=this.$5;if(d!==0&&d<c)return;this.$6=c;(!this.$2||this.ts<c)&&this.$9(c,a,b)};b.debounce=function(a,b){h(a),this.$10(Date.now(),a,b)};b.debounceAndCap=function(a,b,c){h(a);h(b);var d=Date.now();b=d+b;var e=this.$6,f=this.$5;(e===0||e<=b)&&(f===0||b<f)&&(this.$5=b);this.$10(d,a,c)};b.forceRunNowIfScheduled=function(){this.$2?(clearTimeout(this.$2),this.$8()):this.$3&&(cancelAnimationFrame(this.$3),this.$8())};b.isScheduled=function(){return this.$2!==0||this.$3!==0};b.$10=function(a,b,c){var d=a+b,e=this.$6;if(e!==0&&d<e)return;e=this.ts;var f=this.$5;f!==0&&f<d?e<f&&this.$9(f,f-a,c):e<d&&this.$9(d,b,c)};b.$9=function(a,b,c){this.$3&&(cancelAnimationFrame(this.$3),this.$3=0);this.$7=c;this.ts=a;if(this.$2){c=a-this.$4;if(-16<c&&c<16)return;clearTimeout(this.$2)}this.$2=setTimeout(this.$8,b);this.$4=a};return a}();function h(a){if(!(a>=0))throw c("err")("ShiftTimer must be given delayMs >= 0")}g.ShiftTimer=a}),98);
__d("WAJids",["WAAssertUnreachable","err"],(function(a,b,c,d,e,f,g){"use strict";var h=0,i="@me",j="@system",k="status@broadcast",aa="0@s.whatsapp.net",l="@g.us",m=/^([1-9][0-9]{0,19}|(?!10)[1-9][0-9]{4,19}-[1-9][0-9]{9})@g.us$/,ba="@call",n="@msgr",ca="msgr",o="@interop",da="interop",p=/^([1-9][0-9]{0,2}-[1-9][0-9]{0,14}(:[0])?)@interop$/,q=/^([1-9][0-9]{0,2}-[1-9][0-9]{0,14}(:[0])?)@interop$/,r=/^([1-9][0-9]{0,19}(:[1-9][0-9]{0,2})?)@msgr$/,s=/^([1-9][0-9]{0,19})@msgr$/,t=/^([1-9][0-9]{0,19})(:0)?@msgr$/,ea="@s.whatsapp.net",fa="s.whatsapp.net",u="@s.whatsapp.net",v="s.whatsapp.net",w="lid",x="@newsletter",y=/^([1-9][0-9]{0,19})@newsletter$/,z=/^(0|((?!10)[1-9][0-9]{4,19}(\.[0-9]{1,2})?(:[0-9]{1,2})))@s.whatsapp.net$/,A=/^(0|((?!10)[1-9][0-9]{4,19})(\.[0-9]{1,2})?)@s.whatsapp.net$/,B="@lid",ga="lid",C=/^([1-9][0-9]{0,14})@lid$/,D=/^([1-9][0-9]{0,14}(:[0-9]{1,2})?)@lid$/,ha="@broadcast",E=/^(status|location|[1-9][0-9]{0,19})@broadcast$/,F=/^([0-9a-fA-F]{18,32})@call$/,G="@hosted",H="hosted",I=/^(((?!10)[1-9][0-9]{4,19})):99@hosted$/,J="@hosted.lid",K="hosted.lid",L=/^([1-9][0-9]{0,14}):99@hosted.lid$/,M="@bot",ia=/^[1-9][0-9]{0,19}(:0)?@bot$/,ja="16505361212"+u,ka=/([0-9a-zA-Z-:]+)@(g\.us|call|s\.whatsapp\.net|broadcast|msgr|lid)/g;function a(a){return""+a+u}function b(a){return""+a+B}function N(a){return""+a+n}function d(a){return a.endsWith(l)?a:""+a+l}function e(a){return a.endsWith(x)?a:""+a+x}function f(a){return a.endsWith(G)?a:""+a+G}function la(a){return a.endsWith(J)?a:""+a+J}function ma(){return l}function O(a){if(a.endsWith(u))return a.slice(0,-u.length);else if(a.endsWith(n))return a.slice(0,-n.length);else if(a.endsWith(o))return a.slice(0,-o.length);else if(a.endsWith(B))return a.slice(0,-B.length);else if(a.endsWith(M))return a.slice(0,-M.length);else throw c("err")('userIdFromJid called with non-user jid "'+a+'"')}function na(a,b){return Y(O(a)+":"+b+u)}function oa(a,b){return Z(O(a)+":"+b+n)}function pa(a,b){return yb(P(a)+":"+b+B)}function qa(a,b){return X(O(a)+":"+b+W(a))}function ra(a){return""+a+ha}function sa(a){return a.split("@")[0]}function ta(a){return a.split("@")[0]}function ua(a){a=a.split("@")[0];a=a.split(":");var b=a[0];a=a[1];a=parseInt(a,10);return{userId:b,deviceID:a}}function va(a){a=ua(a);return a.deviceID}function wa(a,b){if(a===i||a===j)return b;else return sa(a)}function xa(a){return a===i||a===j?null:a}function ya(a){if(a===i||a===j)return null;return!a.endsWith(u)?null:a}function za(a){if(!a.endsWith(u))throw c("err")('phoneNumberFromJid called with non-user jid "'+a+'"');return a.slice(0,-u.length)}function Aa(a){if(a.endsWith(u))return za(a);else if(a.endsWith(B))return P(a);throw c("err")('lidOrPhoneFromUserJid called with non phone or lid jid "'+a+'"')}function Ba(a){return a.endsWith(u)||a.endsWith(o)||a.endsWith(n)||a.endsWith(B)?a:null}function Ca(a){return a.endsWith(u)?a:null}function Da(a){return a===k?null:$(a)}function Ea(a){return a===k?null:$(a)}function Fa(a){return a===k?k:null}function P(a){if(!a.endsWith(B))throw c("err")('lidFromLidUserJid called with non-LidUserJid "'+a+'"');return a.slice(0,-B.length)}function Q(a){a=a.split("@");var b=a[0];a=a[1];b=b.split(":")[0];b=b.split(".")[0];a===H&&(a=v);a===K&&(a=w);return zb(b+"@"+a)}function Ga(a){return Q(a)}function Ha(a){return Q(a)}function Ia(a){if(a.jidType==="phoneDevice")return a.deviceJid;else if(a.jidType==="interopDevice")return a.deviceJid;else if(a.jidType==="lidDevice")return a.deviceJid;else if(a.jidType==="msgrDevice")return a.deviceJid;else if(a.jidType==="lidUser")return a.userJid;else if(a.jidType==="interopUser")return a.userJid;else if(a.jidType==="msgrUser")return a.userJid;else if(a.jidType==="phoneUser")return a.userJid;else if(a.jidType==="group")return a.groupJid;else if(a.jidType==="status")return a.statusJid;else if(a.jidType==="call")return a.callJid;else if(a.jidType==="newsletter")return a.newsletterJid;else if(a.jidType==="hosted")return a.hostedDeviceJid;else if(a.jidType==="hostedLid")return a.hostedLidDeviceJid;else if(a.jidType==="bot")return a.userJid;else{a.jidType;return a.broadcastJid}}function Ja(a){return Y(O(a)+":"+h+u)}function Ka(a){return Z(O(a)+":"+h+n)}function La(a){return pa(a,h)}function Ma(a){return va(a)===h}function Na(a){return Db(a)}function Oa(a){return a}function R(a){a=a.split("@");var b=a[0];a=a[1];b=b.split(":");var c=b[0];b=b[1];c=c.split(".");var d=c[0];c=c[1];return{user:d,device:b,agent:c,server:a}}function Pa(a){a=R(a);var b=a.user,c=a.agent;c=c===void 0?"0":c;var d=a.device;d=d===void 0?"0":d;a=a.server;return b+"."+c+":"+d+"@"+a}function Qa(a){switch(a.jidType){case"interopUser":return a.userJid;case"lidUser":return a.userJid;case"msgrUser":return a.userJid;case"phoneUser":return a.userJid;case"group":return a.groupJid;case"status":return a.statusJid;case"interopDevice":return a.deviceJid;case"lidDevice":return a.deviceJid;case"msgrDevice":return a.deviceJid;case"phoneDevice":return a.deviceJid;case"broadcast":return a.broadcastJid;case"call":return a.callJid;case"newsletter":return a.newsletterJid;case"hosted":return a.hostedDeviceJid;case"hostedLid":return a.hostedLidDeviceJid;case"bot":return a.userJid;default:return c("WAAssertUnreachable")(a.jidType)}}function Ra(a){if(a===k)return{jidType:"status",statusJid:k};else if(A.test(a))return{jidType:"phoneUser",userJid:Ab(a)};else if(q.test(a))return{jidType:"interopUser",userJid:Bb(a)};else if(s.test(a))return{jidType:"msgrUser",userJid:Cb(a)};else if(t.test(a)){var b=a.substr(0,a.indexOf(":"));return{jidType:"msgrUser",userJid:N(b)}}else if(z.test(a))return{jidType:"phoneDevice",deviceJid:Y(a)};else if(p.test(a))return{jidType:"interopDevice",deviceJid:xb(a)};else if(r.test(a))return{jidType:"msgrDevice",deviceJid:Z(a)};else if(m.test(a))return{jidType:"group",groupJid:a.endsWith(l)?a:""+a+l};else if(E.test(a))return{jidType:"broadcast",broadcastJid:a};else if(F.test(a))return{jidType:"call",callJid:a};else if(C.test(a))return{jidType:"lidUser",userJid:a};else if(D.test(a))return{jidType:"lidDevice",deviceJid:a};else if(y.test(a))return{jidType:"newsletter",newsletterJid:a};else if(I.test(a))return{jidType:"hosted",hostedDeviceJid:a};else if(L.test(a))return{jidType:"hostedLid",hostedLidDeviceJid:a};else if(ia.test(a))return{jidType:"bot",userJid:a};else return{jidType:"unknown"}}function Sa(a){return a==="status@broadcast"?a:null}function Ta(a){if(A.test(a)||q.test(a)||s.test(a)||C.test(a))return a;else if(t.test(a)){a=a.substr(0,a.indexOf(":"));return N(a)}else return null}function Ua(a){return E.test(a)?a:null}function Va(a){if(z.test(a)||r.test(a)||p.test(a)||D.test(a)||I.test(a)||L.test(a))return a;if(A.test(a))return tb(a);return ia.test(a)?ub(a):null}function Wa(a){return p.test(a)?a:null}function S(a){return m.test(a)?a:null}function Xa(a){return Sa(a)||S(a)||Ua(a)?a:null}function Ya(a){return F.test(a)?a:null}function Za(a){return a==="s.whatsapp.net"||a==="g.us"||a==="call"?a:null}function $a(a){return Ta(a)||S(a)}function ab(a){return y.test(a)?a:null}function bb(a){return I.test(a)?a:null}function cb(a){return L.test(a)?a:null}function db(a){return Ba(a)==null?$(a):null}function eb(a){a=R(a);var b=a.user,c=a.device;c=c===void 0?"0":c;a=a.server;return Y(b+":"+c+"@"+a)}function fb(a){if(a.endsWith(l))return a.slice(0,-l.length);else throw c("err")('groupId called with non-group jid "'+a+'"')}function gb(a){var b=Ra(a);if(b.jidType==="unknown")return a;if(b.jidType==="status")return b.statusJid;b.jidType;return Qa(b).replace(/^([^@]*)([^@][^@][^@][^@])@(.*)$/,"...$2@$3")}function hb(a){return!a.includes("@")?a:a.replace(ka,gb)}function T(a){if(a.endsWith(l))return $(a);else return null}function U(a,b){if(a.endsWith(u))return b.phoneUser(a);else if(a.endsWith(n))return b.msgrUser(a);else if(a.endsWith(o))return b.interopUser(a);else if(a.endsWith(B))return b.lidUser(a);else if(T(a)!=null)return b.group($(a));throw c("err")("Can not switch on chat jid "+a)}function ib(a,b){if(a.endsWith(n))return b.user(a);else if(T(a)!=null)return b.group(a);throw c("err")("Can not switch on chat jid "+a)}function V(a,b){if(a.endsWith(u))return b.user(a);else if(T(a)!=null)return b.group(a);throw c("err")("Can not switch on chat jid "+a)}function jb(a,b){return U(a,{lidUser:function(a){return b.user(a)},interopUser:function(a){return b.user(a)},msgrUser:function(a){return b.user(a)},phoneUser:function(a){return b.user(a)},group:function(a){return b.group(a)}})}function kb(a,b){return a===k?b.status():V(a,{user:b.user,group:b.group})}function lb(a,b){return a===k?b.status():U(a,{interopUser:b.interopUser,phoneUser:b.phoneUser,msgrUser:b.msgrUser,lidUser:b.lidUser,group:b.group})}function mb(a,b){return a===k?b.multicast(k):V(a,{user:b.user,group:b.multicast})}function nb(a){return a.endsWith(B)}function ob(a){return a==="@me"}function pb(a){return a==="@system"}function qb(){return n}function rb(){return u}function sb(){return ea}function W(a){if(a.endsWith(u))return u;else if(a.endsWith(n))return n;else if(a.endsWith(B))return B;else if(a.endsWith(M))return M;else throw c("err")('userDomainFromJid called with non-user jid "'+a+'"')}function tb(a){return X(O(a)+":"+h+W(a))}function ub(a){return X(""+O(a)+W(a))}function vb(a){a=a.platform;var b=a==="msgr"?n:u;function c(a){return""+a+b}function d(){return b}return{toUserJid:c,getUserDomain:d}}function wb(a){return a}function X(a){return a}function Y(a){return a}function Z(a){return a}function xb(a){return a}function yb(a){return a}function zb(a){return a}function Ab(a){return a}function Bb(a){return a}function Cb(a){return a}function $(a){return a}function Db(a){return a}function Eb(a){return a}function Fb(a){return a}function Gb(a){return a}function Hb(a){return U(a,{group:function(a){return fb(a)},lidUser:function(a){return O(a)},interopUser:function(a){return O(a)},phoneUser:function(a){return O(a)},msgrUser:function(a){return O(a)}})}function Ib(){return ba}g.DEFAULT_DEVICE_ID=h;g.AUTHOR_ME=i;g.AUTHOR_SYSTEM=j;g.STATUS_JID=k;g.PSA_JID=aa;g.MSGR_USER_DOMAIN=n;g.MSGR_USER_JID_SUFFIX=ca;g.INTEROP_DOMAIN=o;g.INTEROP_USER_JID_SUFFIX=da;g.WA_SERVER_JID_SUFFIX=fa;g.WA_USER_DOMAIN=u;g.WA_USER_JID_SUFFIX=v;g.WA_LID_SUFFIX=w;g.WA_NEWSLETTER_JID_DOMAIN=x;g.LID_DOMAIN=B;g.LID_SUFFIX=ga;g.HOSTED_DOMAIN=G;g.HOSTED_SUFFIX=H;g.HOSTED_LID_DOMAIN=J;g.HOSTED_LID_SUFFIX=K;g.BOT_DOMAIN=M;g.SURVEY_USER_JID=ja;g.toPhoneUserJid=a;g.toLidUserJid=b;g.toMsgrUserJid=N;g.toGroupJid=d;g.toNewsletterJid=e;g.toHostedDeviceJid=f;g.toHostedLidDeviceJid=la;g.getGroupDomain=ma;g.userIdFromJid=O;g.toPhoneDeviceJid=na;g.toMsgrDeviceJid=oa;g.toLidDeviceJid=pa;g.toDeviceJid=qa;g.toBroadcastJid=ra;g.extractUserId=sa;g.extractChatId__DANGEROUS=ta;g.extractDeviceIDParts=ua;g.extractDeviceId=va;g.authorToUserId=wa;g.authorAsUserJid=xa;g.authorAsPhoneUserJid=ya;g.phoneNumberFromJid=za;g.lidOrPhoneFromUserJid=Aa;g.interpretAsUserJid=Ba;g.interpretAsPhoneUserJid=Ca;g.asChatJid=Da;g.asPhoneChatJid=Ea;g.asStatusJid=Fa;g.lidFromLidUserJid=P;g.extractUserJid=Q;g.extractPhoneUserJid=Ga;g.extractLidUserJid=Ha;g.extractJidFromJidWithType=Ia;g.defaultPhoneDeviceJidForUser=Ja;g.defaultMsgrDeviceJidForUser=Ka;g.defaultLidDeviceJidForLidUserJid=La;g.isPrimaryDevice=Ma;g.interpretAsDeviceId=Na;g.interpretAsNumber=Oa;g.parseJidParts=R;g.fullFormDeviceJidString=Pa;g.extractFromJid=Qa;g.interpretAndValidateJid=Ra;g.validateStatusJid=Sa;g.validateUserJid=Ta;g.validateBroadcastJid=Ua;g.validateDeviceJid=Va;g.validateInteropDeviceJid=Wa;g.validateGroupJid=S;g.validateMulticastJid=Xa;g.validateCallJid=Ya;g.validateDomainJid=Za;g.validateChatJid=$a;g.validateNewsletterJid=ab;g.validateHostedDeviceJid=bb;g.validateHostedLidDeviceJid=cb;g.asMulticastJid=db;g.stripAgentIdFromPhoneDeviceJid=eb;g.groupIdFromJid=fb;g.sanitizeJidForLogging=gb;g.maybeSanitizeLogLineText=hb;g.interpretAsGroupJid=T;g.switchOnChatJidType=U;g.switchOnMsgrChatJidType=ib;g.switchOnPhoneChatJidType=V;g.switchOnUserChatJidType=jb;g.switchOnPhoneJidType=kb;g.switchOnJidType=lb;g.switchOnMulticastJidType=mb;g.isLidUser=nb;g.isAuthorMe=ob;g.isAuthorSystem=pb;g.getMsgrUserDomain=qb;g.getWhatsappUserDomain=rb;g.getServerDomain=sb;g.defaultDeviceJidForUser=tb;g.defaultDeviceJidForBot=ub;g.createJidUtils=vb;g.unsafeCoerceToChatJid=wb;g.unsafeCoerceToDeviceJid=X;g.unsafeCoerceToPhoneDeviceJid=Y;g.unsafeCoerceToMsgrDeviceJid=Z;g.unsafeCoerceToInteropDeviceJid=xb;g.unsafeCoerceToLidDeviceJid=yb;g.unsafeCoerceToUserJid=zb;g.unsafeCoerceToPhoneUserJid=Ab;g.unsafeCoerceToInteropUserJid=Bb;g.unsafeCoerceToMsgrUserJid=Cb;g.unsafeCoerceToGroupJid=$;g.unsafeCoerceToDeviceId=Db;g.unsafeCoerceToNewsletterJid=Eb;g.unsafeCoerceToHostedDeviceJid=Fb;g.unsafeCoerceToHostedLidDeviceJid=Gb;g.threadIdForChatJid=Hb;g.getGroupCallDomain=Ib}),98);
__d("WASmaxInPingsEnums",["WAJids"],(function(a,b,c,d,e,f,g){a={validators:[d("WAJids").validateDomainJid,d("WAJids").validateUserJid],typeName:"DomainJid|UserJid"};g.DOMAINJID_USERJID=a}),98);
__d("WACryptoPrimitives",["tweetnacl"],(function(a,b,c,d,e,f,g){"use strict";b={scalarbase:(a=d("tweetnacl")).lowlevel.scalarbase,crypto_hash:a.lowlevel.crypto_hash,modL:a.lowlevel.modL,pack25519:a.lowlevel.pack25519,S:a.lowlevel.S,M:a.lowlevel.M,A:a.lowlevel.A,Z:a.lowlevel.Z,D:a.lowlevel.D,unpack25519:a.lowlevel.unpack25519,pow2523:a.lowlevel.pow2523,crypto_verify_32:a.lowlevel.crypto_verify_32,set25519:a.lowlevel.set25519,add:a.lowlevel.add,scalarmult:a.lowlevel.scalarmult};g.hash=a.hash;g.scalarMult=a.scalarMult;g.verify=a.verify;g.lowlevel=b;g.keypairFromSecretKey=a.box.keyPair.fromSecretKey;g.keyPair=a.box.keyPair;g.signDetachedVerify=a.sign.detached.verify}),98);
__d("WACryptoUtils",["WACryptoDependencies","WACryptoPrimitives","err"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){return h(new Uint8Array(a),new Uint8Array(b))}function h(a,b){return a.length===0&&b.length===0||d("WACryptoPrimitives").verify(a,b)}function b(a,b){return a.length===0&&b.length===0||d("WACryptoPrimitives").verify(a,b)}function e(a,b){return a.length===0&&b.length===0||d("WACryptoPrimitives").verify(a,b)}function f(a){if(a!==(a|0))throw c("err")("bound must be int32");if(a<=0)throw c("err")("bound must not be positive");var b=new Int32Array(1),e=-1>>>1;e=a*Math.floor(e/a);var f=-1;while(f===-1){d("WACryptoDependencies").getCrypto().getRandomValues(b);var g=b[0]>>>1;g<e&&(f=g%a)}return f}g.arrayBuffersEqual=a;g.uint8ArraysEqual=h;g.rawKeysEqual=b;g.serializedPubKeysEqual=e;g.randomNumberLessThan=f}),98);
__d("WADeepEquals",[],(function(a,b,c,d,e,f){"use strict";function g(a,b){if(a===b)return!0;if(!a||!b||typeof a!=="object"&&typeof b!=="object")return!1;var c=Array.isArray(a),d=Array.isArray(b);if(c!==d)return!1;d=!0;if(c){c=a.length;if(c!==b.length)return!1;for(var e=0;d&&e<c;e++)d=g(a[e],b[e]);return d}c=Object.keys(a);for(e=0;d&&e<c.length;e++){var f=c[e];d=b.propertyIsEnumerable(f)&&g(a[f],b[f])}return d&&Object.keys(b).length===c.length}f.deepEqual=g}),66);
__d("WAHasProperty",[],(function(a,b,c,d,e,f){"use strict";function a(a,b){return Object.prototype.hasOwnProperty.call(a,b)}f["default"]=a}),66);
__d("WAStanzaUtils",[],(function(a,b,c,d,e,f){"use strict";function a(a){return a}f.toStanzaId=a}),66);
__d("WAWapJid",["$InternalEnum","WAJids"],(function(a,b,c,d,e,f,g){"use strict";var h={JID:0,JID_U:1,JID_AD:1,JID_FB:3,JID_INTEROP:4},i=b("$InternalEnum")({WHATSAPP:0,LID:1,HOSTED:128,HOSTED_LID:129});a=function(){function a(a){this.$1=a}a.createAD=function(b,c,d){return new a({type:h.JID_AD,user:b,device:d==null?0:d,agent:c==null?0:c,domainType:i.WHATSAPP})};a.createJidU=function(b,c,d){return new a({type:h.JID_U,user:b,device:d==null?0:d,domainType:c==null?i.WHATSAPP:c})};a.createFbJid=function(b,c){c=c==null?0:c;return new a({type:h.JID_FB,user:b,device:c})};a.createInteropJid=function(b,c,d){c=c==null?0:c;return new a({type:h.JID_INTEROP,user:b,device:c,integrator:d})};a.create=function(b,c){return new a({type:h.JID,user:b,server:c})};var b=a.prototype;b.toString=function(){if(this.$1.type===h.JID_AD||this.$1.type===h.JID_U){var a=this.$1,b=a.user,c=a.device;a=a.domainType;var e;a===i.WHATSAPP?e=d("WAJids").WA_USER_JID_SUFFIX:a===i.HOSTED?e=d("WAJids").HOSTED_SUFFIX:a===i.HOSTED_LID?e=d("WAJids").HOSTED_LID_SUFFIX:e=d("WAJids").LID_SUFFIX;return c===0?b+"@"+e:b+":"+c+"@"+e}else if(this.$1.type===h.JID_FB){a=this.$1;b=a.user;c=a.device;e=d("WAJids").MSGR_USER_JID_SUFFIX;return b+":"+c+"@"+e}else if(this.$1.type===h.JID_INTEROP){a=this.$1;b=a.user;c=a.device;e=a.integrator;a=d("WAJids").INTEROP_USER_JID_SUFFIX;return e+"-"+b+":"+c+"@"+a}else{this.$1.type;e=this.$1;b=e.user;c=e.server;return b!=null?b+"@"+c:c}};b.getInnerJid=function(){return this.$1};return a}();g.WAP_JID_SUBTYPE=h;g.DomainType=i;g.WapJid=a}),98);
__d("WASmaxParseUtils",["WABase64","WABinary","WACryptoUtils","WADeepEquals","WAHasProperty","WAResultOrError","WAStanzaUtils","WAWapJid"],(function(a,b,c,d,e,f,g){"use strict";var h=d("WAResultOrError").makeResult();function a(a,b){return a.tag!==b?H(a,"to be <"+b+">"):h}function i(a,b){return!I(a,b)?H(a,'to have attribute "'+b+'"'):J(a,a.attrs[b])}function j(a,b,c,e){var f=i(a,b);if(!f.success)return f;c=c(f.value);return c!=null?d("WAResultOrError").makeResult(c):H(a,'to have "'+b+'"={'+e+'}, but instead has "'+f.value+'"')}function k(a,b,c){var e=B(a);if(!e.success)return e;b=b(e.value);return b!=null?d("WAResultOrError").makeResult(b):H(a,"to have "+c+' content, but instead has "'+e.value+'"')}function b(a,b,c){var d=i(a,b);if(!d.success)return d;else if(d.value!==c)return H(a,'to have "'+b+'"="'+c+'", but instead has "'+d.value+'"');return h}function e(a,b){return j(a,b,d("WAStanzaUtils").toStanzaId,"stanzaID")}function l(a,b){return j(a,b,K,"integer")}function f(a,b,c,e){var f=l(a,b);if(!f.success)return f;f=f.value;if(c!==void 0&&f<c)return H(a,'to have "'+b+'"={at least '+c+"} but has value "+f);else if(e!==void 0&&f>e)return H(a,'to have "'+b+'"={at most '+e+"} but has value "+f);return d("WAResultOrError").makeResult(f)}function m(a){var b=a.content;return b instanceof Uint8Array?H(a,"to have children"):d("WAResultOrError").makeResult(b)}function n(a,b){var c=m(a);if(!c.success)return c;c=c.value;if(c==null)return h;var e=null;for(var f=0;f<c.length;f++){var g=c[f];if(g.tag===b){if(e!=null)return H(a,"to have 1 child <"+b+">, but found more than 1");e=g}}return d("WAResultOrError").makeResult(e)}function o(a,b,c){a=n(a,b);if(!a.success)return a;return a.value==null?h:c(a.value)}function p(a,b,c){c=o(a,b,c);if(!c.success)return c;c=c.value;return c==null?H(a,"to have 1 child <"+b+">, but found 0"):d("WAResultOrError").makeResult(c)}function q(a,b){var c=n(a,b);if(!c.success)return c;return c.value==null?H(a,"to have 1 child <"+b+">, but found 0"):d("WAResultOrError").makeResult(c.value)}function r(a,b,c,e,f){a=L(a,b,c,e);if(!a.success)return a;b=[];for(c=0;c<a.value.length;c++){e=f(a.value[c]);if(!e.success)return e;b.push(e.value)}return d("WAResultOrError").makeResult(b)}function s(a,b,c,e,f){a=L(a,b,c,e);if(!a.success)return a;b=a.value.length;for(c=0;c<b;c++){e=f(a.value[c]);if(!e.success)return e}return d("WAResultOrError").makeResult(b)}function t(a,b,c){b=r(a,b,0,Infinity,c);if(!b.success)return b;for(c=0;c<b.value.length;c++)if(!d("WADeepEquals").deepEqual(b.value[0],b.value[c]))return H(a,"to have homogeneous children, but found two children that are not equal");return b}function u(a,b,c){a=t(a,b,c);return!a.success?a:d("WAResultOrError").makeResult(a.value.length)}function v(a,b,c,d,e){return I(b,c)?a(b,c,d,e):h}function w(a,b,c,e){if(e==null)return h;a=v(a,b,c);if(!a.success)return a;if(a.value===e)return d("WAResultOrError").makeResult(e);return a.value==null?h:H(b,'to have "'+c+'"={'+e+'}, but instead has "'+a.value+'"')}function x(a,b,c,e){a=a(b,c);if(!a.success)return a;return a.value===e?d("WAResultOrError").makeResult(e):H(b,'to have "'+c+'"={'+e+'}, but instead has "'+a.value+'"')}function y(a,b,c){a=a(b);if(!a.success)return a;return a.value===c?d("WAResultOrError").makeResult(c):H(b,'to have content "'+c+'", but instead has "'+a.value+'"')}function z(a,b,c){var e=i(a,b);if(!e.success)return e;var f=c[e.value];if(f!=null)return d("WAResultOrError").makeResult(f);f=Object.values(c).join("|");return H(a,'to have "'+b+'"={'+f+'}, but instead has "'+e.value+'"')}function A(a,b){var c=B(a);if(!c.success)return c;var e=b[c.value];if(e!=null)return d("WAResultOrError").makeResult(e);e=Object.values(b).join("|");return H(a,'to have content "'+e+'", but instead has "'+c.value+'"')}function B(a){var b=C(a);if(!b.success)return b;else try{b=new(d("WABinary").Binary)(b.value);b=b.readString(b.size());return d("WAResultOrError").makeResult(b)}catch(b){return H(a,"to have string content, but run into decoding error: "+b.message)}}function C(a){var b=a.content;if(b==null)return H(a,"to have content");else if(Array.isArray(b))return H(a,"to have content, but has children instead");else return d("WAResultOrError").makeResult(b)}function D(a,b){var c=C(a);if(!c.success)return c;return d("WACryptoUtils").uint8ArraysEqual(c.value,b)?d("WAResultOrError").makeResult(b):H(a,'to have content ":binary:'+d("WABase64").encodeB64(b)+'", but instead has ":binary:'+d("WABase64").encodeB64(c.value)+'"')}function E(a,b,c){var e=a.content;if(e==null)if(b===void 0||b<1)return d("WAResultOrError").makeResult(new Uint8Array([]));else return H(a,"to have content");else if(Array.isArray(e))return H(a,"to have content, but has children instead");else{var f=e.length;if(b!==void 0&&f<b)return H(a,"to have binary content at least "+b+" bytes but has "+f+" bytes");else if(c!==void 0&&f>c)return H(a,"to have binary content at most "+c+" bytes but has "+f+" bytes");return d("WAResultOrError").makeResult(e)}}function F(a){return k(a,K,"integer")}function G(a){return a}function H(a,b){return d("WAResultOrError").makeError("expected <"+a.tag+">: "+b)}function I(a,b){return c("WAHasProperty")(a.attrs,b)}function J(a,b){if(b instanceof d("WAWapJid").WapJid)return d("WAResultOrError").makeResult(b.toString());return typeof b==="string"?d("WAResultOrError").makeResult(b):H(a,"decodeAsString: attribute is "+typeof b+" not a string: "+String(b))}function K(a){a=parseInt(a,10);return Number.isNaN(a)?null:a}function L(a,b,c,e){var f=m(a);if(!f.success)return f;f=f.value;if(f==null)if(c!==0)return H(a,"to have at least "+c+" <"+b+"> children, but found 0");else return d("WAResultOrError").makeResult([]);var g=[];for(var h=0;h<f.length;h++){var i=f[h];i.tag===b&&g.push(i)}i=g.length;if(i<c)return H(a,"to have at least "+c+" <"+b+"> children, but found "+i);else if(i>e)return H(a,"to have at most "+e+" <"+b+"> children, but found "+i);return d("WAResultOrError").makeResult(g)}var M={};function N(a,b,c){var d=b.map(function(a,b){return a+": "+c[b].error});return H(a,["to match any of following mixins: "+b.join(", ")+", but all mixins failed."].concat(d).join(" "))}g.voidSuccess=h;g.assertTag=a;g.attrString=i;g.attrValidate=j;g.contentValidate=k;g.assertAttr=b;g.attrStanzaId=e;g.attrInt=l;g.attrIntRange=f;g.maybeChildren=m;g.optionalChild=n;g.optionalChildWithTag=o;g.childWithTag=p;g.flattenedChildWithTag=q;g.mapChildrenWithTag=r;g.countChildrenWithTag=s;g.mapHomogeneousChildrenWithTag=t;g.countHomogeneousChildrenWithTag=u;g.optional=v;g.optionalLiteral=w;g.literal=x;g.literalContent=y;g.attrStringEnum=z;g.contentStringEnum=A;g.contentString=B;g.contentBytes=C;g.contentLiteralBytes=D;g.contentBytesRange=E;g.contentInt=F;g.identity=G;g.errorMessage=H;g.emptyObject=M;g.errorMixinDisjunction=N}),98);
__d("WASmaxParseJid",["WAJids","WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){return d("WASmaxParseUtils").attrValidate(a,b,d("WAJids").validateUserJid,"UserJid")}function b(a,b){return d("WASmaxParseUtils").attrValidate(a,b,d("WAJids").validateDeviceJid,"DeviceJid")}function c(a,b){return d("WASmaxParseUtils").attrValidate(a,b,d("WAJids").validateGroupJid,"GroupJid")}function e(a,b){return d("WASmaxParseUtils").attrValidate(a,b,d("WAJids").validateCallJid,"CallJid")}function f(a,b){return d("WASmaxParseUtils").attrValidate(a,b,d("WAJids").validateDomainJid,"DomainJid")}function h(a,b){return d("WASmaxParseUtils").attrValidate(a,b,d("WAJids").validateBroadcastJid,"BroadcastJid")}function i(a,b){return d("WASmaxParseUtils").attrValidate(a,b,d("WAJids").validateStatusJid,"StatusJid")}function j(a,b){return d("WASmaxParseUtils").attrValidate(a,b,d("WAJids").validateNewsletterJid,"NewsletterJid")}function k(a,b,c){var e=d("WASmaxParseUtils").attrString(a,b);if(!e.success)return e;var f=c.validators;c=c.typeName;for(var g=0;g<f.length;g++){var h=f[g](e.value);if(h!=null)return d("WAResultOrError").makeResult(h)}return d("WASmaxParseUtils").errorMessage(a,'to have "'+b+'"={'+c+'}, but instead has "'+e.value+'"')}function l(a,b,c,e){a=a(b,c);if(!a.success)return a;return a.value===e?a:d("WASmaxParseUtils").errorMessage(b,'to have "'+c+'"={'+e+'}, but instead has "'+a.value+'"')}function m(a,b,c,e){a=d("WASmaxParseUtils").optional(a,b,c);if(!a.success)return a;return a.value==null||a.value===e?a:d("WASmaxParseUtils").errorMessage(b,'to have "'+c+'"={'+e+'}, but instead has "'+a.value+'"')}g.attrUserJid=a;g.attrDeviceJid=b;g.attrGroupJid=c;g.attrCallJid=e;g.attrDomainJid=f;g.attrBroadcastJid=h;g.attrStatusJid=i;g.attrNewsletterJid=j;g.attrJidEnum=k;g.literalJid=l;g.optionalLiteralJid=m}),98);
__d("WASmaxParseReference",["WAHasProperty","WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){"use strict";function h(a,b,c,d,e){b=j(b,c);if(!b.success)return l(b);a=a(b.value,c[c.length-1],d,e);return!a.success?l(a):a}function a(a,b,c,e,f){return k(b,c)?h(a,b,c,e,f):d("WASmaxParseUtils").voidSuccess}function i(a,b){return h(d("WASmaxParseUtils").attrString,a,b)}function b(a,b){return k(a,b)?i(a,b):d("WASmaxParseUtils").voidSuccess}function e(a,b){a=j(a,b);if(!a.success)return l(a);b=d("WASmaxParseUtils").contentString(a.value);return!b.success?l(b):b}function j(a,b){var c=b.length;a=a;for(var e=0;e<c-1;e++){var f=b[e];f=d("WASmaxParseUtils").flattenedChildWithTag(a,f);if(!f.success)return f;a=f.value}return d("WAResultOrError").makeResult(a)}function k(a,b){a=j(a,b);return a.success&&c("WAHasProperty")(a.value.attrs,b[b.length-1])}function l(a){return d("WAResultOrError").makeError("in the reference, "+a.error)}g.attrFromReference=h;g.optionalAttrFromReference=a;g.attrStringFromReference=i;g.optionalAttrStringFromReference=b;g.contentStringFromReference=e}),98);
__d("WASmaxInPingsClientResponseServerResponse",["WAResultOrError","WASmaxInPingsEnums","WASmaxParseJid","WASmaxParseReference","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a,b){var c=d("WASmaxParseUtils").assertTag(a,"iq");if(!c.success)return c;c=d("WASmaxParseJid").attrJidEnum(a,"from",d("WASmaxInPingsEnums").DOMAINJID_USERJID);if(!c.success)return c;var e=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"type","result");if(!e.success)return e;b=d("WASmaxParseReference").attrStringFromReference(b,["id"]);if(!b.success)return b;b=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"id",b.value);if(!b.success)return b;b=d("WASmaxParseUtils").attrInt(a,"t");return!b.success?b:d("WAResultOrError").makeResult({from:c.value,type:e.value,t:b.value})}g.parseClientResponseServerResponse=a}),98);
__d("WALongInt",["WAHex","WALogger"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a=babelHelpers.taggedTemplateLiteralLoose(['"','" is over 64 bits']);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(['"','" is not a valid decimal string']);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose([""," is not a safe integer"]);j=function(){return a};return a}function k(a){if(typeof a!=="number"){d("WALogger").LOG(j(),a).color("red");throw new Error("numberOrThrowIfTooLarge is given a non-safe integer")}return a}f=function(a){return a==null?a:k(a)};function a(a){return a==null||typeof a!=="number"?null:a}function b(a,b){if(typeof a==="number"&&typeof b==="number")return a>b;a=typeof a==="number"?d("WAHex").hexLongFromNumber(a):a;b=typeof b==="number"?d("WAHex").hexLongFromNumber(b):b;return d("WAHex").isBiggerHexLong(a,b)}function c(a){if(typeof a==="number")return a.toString(10);var b=d("WAHex").hexLongToHex(a),c=[0],e=0;for(var f=0;f<b.length;f++){e=d("WAHex").hexAt(b,f);for(var g=0;g<c.length;g++)c[g]=c[g]*16+e,e=c[g]/10|0,c[g]%=10;while(e>0)c.push(e%10),e=e/10|0}g=c.reverse().join("");return d("WAHex").hexLongIsNegative(a)?"-"+g:g}function e(a){if(!/^-?\d+$/.test(a)){d("WALogger").LOG(i(),a).color("red");throw new Error("decimalStringToLongInt is given an invalid decimal string")}var b=a[0]==="-",c=a.replace(/^-?0*/,""),e=c.length;if(e<16||e===16&&c<="9007199254740991")return b?-Number(c):Number(c);if(e>20||e===20&&c>"18446744073709551615"||b&&(e>19||e===19&&c>"9223372036854775807")){d("WALogger").LOG(h(),a).color("red");throw new Error("decimalStringToHexLong is given value over 64 bits")}a=0;var f=0;for(var g=0;g<e;g++)a=a*10+Number(c[g]),f=f*10+Math.floor(a/4294967296),a=a%4294967296;return d("WAHex").createHexLongFrom32Bits(f,a,b)}g.numberOrThrowIfTooLarge=k;g.maybeNumberOrThrowIfTooLarge=f;g.maybeNumber=a;g.isBiggerLongInt=b;g.longIntToDecimalString=c;g.decimalStringToLongInt=e}),98);
__d("WATextEncoding",[],(function(a,b,c,d,e,f){"use strict";e=TextEncoder;var g=TextDecoder,h=e,i=g;function a(){return new h()}function b(){return new i()}function c(a){h=a}function d(a){i=a}f.newTextEncoder=a;f.newTextDecoder=b;f.setTextEncoderClass=c;f.setTextDecoderClass=d}),66);
__d("WAWapDict",[],(function(a,b,c,d,e,f){"use strict";a=3;b=["xmlstreamstart","xmlstreamend","s.whatsapp.net","type","participant","from","receipt","id","notification","disappearing_mode","status","jid","broadcast","user","devices","device_hash","to","offline","message","result","class","xmlns","duration","notify","iq","t","ack","g.us","enc","urn:xmpp:whatsapp:push","presence","config_value","picture","verified_name","config_code","key-index-list","contact","mediatype","routing_info","edge_routing","get","read","urn:xmpp:ping","fallback_hostname","0","chatstate","business_hours_config","unavailable","download_buckets","skmsg","verified_level","composing","handshake","device-list","media","text","fallback_ip4","media_conn","device","creation","location","config","item","fallback_ip6","count","w:profile:picture","image","business","2","hostname","call-creator","display_name","relaylatency","platform","abprops","success","msg","offline_preview","prop","key-index","v","day_of_week","pkmsg","version","1","ping","w:p","download","video","set","specific_hours","props","primary","unknown","hash","commerce_experience","last","subscribe","max_buckets","call","profile","member_since_text","close_time","call-id","sticker","mode","participants","value","query","profile_options","open_time","code","list","host","ts","contacts","upload","lid","preview","update","usync","w:stats","delivery","auth_ttl","context","fail","cart_enabled","appdata","category","atn","direct_connection","decrypt-fail","relay_id","mmg-fallback.whatsapp.net","target","available","name","last_id","mmg.whatsapp.net","categories","401","is_new","index","tctoken","ip4","token_id","latency","recipient","edit","ip6","add","thumbnail-document","26","paused","true","identity","stream:error","key","sidelist","background","audio","3","thumbnail-image","biz-cover-photo","cat","gcm","thumbnail-video","error","auth","deny","serial","in","registration","thumbnail-link","remove","00","gif","thumbnail-gif","tag","capability","multicast","item-not-found","description","business_hours","config_expo_key","md-app-state","expiration","fallback","ttl","300","md-msg-hist","device_orientation","out","w:m","open_24h","side_list","token","inactive","01","document","te2","played","encrypt","msgr","hide","direct_path","12","state","not-authorized","url","terminate","signature","status-revoke-delay","02","te","linked_accounts","trusted_contact","timezone","ptt","kyc-id","privacy_token","readreceipts","appointment_only","address","expected_ts","privacy","7","android","interactive","device-identity","enabled","attribute_padding","1080","03","screen_height"];c=["read-self","active","fbns","protocol","reaction","screen_width","heartbeat","deviceid","2:47DEQpj8","uploadfieldstat","voip_settings","retry","priority","longitude","conflict","false","ig_professional","replaced","preaccept","cover_photo","uncompressed","encopt","ppic","04","passive","status-revoke-drop","keygen","540","offer","rate","opus","latitude","w:gp2","ver","4","business_profile","medium","sender","prev_v_id","email","website","invited","sign_credential","05","transport","skey","reason","peer_abtest_bucket","America/Sao_Paulo","appid","refresh","100","06","404","101","104","107","102","109","103","member_add_mode","105","transaction-id","110","106","outgoing","108","111","tokens","followers","ig_handle","self_pid","tue","dec","thu","joinable","peer_pid","mon","features","wed","peer_device_presence","pn","delete","07","fri","audio_duration","admin","connected","delta","rcat","disable","collection","08","480","sat","phash","all","invite","accept","critical_unblock_low","group_update","signed_credential","blinded_credential","eph_setting","net","09","background_location","refresh_id","Asia/Kolkata","privacy_mode_ts","account_sync","voip_payload_type","service_areas","acs_public_key","v_id","0a","fallback_class","relay","actual_actors","metadata","w:biz","5","connected-limit","notice","0b","host_storage","fb_page","subject","privatestats","invis","groupadd","010","note.m4r","uuid","0c","8000","sun","372","1020","stage","1200","720","canonical","fb","011","video_duration","0d","1140","superadmin","012","Opening.m4r","keystore_attestation","dleq_proof","013","timestamp","ab_key","w:sync:app:state","0e","vertical","600","p_v_id","6","likes","014","500","1260","creator","0f","rte","destination","group","group_info","syncd_anti_tampering_fatal_exception_enabled","015","dl_bw","Asia/Jakarta","vp8/h.264","online","1320","fb:multiway","10","timeout","016","nse_retry","urn:xmpp:whatsapp:dirty","017","a_v_id","web_shops_chat_header_button_enabled","nse_call","inactive-upgrade","none","web","groups","2250","mms_hot_content_timespan_in_seconds","contact_blacklist","nse_read","suspended_group_deletion_notification","binary_version","018","https://www.whatsapp.com/otp/copy/","reg_push","shops_hide_catalog_attachment_entrypoint","server_sync",".","ephemeral_messages_allowed_values","019","mms_vcache_aggregation_enabled","iphone","America/Argentina/Buenos_Aires","01a","mms_vcard_autodownload_size_kb","nse_ver","shops_header_dropdown_menu_item","dhash","catalog_status","communities_mvp_new_iqs_serverprop","blocklist","default","11","ephemeral_messages_enabled","01b","original_dimensions","8","mms4_media_retry_notification_encryption_enabled","mms4_server_error_receipt_encryption_enabled","original_image_url","sync","multiway","420","companion_enc_static","shops_profile_drawer_entrypoint","01c","vcard_as_document_size_kb","status_video_max_duration","request_image_url","01d","regular_high","s_t","abt","share_ext_min_preliminary_image_quality","01e","32","syncd_key_rotation_enabled","data_namespace","md_downgrade_read_receipts2","patch","polltype","ephemeral_messages_setting","userrate","15","partial_pjpeg_bw_threshold","played-self","catalog_exists","01f","mute_v2"];d=["reject","dirty","announcement","020","13","9","status_video_max_bitrate","fb:thrift_iq","offline_batch","022","full","ctwa_first_business_reply_logging","h.264","smax_id","group_description_length","https://www.whatsapp.com/otp/code","status_image_max_edge","smb_upsell_business_profile_enabled","021","web_upgrade_to_md_modal","14","023","s_o","smaller_video_thumbs_status_enabled","media_max_autodownload","960","blocking_status","peer_msg","joinable_group_call_client_version","group_call_video_maximization_enabled","return_snapshot","high","America/Mexico_City","entry_point_block_logging_enabled","pop","024","1050","16","1380","one_tap_calling_in_group_chat_size","regular_low","inline_joinable_education_enabled","hq_image_max_edge","locked","America/Bogota","smb_biztools_deeplink_enabled","status_image_quality","1088","025","payments_upi_intent_transaction_limit","voip","w:g2","027","md_pin_chat_enabled","026","multi_scan_pjpeg_download_enabled","shops_product_grid","transaction_id","ctwa_context_enabled","20","fna","hq_image_quality","alt_jpeg_doc_detection_quality","group_call_max_participants","pkey","America/Belem","image_max_kbytes","web_cart_v1_1_order_message_changes_enabled","ctwa_context_enterprise_enabled","urn:xmpp:whatsapp:account","840","Asia/Kuala_Lumpur","max_participants","video_remux_after_repair_enabled","stella_addressbook_restriction_type","660","900","780","context_menu_ios13_enabled","mute-state","ref","payments_request_messages","029","frskmsg","vcard_max_size_kb","sample_buffer_gif_player_enabled","match_last_seen","510","4983","video_max_bitrate","028","w:comms:chat","17","frequently_forwarded_max","groups_privacy_blacklist","Asia/Karachi","02a","web_download_document_thumb_mms_enabled","02b","hist_sync","biz_block_reasons_version","1024","18","web_is_direct_connection_for_plm_transparent","view_once_write","file_max_size","paid_convo_id","online_privacy_setting","video_max_edge","view_once_read","enhanced_storage_management","multi_scan_pjpeg_encoding_enabled","ctwa_context_forward_enabled","video_transcode_downgrade_enable","template_doc_mime_types","hq_image_bw_threshold","30","body","u_aud_limit_sil_restarts_ctrl","other","participating","w:biz:directory","1110","vp8","4018","meta","doc_detection_image_max_edge","image_quality","1170","02c","smb_upsell_chat_banner_enabled","key_expiry_time_second","pid","stella_interop_enabled","19","linked_device_max_count","md_device_sync_enabled","02d","02e","360","enhanced_block_enabled","ephemeral_icon_in_forwarding","paid_convo_status","gif_provider","project_name","server-error","canonical_url_validation_enabled","wallpapers_v2","syncd_clear_chat_delete_chat_enabled","medianotify","02f","shops_required_tos_version","vote","reset_skey_on_id_change","030","image_max_edge","multicast_limit_global","ul_bw","21","25","5000","poll","570","22","031","1280","WhatsApp","032","bloks_shops_enabled","50","upload_host_switching_enabled","web_ctwa_context_compose_enabled","ptt_forwarded_features_enabled","unblocked","partial_pjpeg_enabled","fbid:devices","height","ephemeral_group_query_ts","group_join_permissions","order","033","alt_jpeg_status_quality","migrate","popular-bank","win_uwp_deprecation_killswitch_enabled","web_download_status_thumb_mms_enabled","blocking","url_text","035","web_forwarding_limit_to_groups","1600","val","1000","syncd_msg_date_enabled","bank-ref-id","max_subject","payments_web_enabled","web_upload_document_thumb_mms_enabled","size","request","ephemeral","24","receipt_agg","ptt_remember_play_position","sampling_weight","enc_rekey","mute_always","037","034","23","036","action","click_to_chat_qr_enabled","width","disabled","038","md_blocklist_v2","played_self_enabled","web_buttons_message_enabled","flow_id","clear","450","fbid:thread","bloks_session_state","America/Lima","attachment_picker_refresh","download_host_switching_enabled","1792","u_aud_limit_sil_restarts_test2","custom_urls","device_fanout","optimistic_upload","2000","key_cipher_suite","web_smb_upsell_in_biz_profile_enabled","e","039","siri_post_status_shortcut","pair-device","lg","lc","stream_attribution_url","model","mspjpeg_phash_gen","catalog_send_all","new_multi_vcards_ui","share_biz_vcard_enabled","-","clean","200","md_blocklist_v2_server","03b","03a","web_md_migration_experience","ptt_conversation_waveform","u_aud_limit_sil_restarts_test1"];e=["64","ptt_playback_speed_enabled","web_product_list_message_enabled","paid_convo_ts","27","manufacturer","psp-routing","grp_uii_cleanup","ptt_draft_enabled","03c","business_initiated","web_catalog_products_onoff","web_upload_link_thumb_mms_enabled","03e","mediaretry","35","hfm_string_changes","28","America/Fortaleza","max_keys","md_mhfs_days","streaming_upload_chunk_size","5541","040","03d","2675","03f","...","512","mute","48","041","alt_jpeg_quality","60","042","md_smb_quick_reply","5183","c","1343","40","1230","043","044","mms_cat_v1_forward_hot_override_enabled","user_notice","ptt_waveform_send","047","Asia/Calcutta","250","md_privacy_v2","31","29","128","md_messaging_enabled","046","crypto","690","045","enc_iv","75","failure","ptt_oot_playback","AIzaSyDR5yfaG7OG8sMTUj8kfQEb8T9pN8BM6Lk","w","048","2201","web_large_files_ui","Asia/Makassar","812","status_collapse_muted","1334","257","2HP4dm","049","patches","1290","43cY6T","America/Caracas","web_sticker_maker","campaign","ptt_pausable_enabled","33","42","attestation","biz","04b","query_linked","s","125","04a","810","availability","1411","responsiveness_v2_m1","catalog_not_created","34","America/Santiago","1465","enc_p","04d","status_info","04f","key_version","..","04c","04e","md_group_notification","1598","1215","web_cart_enabled","37","630","1920","2394","-1","vcard","38","elapsed","36","828","peer","pricing_category","1245","invalid","stella_ios_enabled","2687","45","1528","39","u_is_redial_audio_1104_ctrl","1025","1455","58","2524","2603","054","bsp_system_message_enabled","web_pip_redesign","051","verify_apps","1974","1272","1322","1755","052","70","050","1063","1135","1361","80","1096","1828","1851","1251","1921","key_config_id","1254","1566","1252","2525","critical_block","1669","max_available","w:auth:backup:token","product","2530","870","1022","participant_uuid","web_cart_on_off","1255","1432","1867","41","1415","1440","240","1204","1608","1690","1846","1483","1687","1749","69","url_number","053","1325","1040","365","59","Asia/Riyadh","1177","test_recommended","057","1612","43","1061","1518","1635","055","1034","1375","750","1430","event_code","1682","503","55","865","78","1309","1365","44","America/Guayaquil","535","LIMITED","1377","1613","1420","1599","1822","05a","1681","password","1111","1214","1376","1478","47","1082","4282","Europe/Istanbul","1307","46","058","1124","256","rate-overlimit","retail","u_a_socket_err_fix_succ_test","1292","1370","1388","520","861","psa","regular","1181","1766","05b","1183","1213","1304","1537"];var g=["1724","profile_picture","1071","1314","1605","407","990","1710","746","pricing_model","056","059","061","1119","6027","65","877","1607","05d","917","seen","1516","49","470","973","1037","1350","1394","1480","1796","keys","794","1536","1594","2378","1333","1524","1825","116","309","52","808","827","909","495","1660","361","957","google","1357","1565","1967","996","1775","586","736","1052","1670","bank","177","1416","2194","2222","1454","1839","1275","53","997","1629","6028","smba","1378","1410","05c","1849","727","create","1559","536","1106","1310","1944","670","1297","1316","1762","en","1148","1295","1551","1853","1890","1208","1784","7200","05f","178","1283","1332","381","643","1056","1238","2024","2387","179","981","1547","1705","05e","290","903","1069","1285","2436","062","251","560","582","719","56","1700","2321","325","448","613","777","791","51","488","902","Asia/Almaty","is_hidden","1398","1527","1893","1999","2367","2642","237","busy","065","067","233","590","993","1511","54","723","860","363","487","522","605","995","1321","1691","1865","2447","2462","NON_TRANSACTIONAL","433","871","432","1004","1207","2032","2050","2379","2446","279","636","703","904","248","370","691","700","1068","1655","2334","060","063","364","533","534","567","1191","1210","1473","1827","069","701","2531","514","prev_dhash","064","496","790","1046","1139","1505","1521","1108","207","544","637","final","1173","1293","1694","1939","1951","1993","2353","2515","504","601","857","modify","spam_request","p_121_aa_1101_test4","866","1427","1502","1638","1744","2153","068","382","725","1704","1864","1990","2003","Asia/Dubai","508","531","1387","1474","1632","2307","2386","819","2014","066","387","1468","1706","2186","2261","471","728","1147","1372","1961"],h=[c,d,e,g];f.DICT_VERSION=a;f.SINGLE_BYTE_TOKEN=b;f.DICTIONARY_0_TOKEN=c;f.DICTIONARY_1_TOKEN=d;f.DICTIONARY_2_TOKEN=e;f.DICTIONARY_3_TOKEN=g;f.DICTIONARIES=h}),66);
__d("WAXmlFormatter",[],(function(a,b,c,d,e,f){"use strict";function a(a){a=a.replace(/>\s{0,}</g,"><").replace(/</g,"~::~<").replace(/\s*xmlns:/g,"~::~xmlns:").replace(/\s*xmlns=/g,"~::~xmlns=").split("~::~");var b=a.length,c=!1,d=0,e="",f=0,h=["\n"];for(f=0;f<100;f++)h.push(h[f]+"    ");var i=function(b,a){var c=/^<[\w:\-.,]+/.exec(b[a-1]);b=/^<\/[\w:\-.,]+/.exec(b[a]);return c!=null&&b!=null&&c[0]===b[0]};for(f=0;f<b;f++)a[f].search(/<!/)>-1?(e+=h[d]+a[f],c=!0,(a[f].search(/-->/)>-1||a[f].search(/\]>/)>-1||a[f].search(/!DOCTYPE/)>-1)&&(c=!1)):a[f].search(/-->/)>-1||a[f].search(/\]>/)>-1?(e+=a[f],c=!1):i(a,f)?(e+=a[f],c||d--):a[f].search(/<\w/)>-1&&a[f].search(/<\//)===-1&&a[f].search(/\/>/)===-1?(a[f]=g(a[f]),e=c?e+=a[f]:e+=h[d++]+a[f]):a[f].search(/<\w/)>-1&&a[f].search(/<\//)>-1?e=c?e+=a[f]:e+=h[d]+a[f]:a[f].search(/<\//)>-1?e=c?e+=a[f]:e+=h[d===0?d:--d]+a[f]:a[f].search(/\/>/)>-1?e=c?e+=a[f]:e+=h[d]+a[f]:a[f].search(/<\?/)>-1?e+=h[d]+a[f]:a[f].search(/xmlns:/)>-1||a[f].search(/xmlns=/)>-1?e+=h[d]+a[f]:e+=a[f];return e[0]==="\n"?e.slice(1):e}function g(a){var b=a.match(/(<query.*>|<result>)(\{.*\})/);if(b===null)return a;try{var c=b[1];b=JSON.stringify(JSON.parse(b[2]),null,2);return c+"\n"+b}catch(b){return a+"[Error formatting JSON]"}}f["default"]=a}),66);
__d("WAXmlNode",["WAHex"],(function(a,b,c,d,e,f,g){"use strict";var h={};a=function(){function a(a,b,c){b===void 0&&(b=h),c===void 0&&(c=null),this.tag=a,this.attrs=b,this.content=c}var b=a.prototype;b.toString=function(){var a="<"+this.tag;a+=i(this.attrs);var b=this.content;Array.isArray(b)?a+=">"+b.map(String).join("")+"</"+this.tag+">":b instanceof Uint8Array?a+=">"+j(b)+"</"+this.tag+">":b!=null?a+=">"+String(b)+"</"+this.tag+">":a+=" />";return a};return a}();function i(a){var b=Object.keys(a),c="";for(var d=0;d<b.length;d++){var e=b[d];c+=" "+e+'="'+a[e].toString()+'"'}return c}function j(a){var b;a.length===0?b="<!-- empty binary -->":a.length<50?b=d("WAHex").bytesToDebugString(a):b="<!-- "+a.length+" bytes -->";return b}g.XmlNode=a;g.attrsToString=i;g.uint8ArrayToDebugString=j}),98);
__d("WAWap",["WAAssertUnreachable","WABinary","WACryptoDependencies","WAJids","WALogger","WALongInt","WATextEncoding","WAWapDict","WAWapJid","WAXmlFormatter","WAXmlNode","err"],(function(a,b,c,d,e,f,g){"use strict";var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["decodeNullableString got invalid value: ",", string expected"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["decodeString got invalid value: ",", string expected"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["Decoding compressed stanza"]);k=function(){return a};return a}var l=(h=d("WAJids")).MSGR_USER_DOMAIN.replace("@",""),aa=h.WA_USER_DOMAIN.replace("@",""),m=h.LID_DOMAIN.replace("@",""),n=h.INTEROP_DOMAIN.replace("@",""),o=h.HOSTED_DOMAIN.replace("@",""),p=2,ba=128,q=0,r=236,s=237,t=238,u=239,ca=[r,s,t,u],v=245,w=246,x=247,y=248,z=249,A=250,B=251,C=252,D=253,E=254,F=255,da=["0","1","2","3","4","5","6","7","8","9","-",".","\ufffd","\ufffd","\ufffd","\ufffd"],ea=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F"],G="",fa=1,H={sentinel:"DROP_ATTR"},I=(s=d("WAWapJid")).WapJid.create(null,"g.us"),J=s.WapJid.create(null,h.WA_SERVER_JID_SUFFIX);t=s.WapJid.create("status","broadcast");var K=s.WapJid.create(null,"newsletter");h=s.WapJid.create(null,"hosted");var ga=s.WapJid.create(null,"hosted.lid"),L=s.WapJid.create(null,"call"),M={},N=!1;function a(){N=!0}var ha=d("WATextEncoding").newTextEncoder(),O=function(){function a(a,b,c){b===void 0&&(b=M),c===void 0&&(c=null),this.tag=a,this.attrs=b,this.content=c}var b=a.prototype;b.toString=function(){var a="<"+this.tag;a+=d("WAXmlNode").attrsToString(this.attrs);var b=this.content;Array.isArray(b)?a+=">"+b.map(String).join("")+"</"+this.tag+">":b?a+=">"+d("WAXmlNode").uint8ArrayToDebugString(b)+"</"+this.tag+">":a+=" />";N&&(a=c("WAXmlFormatter")(a));return a};return a}();function b(a,b,e){var f=null;if(b&&b.children!=null)throw c("err")('Children should not be passed via props (see eslint check "react/no-children-props")');if(Array.isArray(e))f=e.filter(Boolean);else if(typeof e==="string")f=d("WABinary").Binary.build(e).readByteArray();else if(e instanceof ArrayBuffer)f=new Uint8Array(e);else if(e instanceof Uint8Array)f=e;else{var g=[];for(var h=2;h<arguments.length;h++){var i=arguments[h];i&&g.push(i)}f=g}Array.isArray(f)&&f.length===0&&(f=null);var j={};if(b){var k=b;Object.keys(k).forEach(function(b){if(["__self","__source"].includes(b))return;var d=k[b];if(d==null)throw c("err")("Attr "+b+" in <"+a+"> is null");if(d===H)return;j[b]=d})}return new O(a,j,f)}s=b;function e(a){return a instanceof d("WAWapJid").WapJid?a.toString():a}function P(a){var b=a.content;Array.isArray(b)?b=b.map(P):typeof b==="string"&&(b=d("WABinary").Binary.build(b).readByteArray());return new O(a.tag,a.attrs||M,b)}function f(a){a=a instanceof O?a:P(a);var b=new(d("WABinary").Binary)();Q(a,b);a=0;b=b.readByteArray();var c=new Uint8Array(1+b.length);c[0]=a;c.set(b,1);return c}function Q(a,b){if(a==null)b.writeUint8(q);else if(a instanceof O)R(a,b);else if(a instanceof d("WAWapJid").WapJid)ia(a,b);else if(typeof a==="string")V(a,b);else if(a instanceof Uint8Array)ka(a,b);else{a;b=typeof a;throw c("err")("Invalid payload type "+b)}}function ia(a,b){a=a.getInnerJid();if(a.type===d("WAWapJid").WAP_JID_SUBTYPE.JID_U){var c=a.user,e=a.device,f=a.domainType;b.writeUint8(x);b.writeUint8(f);b.writeUint8(e);Q(c,b)}else if(a.type===d("WAWapJid").WAP_JID_SUBTYPE.JID_FB){f=a.user;e=a.device;b.writeUint8(w);Q(f,b);b.writeUint16(e);Q(l,b)}else if(a.type===d("WAWapJid").WAP_JID_SUBTYPE.JID_INTEROP){c=a.user;f=a.device;e=a.integrator;b.writeUint8(v);Q(c,b);b.writeUint16(f);b.writeUint16(e)}else{c=a.user;f=a.server;b.writeUint8(A);c!=null?Q(c,b):b.writeUint8(q);Q(f,b)}}function R(a,b){if(a.tag===void 0){b.writeUint8(y);b.writeUint8(q);return}var c=1;a.attrs&&(c+=Object.keys(a.attrs).length*2);a.content&&c++;c<256?(b.writeUint8(y),b.writeUint8(c)):c<65536&&(b.writeUint8(z),b.writeUint16(c));Q(a.tag,b);a.attrs&&Object.keys(a.attrs).forEach(function(c){V(c,b),Q(a.attrs[c],b)});c=a.content;if(Array.isArray(c)){c.length<256?(b.writeUint8(y),b.writeUint8(c.length)):c.length<65536&&(b.writeUint8(z),b.writeUint16(c.length));for(var d=0;d<c.length;d++)R(c[d],b)}else c&&Q(c,b)}var S,T;function U(a){var b=new Map();for(var c=0;c<a.length;c++)b.set(a[c],c);return b}function V(a,b){if(a===""){b.writeUint8(C);b.writeUint8(0);return}S==null&&(S=U(d("WAWapDict").SINGLE_BYTE_TOKEN));var c=S.get(a);if(c!=null){b.writeUint8(c+1);return}if(T==null){T=[];for(c=0;c<d("WAWapDict").DICTIONARIES.length;++c)T.push(U(d("WAWapDict").DICTIONARIES[c]))}for(c=0;c<T.length;++c){var e=T[c].get(a);if(e!=null){b.writeUint8(ca[c]);b.writeUint8(e);return}}e=d("WABinary").numUtf8Bytes(a);if(e<128){c=/[^0-9.-]+?/;var f=/[^0-9A-F]+?/;if(!c.exec(a)){ja(a,F,b);return}else if(!f.exec(a)){ja(a,B,b);return}}la(e,b);b.writeString(a)}function ja(a,b,d){var e=a.length%2===1;d.writeUint8(b);var f=Math.ceil(a.length/2);e&&(f|=ba);d.writeUint8(f);e=0;for(f=0;f<a.length;f++){var g=a.charCodeAt(f),h=null;48<=g&&g<=57?h=g-48:b===F?g===45?h=10:g===46&&(h=11):b===B&&(65<=g&&g<=70&&(h=g-55));if(h==null)throw c("err")("Cannot nibble encode "+g);else f%2===0?(e=h<<4,f===a.length-1&&(e|=15,d.writeUint8(e))):(e|=h,d.writeUint8(e))}}function ka(a,b){la(a.length,b),b.writeByteArray(a)}function la(a,b){if(a<256)b.writeUint8(C),b.writeUint8(a);else if(a<1048576)b.writeUint8(D),b.writeUint8(a>>>16&255),b.writeUint8(a>>>8&255),b.writeUint8(a&255);else if(a<4294967296)b.writeUint8(E),b.writeUint32(a);else throw c("err")("Binary with length "+a+" is too big for WAP protocol")}function ma(a,b){a=new(d("WABinary").Binary)(a);var c=a.readUint8();c=c&p;if(c){d("WALogger").LOG(k());return b(a.readByteArray()).then(function(a){return X(new(d("WABinary").Binary)(a))})}return Promise.resolve(X(a))}function na(a){a=new(d("WABinary").Binary)(a);var b=a.readUint8();b=b&p;if(b)throw c("err")("Cannot pass compressed stanza to decodeStanzaDebug");return X(a)}function W(a,b){var e=a.readUint8();if(e===q)return null;if(e===y)return oa(a,a.readUint8());if(e===z)return oa(a,a.readUint16());if(e===C){var f=a.readUint8();return Z(a,f,b)}if(e===D){f=a.readUint8();var g=a.readUint8(),h=a.readUint8();f=((f&15)<<16)+(g<<8)+h;return Z(a,f,b)}if(e===E){g=a.readUint32();return Z(a,g,b)}if(e===A)return qa(a);if(e===w)return ra(a);if(e===v)return sa(a);if(e===x)return ta(a);if(e===F){h=a.readUint8();f=h>>>7;g=h&127;return ua(a,da,f,g)}if(e===B){b=a.readUint8();h=b>>>7;f=b&127;return ua(a,ea,h,f)}if(e<=0||e>=240)throw c("err")("Unable to decode WAP buffer");if(e>=r&&e<=u){g=e-r;b=d("WAWapDict").DICTIONARIES[g];if(b===void 0)throw c("err")("Missing WAP dictionary "+g);h=a.readUint8();f=b[h];if(f===void 0)throw c("err")("Invalid value index "+h+" in dict "+g);return f}a=d("WAWapDict").SINGLE_BYTE_TOKEN[e-1];if(a===void 0)throw c("err")("Undefined token with index "+e);return a}function oa(a,b){var c=[];for(var d=0;d<b;d++)c.push(X(a));return c}function X(a){var b=a.readUint8(),e;if(b===y)e=a.readUint8();else if(b===z)e=a.readUint16();else throw c("err")("Failed to decode node since type byte "+String(b)+" is invalid");b=void 0;var f=null;if(e===0)throw c("err")("Failed to decode node, list cannot be empty");var g=Y(a);e-=1;while(e>1){b||(b={});var h=Y(a),i=W(a,!0);b[h]=i;e-=2}e===1&&(f=W(a,!1),f instanceof d("WAWapJid").WapJid&&(f=String(f)),typeof f==="string"&&(f=ha.encode(f)));return new O(g,b,f)}function Y(a){a=W(a,!0);if(typeof a!=="string"){d("WALogger").DEV(j(),String(a));throw c("err")("WAWap:decodeString got invalid value, string expected")}return a}function pa(a){a=W(a,!0);if(a!=null&&typeof a!=="string"){d("WALogger").DEV(i(),String(a));throw c("err")("WAWap:decodeNullableString got invalid value, string expected")}return a}function qa(a){var b=pa(a);a=Y(a);return d("WAWapJid").WapJid.create(b,a)}function ra(a){var b=Y(a),c=a.readUint16();Y(a);return d("WAWapJid").WapJid.createFbJid(b,c)}function sa(a){var b=Y(a),c=a.readUint16(),e=a.readUint16();Y(a);return d("WAWapJid").WapJid.createInteropJid(b,c,e)}function ta(a){var b=null,e=a.readUint8();if(e===0)b=d("WAWapJid").DomainType.WHATSAPP;else if(e===1)b=d("WAWapJid").DomainType.LID;else if((1&e)===0&&(128&e)!==0)b=d("WAWapJid").DomainType.HOSTED;else if(e===129)b=d("WAWapJid").DomainType.HOSTED_LID;else throw c("err")("decodeJidU - Invalid domain type encoding "+e);e=a.readUint8();a=Y(a);return d("WAWapJid").WapJid.createJidU(a,b,e)}function Z(a,b,c){c===void 0&&(c=!1);if(c)return a.readString(b);else return a.readByteArray(b)}function ua(a,b,c,d){d=new Array(d*2-c);for(var e=0;e<d.length-1;e+=2){var f=a.readUint8();d[e]=b[f>>>4];d[e+1]=b[f&15]}if(c){f=a.readUint8();d[d.length-1]=b[f>>>4]}return d.join("")}function va(){if(!G){var a=new Uint16Array(2);d("WACryptoDependencies").getCrypto().getRandomValues(a);G=String(a[0])+"."+String(a[1])+"-"}return""+G+fa++}function wa(a){switch(a.type){case"group":return a.groupJid;case"status":return d("WAJids").STATUS_JID;case"device":return a.deviceJid;case"newsletter":return a.newsletterJid;case"hosted":return a.hostedDeviceJid;case"hostedLid":return a.hostedLidDeviceJid;default:a.type;return a.broadcastJid}}function xa(a){switch(a.type){case"group":return a.author;case"status":return a.author;case"broadcast":return a.author;default:a.type;return null}}function ya(a){return a.type==="status"||a.type==="group"||a.type==="broadcast"?$(a.author):H}function za(a){return $(wa(a))}function $(a){var b=d("WAJids").validateDomainJid(a);if(b!=null)return Aa(b);b=a.split("@");a=b[0];b=b[1];var e=null;if((b===aa||b===l||b===n||b===m||b===o||b===d("WAJids").HOSTED_LID_SUFFIX)&&a.indexOf(":")!==-1){var f=a.split(":");a=f[0];f=f[1];e=parseInt(f,10)}if(b===n){f=a.split("-");var g=f[0];f=f[1];return d("WAWapJid").WapJid.createInteropJid(f,e,parseInt(g,10))}else if(b===l)return d("WAWapJid").WapJid.createFbJid(a,e);f=null;if(b===m)f=d("WAWapJid").DomainType.LID;else if(b===o){if(e!==99)throw c("err")("wid unexpected deviceId");f=d("WAWapJid").DomainType.HOSTED}else if(b===d("WAJids").HOSTED_LID_SUFFIX){if(e!==99)throw c("err")("lid invalid deviceId");f=d("WAWapJid").DomainType.HOSTED_LID}else f=d("WAWapJid").DomainType.WHATSAPP;return e!=null&&e!==0?d("WAWapJid").WapJid.createJidU(a,f,e):d("WAWapJid").WapJid.create(a,b)}function Aa(a){if(a==="s.whatsapp.net")return J;else if(a==="g.us")return I;else if(a==="newsletter")return K;else if(a==="call")return L;else return c("WAAssertUnreachable")(a)}function Ba(a){return $(a)}function Ca(a){return $(a)}function Da(a){return $(a)}function Ea(a){return $(a)}function Fa(a){return $(a)}function Ga(a){return $(a)}function Ha(a){if(a.jidType==="phoneDevice")return $(a.deviceJid);else if(a.jidType==="msgrDevice")return $(a.deviceJid);else if(a.jidType==="lidDevice")return $(a.deviceJid);else if(a.jidType==="phoneUser")return $(a.userJid);else if(a.jidType==="msgrUser")return $(a.userJid);else if(a.jidType==="lidUser")return $(a.userJid);else if(a.jidType==="group")return $(a.groupJid);else if(a.jidType==="status")return $(a.statusJid);else if(a.jidType==="call")return $(a.callJid);else if(a.jidType==="interopDevice")return $(a.deviceJid);else if(a.jidType==="interopUser")return $(a.userJid);else if(a.jidType==="newsletter")return $(a.newsletterJid);else if(a.jidType==="hosted")return $(a.hostedDeviceJid);else if(a.jidType==="hostedLid")return $(a.hostedLidDeviceJid);else if(a.jidType==="bot")return $(a.userJid);else{a.jidType;return $(a.broadcastJid)}}function Ia(a){return a}function Ja(a){return a.toString()}function Ka(a){return a}function La(a){return a==null?H:a}function Ma(a){return a.toString()}function Na(a){return d("WALongInt").longIntToDecimalString(a)}function Oa(a,b){b===void 0&&(b=4);a=a;var c=new Uint8Array(b);for(b=b-1;b>=0;b--)c[b]=a&255,a>>>=8;return c}g.DROP_ATTR=H;g.G_US=I;g.S_WHATSAPP_NET=J;g.STATUS_BROADCAST=t;g.NEWSLETTER=K;g.HOSTED=h;g.HOSTED_LID=ga;g.CALL=L;g.enableXMLFormat=a;g.WapNode=O;g.makeWapNode=b;g.wap=s;g.decodeAsString=e;g.makeStanza=P;g.encodeStanza=f;g.decodeStanza=ma;g.decodeStanzaDebug=na;g.generateId=va;g.extractToJid=wa;g.extractParticipantJid=xa;g.PARTICIPANT_JID=ya;g.TO_JID=za;g.JID=$;g.DOMAIN_JID=Aa;g.USER_JID=Ba;g.DEVICE_JID=Ca;g.GROUP_JID=Da;g.BROADCAST_JID=Ea;g.CALL_JID=Fa;g.NEWSLETTER_JID=Ga;g.TO_WAP_JID=Ha;g.STANZA_ID=Ia;g.SMAX_ID=Ja;g.CUSTOM_STRING=Ka;g.MAYBE_CUSTOM_STRING=La;g.INT=Ma;g.LONG_INT=Na;g.BIG_ENDIAN_CONTENT=Oa}),98);
__d("WASmaxJsx",["WAWap"],(function(a,b,c,d,e,f,g){"use strict";g.smax=d("WAWap").wap}),98);
__d("WASmaxMixins",["WAArrayBufferUtils","WAWapJid"],(function(a,b,c,d,e,f,g){"use strict";var h="smax$any";function i(a,b){j(a,b);k(a,b);b.content instanceof Uint8Array?m(a,b.content):b.content!=null&&n(a,b.content);return a}function a(a,b,c,d){return c!=null?a(b,c,d):b}function j(a,b){a=a.tag;b=b.tag;if(b===h)return;if(a!==b)throw new Error("tag mismatch: "+a+" != "+b)}function k(a,b){var c=a.attrs,d=b.attrs;Object.keys(d).forEach(function(a){var b=d[a],e=c[a];if(b!=null&&e!=null){if(l(b,e))return;throw new Error("conflict for key: "+a)}c[a]=b})}function l(a,b){if(typeof a==="string"&&typeof b==="string")return a===b;return a instanceof d("WAWapJid").WapJid&&b instanceof d("WAWapJid").WapJid?a.toString()===b.toString():!1}function m(a,b){var c=a.content;if(c instanceof Uint8Array){if(!d("WAArrayBufferUtils").uint8ArraysEqualUNSAFE(c,b))throw new Error("elementValue mismatch: bytes dose not equal");return}if(c!=null)throw new Error("elementValue mismatch: destination has children");a.content=b}function n(a,b){var c=a.content;if(c instanceof Uint8Array)throw new Error("children mismatch: destination has element value");if(c==null||c.length===0){a.content=b;return}if(!o(c,b))throw new Error("children mismatch: child counts are not compatible");var d=[],e=Array.from(c);b.forEach(function(a){var b=e.findIndex(function(b){return b.tag===a.tag});if(b===-1)d.push(a);else{b=e.splice(b,1);b=i(b[0],a);d.push(b)}});e.forEach(function(a){return d.push(a)});a.content=d}function o(a,b){b=p(b);a=p(a);var c=Object.keys(b);for(var d=0;d<c.length;d++){var e=c[d],f=b[e];e=a[e];if(f!=null&&e!=null&&f!==e)return!1}return!0}function p(a){return a.reduce(function(a,b){b=b.tag;var c=a[b];a[b]=c==null?1:c+1;return a},{})}g.mergeStanzas=i;g.optionalMerge=a}),98);
__d("WASmaxOutPingsClientWellFormedToMixin",["WASmaxJsx","WASmaxMixins","WAWap"],(function(a,b,c,d,e,f,g){function h(){var a=d("WASmaxJsx").smax("iq",{to:d("WAWap").S_WHATSAPP_NET});return a}function a(a){var b=h();return d("WASmaxMixins").mergeStanzas(a,b)}g.mergeClientWellFormedToMixin=a}),98);
__d("WASmaxOutPingsClientRequest",["WASmaxJsx","WASmaxOutPingsClientWellFormedToMixin","WAWap"],(function(a,b,c,d,e,f,g){function a(){var a=d("WASmaxOutPingsClientWellFormedToMixin").mergeClientWellFormedToMixin(d("WASmaxJsx").smax("iq",{id:d("WAWap").generateId(),type:"get",xmlns:"w:p"}));return a}g.makeClientRequest=a}),98);
__d("WATimeUtils",["Promise","WAHex"],(function(a,b,c,d,e,f,g){"use strict";var h,i=60,j=5*i,k=60*i,l=24*k,m=7*l,n=365*l,o=60*1e3,p=k*1e3,q=24*p,r=7*q,s=1<<31,t=~s,u=s+1,v={time:0,day:-4},w=0;function a(){return w}function c(a){w=a}function e(a){return W(a).toUTCString()}function x(a){a=a|0;return Math.max(u,Math.min(a,t))}function y(a){return x(a/1e3)}function f(a){if(typeof a!=="number")if(d("WAHex").hexLongIsNegative(a))return u;else return t;else return x(a)}function z(a){if(typeof a!=="number")if(d("WAHex").hexLongIsNegative(a))return u;else return t;else return C(a)}function A(a){return a==null?a:a>t?y(a):x(a)}function B(){return C(Z()-w*1e3)}function C(a){return a}function D(a){return a}function E(a){return C(a*1e3)}function F(a,b){var c=K();a=Math.max(a+b-c,0);return Math.min(1e3*a,~(1<<31))}function G(a,b){b=b!=null?b:K();return x(Math.ceil(b+Math.max(a,0)))}function H(a,b){b=b!=null?b:K();return x(Math.ceil(b-Math.max(a,0)))}function I(a){a=Math.max(a-K(),0);return Math.min(1e3*a,~(1<<31))}function J(a){var c=I(a);return new(h||(h=b("Promise")))(function(a){return void setTimeout(a,c)})}function K(){return x(Date.now()/1e3-w)}function L(){return x(Date.now()/1e3)}function M(){return x(new Date().setHours(0,0,0,0)/1e3-w)}function N(){return Date.now()-w*1e3}function O(a){return Math.max(a-K(),0)}function P(a){return O(a)>0}function Q(){return performance.now()}function R(a){return Math.floor(performance.now()-a)}function S(a,b){return a<b?a:b}var T=function(){function a(){var a=Q();this.$1=a;this.$2=a}var b=a.prototype;b.reset=function(){this.$2=Q()};b.elapsed=function(){return R(this.$2)};b.cumulative=function(){return R(this.$1)};return a}();function U(a,b,c){return Math.abs(a-b)<=c}function V(a,b){return U(K(),a,b)}function W(a){return new Date(a*1e3)}function X(a,b){if(Math.abs(a-b)>l)return!1;a=v.time===a?v.day:W(a+w).getDay();var c=v.time===b?v.day:W(b+w).getDay();v.time=b;v.day=c;return a===c}function Y(a){a=Number.parseInt(a,16);return Number.isFinite(a)?new Date(x(a)*1e3):null}function Z(){return Date.now()}function $(a){a=new Date(a);return isNaN(a)?null:y(a.getTime())}function aa(a,b){a=Math.abs(a-b);return Math.ceil(a/q)}g.MINUTE_SECONDS=i;g.FIVE_MINUTES=j;g.HOUR_SECONDS=k;g.DAY_SECONDS=l;g.WEEK_SECONDS=m;g.YEAR_SECONDS=n;g.MINUTE_MILLISECONDS=o;g.HOUR_MILLISECONDS=p;g.DAY_MILLISECONDS=q;g.WEEK_MILLISECONDS=r;g.DEFAULT_UNIXTIME=s;g.MAX_INT=t;g.getClockSkew=a;g.setClockSkew=c;g.toHttpHeaderDate=e;g.castToUnixTime=x;g.castMilliSecondsToUnixTime=y;g.castLongIntToUnixTime=f;g.castLongIntToMillisTime=z;g.castMillisTimeToUnixTime=A;g.millisTime=B;g.castToMillisTime=C;g.fromMillisTime=D;g.castUnixTimeToMillisTime=E;g.timeoutFor=F;g.futureUnixTime=G;g.pastUnixTime=H;g.cappedMillisecondsUntil=I;g.delayUntil=J;g.unixTime=K;g.unixTimeWithoutClockSkewCorrection=L;g.midnight=M;g.unixTimeMs=N;g.secondsUntil=O;g.isInFuture=P;g.monotonicTime=Q;g.monotonicTimeSince=R;g.oldest=S;g.MonotonicTimer=T;g.happenedWithinAt=U;g.happenedWithin=V;g.toDate=W;g.sameDay=X;g.convertHexToDate=Y;g.performanceAbsoluteNow=Z;g.convertISO8601DateFormatToUnixTime=$;g.daysDiff=aa}),98);
__d("WAComms",["Promise","WAArrayUtils","WAErrors","WALogger","WANotifyConnectionChangeFactory","WAPromiseRetryLoop","WAResolvable","WAResultOrError","WAShiftTimer","WASmaxInPingsClientResponseServerResponse","WASmaxOutPingsClientRequest","WASmaxParseUtils","WATimeUtils","WAWap","err","regeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["Comms has no open socket"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["[comms] closeSocket called"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["[comms] Socket "," closed"]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["[comms] socketLoopIteration failed ",""]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["[comms] socketLoopIteration socket closed while in noise handshake"]);m=function(){return a};return a}function n(){var a=babelHelpers.taggedTemplateLiteralLoose(["[comms] socketLoopIteration socket disconnected while in noise handshake"]);n=function(){return a};return a}function o(){var a=babelHelpers.taggedTemplateLiteralLoose(["[comms] socketLoopIteration socket closed while in noise handshake using treasureHunt strategy"]);o=function(){return a};return a}function p(){var a=babelHelpers.taggedTemplateLiteralLoose(["[comms] Socket "," closed"]);p=function(){return a};return a}function q(){var a=babelHelpers.taggedTemplateLiteralLoose(["[comms] Socket "," opened"]);q=function(){return a};return a}function r(){var a=babelHelpers.taggedTemplateLiteralLoose(["[comms] Socket "," opening"]);r=function(){return a};return a}function s(){var a=babelHelpers.taggedTemplateLiteralLoose(["[comms] maybeResetSocketLoop"]);s=function(){return a};return a}function t(){var a=babelHelpers.taggedTemplateLiteralLoose(["[comms] closeSocketAndPreventRetry called"]);t=function(){return a};return a}function u(){var a=babelHelpers.taggedTemplateLiteralLoose(["handleAck: unrecognized ",""]);u=function(){return a};return a}function v(){var a=babelHelpers.taggedTemplateLiteralLoose(["[comms] job response is CLOSE_SOCKET"]);v=function(){return a};return a}function w(){var a=babelHelpers.taggedTemplateLiteralLoose(["--- Receiving ---\n",""],["--- Receiving ---\\n",""]);w=function(){return a};return a}function x(){var a=babelHelpers.taggedTemplateLiteralLoose(["Failure parsing stanza!"]);x=function(){return a};return a}function y(){var a=babelHelpers.taggedTemplateLiteralLoose(["Comms.startHandlingRequests"]);y=function(){return a};return a}function z(){var a=babelHelpers.taggedTemplateLiteralLoose(["castStanza error ",""]);z=function(){return a};return a}function A(){var a=babelHelpers.taggedTemplateLiteralLoose(["castStanza async error ",""]);A=function(){return a};return a}function B(){var a=babelHelpers.taggedTemplateLiteralLoose(["--- Sending ---\n",""],["--- Sending ---\\n",""]);B=function(){return a};return a}function C(){var a=babelHelpers.taggedTemplateLiteralLoose(["Error in onBeforeCastStanza, we consumed and continue with normal stanza sending to the server:\n",""],["Error in onBeforeCastStanza, we consumed and continue with normal stanza sending to the server:\\n",""]);C=function(){return a};return a}function D(){var a=babelHelpers.taggedTemplateLiteralLoose(["Dropping stanza since onBeforeCastStanza matched. We return mock response directly."]);D=function(){return a};return a}function E(){var a=babelHelpers.taggedTemplateLiteralLoose(["--- Receive (via SMAX+E2E) ---\n",""],["--- Receive (via SMAX+E2E) ---\\n",""]);E=function(){return a};return a}function F(){var a=babelHelpers.taggedTemplateLiteralLoose(["Dropping stanza since onBeforeCastStanza matched:\n",". We return mock response directly."],["Dropping stanza since onBeforeCastStanza matched:\\n",". We return mock response directly."]);F=function(){return a};return a}function G(){var a=babelHelpers.taggedTemplateLiteralLoose(["Comms has no open socket, will resend stanza when socket opens"]);G=function(){return a};return a}function H(){var a=babelHelpers.taggedTemplateLiteralLoose(["[comms] No stanzaId in ping request stanza"]);H=function(){return a};return a}function I(){var a=babelHelpers.taggedTemplateLiteralLoose(["[comms] sendPing ping still pending"]);I=function(){return a};return a}function J(){var a=babelHelpers.taggedTemplateLiteralLoose(["[comms] sendPing when socket dead"]);J=function(){return a};return a}function K(){var a=babelHelpers.taggedTemplateLiteralLoose(["[comms] Socket "," expired"]);K=function(){return a};return a}function L(){var a=babelHelpers.taggedTemplateLiteralLoose(["handleIq no handler for iq"]);L=function(){return a};return a}function M(){var a=babelHelpers.taggedTemplateLiteralLoose(["handleIq no handler for iq with id ",""]);M=function(){return a};return a}var N=null,O=null,P=1,Q=0,R=function(){function a(a,c,e){var f=this;this.nextSocketId=1;this.pendingIqs=new Map();this.ackHandlers=[];this.pendingSmaxStanzas=new Map();this.$2=new(d("WAResolvable").Resolvable)();this.socketAbortController=null;this.activePing=null;this.$3=new Set();this.socketId=Q;this.socket=null;this.softCloseSocket=null;this.handleStanza=function(a,b,c){var e=d("WASmaxParseUtils").attrString(a,"id");if(e.success&&a.tag!=="receipt"){e=e.value;var g=f.pendingSmaxStanzas.get(e);if(g){f.pendingSmaxStanzas["delete"](e);g.resolve(a);f.maybeScheduleHealthCheck();return"NO_ACK"}}e=$(a);if(e!=null){g=f.pendingIqs.get(e);g?(f.pendingIqs["delete"](e),g.resolve(a),f.maybeScheduleHealthCheck()):(d("WALogger").WARN(M(),e),d("WALogger").ERROR(L()))}else if(a.tag==="ack")f.handleAck(a);else return a.tag==="failure"&&f.config.shouldBlockReceivingUntilSuccess?f.$1(a,b,c):f.$2.promise.then(function(){return f.$1(a,b,c)});return"NO_ACK"};this.healthCheckTimer=new(d("WAShiftTimer").ShiftTimer)(function(){if(!f.socketId)return;f.sendPing()});this.deadSocketTimer=new(d("WAShiftTimer").ShiftTimer)(function(a){if(a!==f.socketId)return;d("WALogger").LOG(K(),a);f.softCloseSocket&&f.softCloseSocket()});this.sendPing=function(){var a,c,e,f,g,i,j,k;return b("regeneratorRuntime").async(function(l){while(1)switch(l.prev=l.next){case 0:a=Z("sendPing");if(a.socketId){l.next=4;break}d("WALogger").LOG(J());return l.abrupt("return",(h||(h=b("Promise"))).resolve());case 4:if(!(a.activePing&&a.activePing.socketId===a.socketId)){l.next=7;break}d("WALogger").LOG(I());return l.abrupt("return",(h||(h=b("Promise"))).resolve());case 7:a.activePing&&a.activePing.handler.resolve();c=d("WASmaxOutPingsClientRequest").makeClientRequest();e=c.attrs.id;if(!(typeof e!=="string")){l.next=13;break}d("WALogger").ERROR(H());return l.abrupt("return",(h||(h=b("Promise"))).resolve());case 13:f=new(d("WAResolvable").Resolvable)();a.activePing={socketId:a.socketId,stanzaId:e,handler:f};a.callStanza(c);l.next=18;return b("regeneratorRuntime").awrap(f.promise);case 18:g=l.sent,g&&(i=d("WASmaxInPingsClientResponseServerResponse").parseClientResponseServerResponse(g,c),i.success&&(j=d("WATimeUtils").castToUnixTime(i.value.t),k=Math.round(Date.now()/1e3-j),a.config.handlers.onClockSkewUpdate==null?void 0:a.config.handlers.onClockSkewUpdate(k)));case 20:case"end":return l.stop()}},null,this)};this.$1=a;this.onConnectionChange=d("WANotifyConnectionChangeFactory").notifyConnectionChangeFactory((a=c.handlers.onConnectionChange)!=null?a:function(){},(a=c.handlers.onOptimisticConnectionChange)!=null?a:function(){});this.gzipInflate=e;this.config=c;this.socketLoop=new(d("WAPromiseRetryLoop").PromiseRetryLoop)({name:"MainSocketLoop",code:W,timer:(a=c.socketReconnectBackoffAlgo)!=null?a:{jitter:.1,max:c.maxSocketLoopWaitTime,algo:{type:"fibonacci",first:1e4,second:1e4},relativeDelay:!0},resetDelay:3e4})}var e=a.prototype;e.filterPending=function(a){var b=[];function c(c){a(c)&&b.push(c)}this.pendingIqs.forEach(c);this.ackHandlers.forEach(c);this.pendingSmaxStanzas.forEach(c);return b};e.sendPendingStanza=function(a){a.cleanup==null?void 0:a.cleanup(),a.cleanup=void 0,this.callStanza(a.stanza)};e.maybeSendPendingStanza=function(a){if(a.attempt>=this.config.maxRetries)this.config.handlers.onDropStanza==null?void 0:this.config.handlers.onDropStanza(a),a.cleanup==null?void 0:a.cleanup(),a.cleanup=void 0,this.removeHandler(a,"max-retries");else if(this.socket){a.attempt+=1;this.sendPendingStanza(a);return}else d("WALogger").LOG(G())};e.callStanzaAsync=function(a,c){var d;return b("regeneratorRuntime").async(function(e){while(1)switch(e.prev=e.next){case 0:e.next=2;return b("regeneratorRuntime").awrap(this.callStanza(a,c));case 2:d=e.sent;return e.abrupt("return",d);case 4:case"end":return e.stop()}},null,this)};e.callStanza=function(a,b){a=this.castStanza(a,b);this.deadSocketTimer.onOrBefore(this.config.deadSocketTime,this.socketId);this.healthCheckTimer.cancel();return a};e.castStanzaAsync=function(a){var c;return b("regeneratorRuntime").async(function(d){while(1)switch(d.prev=d.next){case 0:d.next=2;return b("regeneratorRuntime").awrap(this.castStanza(a));case 2:c=d.sent;return d.abrupt("return",c);case 4:case"end":return d.stop()}},null,this)};e.castStanza=function(a,c){var e=this;try{var f=this.config.handlers.onBeforeCastStanzaForE2E==null?void 0:this.config.handlers.onBeforeCastStanzaForE2E(a,c);if(f!=null){d("WALogger").DEV_XMPP(F(),a);d("WALogger").DEV_XMPP(E(),f);d("WALogger").ERROR(D());if(Array.isArray(f))return(h||(h=b("Promise"))).all(f.map(function(a){return(h||(h=b("Promise"))).resolve(e.handleStanza(a,e.socketId,Q))}));else{this.handleStanza(f,this.socketId,Q);return(h||(h=b("Promise"))).resolve()}}}catch(a){d("WALogger").DEV_XMPP(C(),a)}f=this.socketOrThrow("castStanza");try{d("WALogger").DEV_XMPP(B(),a);return f.sendFrame(d("WAWap").encodeStanza(a)).then(function(){e.config.handlers.onCastStanza==null?void 0:e.config.handlers.onCastStanza(a,c)})["catch"](function(a){d("WALogger").ERROR(A(),a).devConsole(a);if(a instanceof d("WAErrors").BufferTooLargeError)return(h||(h=b("Promise"))).reject(a)})}catch(a){d("WALogger").ERROR(z(),a).devConsole(a)}return(h||(h=b("Promise"))).resolve()};e.socketOrThrow=function(a){var b=this.socket;if(b)return b;throw c("err")("Comms."+a+" called while no socket")};e.startHandlingRequests=function(){d("WALogger").LOG(y());this.$2.resolve();return this.$2.promise.then(function(){})};e.parseAndHandleStanza=function(a,b){var c=this;a===this.socketId&&(this.deadSocketTimer.cancel(),O&&(O.resolve(),O=null));var e=d("WAWap").decodeStanza(b,this.gzipInflate)["catch"](function(a){d("WALogger").ERROR(x()).devConsole(b);throw a}).then(function(e){d("WALogger").DEV_XMPP(w(),e);c.config.handlers.onHandleStanza==null?void 0:c.config.handlers.onHandleStanza(e,a,b.byteLength);var f=c.activePing;if(f&&f.socketId===a&&f.stanzaId===$(e)){c.activePing=null;f.handler.resolve(e);c.maybeScheduleHealthCheck();return"NO_ACK"}return c.handleStanza(e,a,b.byteLength)}).then(function(b){if(a!==c.socketId)return;if(b==="CLOSE_SOCKET"){d("WALogger").LOG(v());var e=c.socket;e&&e.close()}else b==="NO_ACK"||c.castStanza(b);return"NO_ACK"});this.$3.add(e);e["finally"](function(){return void c.$3["delete"](e)})};e.handleAck=function(a){var b=this.ackHandlers,c=-1,e=null;while(!e&&++c<b.length)e=b[c].parseAndTest(a);if(e){var f=b[c];d("WAArrayUtils").removeIndexWithoutPreservingOrder(b,c);this.config.handlers.onHandleAck==null?void 0:this.config.handlers.onHandleAck(a);f.resolve(e);this.maybeScheduleHealthCheck()}else d("WALogger").WARN(u(),a)};e.removeHandler=function(a,c){c===void 0&&(c="disconnect");if(a.type==="iq"||a.type==="smax"){var e=a.stanza.attrs.id;if(!e||typeof e!=="string")return;if(a.type==="iq"&&!this.pendingIqs["delete"](e)||a.type==="smax"&&!this.pendingSmaxStanzas["delete"](e))return}else{a.type;e=this.ackHandlers.indexOf(a);if(e===-1)return;d("WAArrayUtils").removeIndexWithoutPreservingOrder(this.ackHandlers,e)}c==="disconnect"?a.resolve((h||(h=b("Promise"))).reject(new(d("WAErrors").Disconnected)())):c==="abort"?a.resolve((h||(h=b("Promise"))).reject(new(d("WAErrors").Aborted)())):a.resolve((h||(h=b("Promise"))).reject(new(d("WAErrors").MaxRetries)()))};e.maybeScheduleHealthCheck=function(){if(this.healthCheckTimer.isScheduled())return;if(this.activePing||this.ackHandlers.length||this.pendingIqs.size||this.pendingSmaxStanzas.size)return;var a=this.config.healthCheckInterval;a=Math.ceil(a*1e3*(1+Math.random()));this.healthCheckTimer.onOrBefore(a)};return a}();function a(){return N}function e(a,b,c,d){d===void 0&&(d=!0);if(N)return;N=new R(a,b,c);d&&setTimeout(T,0)}function f(){var a=Z("stopComms");a.socketLoop.endWithValue();a.socket&&X();N=null}function S(){var a=Z("closeSocketAndPreventRetry");a.socketLoop.endWithValue();a.socket&&(d("WALogger").LOG(t()),X())}function T(){Z("openSocketLoop").socketLoop.start()}function U(){d("WALogger").LOG(s()),V()||Z("maybeResetSocketLoop").socketLoop.reset()}function aa(){Z("forceResetSocketLoop").socketLoop.reset()}function ba(){var a,b=Z("socketAbortController");(a=b.socketAbortController)==null?void 0:a.abort();b.softCloseSocket==null?void 0:b.softCloseSocket()}function V(){var a;return!!((a=N)==null?void 0:a.socket)}function W(){var a=Z("socketLoopIteration"),b=a.nextSocketId++;d("WALogger").LOG(r(),b);var c=function(){a.onConnectionChange("in_handshake")};a.config.handlers.onSocketLoopIteration==null?void 0:a.config.handlers.onSocketLoopIteration(a.socketAbortController);typeof AbortController==="function"&&(a.socketAbortController=new AbortController());return a.config.openChatSocket(c,(c=a.socketAbortController)==null?void 0:c.signal).then(d("WAResultOrError").onResult(function(c){a.config.handlers.onSocketOpen==null?void 0:a.config.handlers.onSocketOpen();var e=new(d("WAResolvable").Resolvable)();d("WALogger").LOG(q(),b);a.socketId=b;a.socket=c;a.softCloseSocket=function(){a.softCloseSocket=null,a.socket&&a.config.shouldCloseStaleSocket&&(X(),a.socket=null),e.resolve()};a.socketLoop.resetTimeoutAfter(1e4);a.deadSocketTimer.cancel();a.maybeScheduleHealthCheck();c.setOnFrame(function(c){return a.parseAndHandleStanza(b,c)});c.setOnClose(function(){d("WALogger").LOG(p(),b);a.activePing&&b===a.activePing.socketId&&(a.activePing.handler.resolve(),a.activePing=null);a.filterPending(function(a){return a.attachedToSocketId===b}).forEach(function(b){return void a.removeHandler(b)});if(b!==a.socketId)return;a.socketId=Q;a.socket=null;a.onConnectionChange("disconnected");a.config.handlers.onDisconnect==null?void 0:a.config.handlers.onDisconnect();e.resolve()});a.onConnectionChange("connected");a.config.handlers.onConnect==null?void 0:a.config.handlers.onConnect();a.filterPending(function(a){return!a.attachedToSocketId}).sort(function(a,b){return a.orderedId-b.orderedId}).forEach(function(b){switch(b.type){case"smax":case"iq":a.maybeSendPendingStanza(b);break;case"ack":a.callStanza(b.stanza);break;default:b.type;break}});return e.promise})).then(d("WAResultOrError").catchError(function(a){switch(a){case"max-hunters":d("WALogger").WARN(o());break;case"disconnected":d("WALogger").WARN(n());break;default:a;return}}))["catch"](function(a){a instanceof d("WAErrors").Disconnected?d("WALogger").LOG(m()):d("WALogger").ERROR(l(),a).devConsole(a)})}function X(){var a=Z("closeSocket");a.socket&&(d("WALogger").LOG(k(),a.socketId),d("WALogger").LOG(j()),a.socket.close())}function ca(){Z("onStreamErrorReceived").socketLoop.cancelReset()}function da(){Z("waitForConnection").sendPing();O||(O=new(d("WAResolvable").Resolvable)());return O.promise}function ea(a,b){var c=Z("castStanza");c.socket?c.castStanza(a,b):d("WALogger").LOG(i())}function fa(a){var b=Z("castStanza");return b.socketId===a}function Y(a,e,f,g,i){f===void 0&&(f=0);i===void 0&&(i="iq");return new(h||(h=b("Promise")))(function(j){var k=Z("sendIq"),l=a.attrs.id;if(!l||typeof l!=="string")throw c("err")("[comms] sendIq given iq without id: "+String(a));var m=k.socketId;if(e&&!m){j((h||(h=b("Promise"))).reject(new(d("WAErrors").Offline)()));return}var n=function(a){a===void 0&&(a="disconnect");var d=i==="iq"?k.pendingIqs.get(l):k.pendingSmaxStanzas.get(l);if(!d){j((h||(h=b("Promise"))).reject(c("err")("[comms] _sendIq unexisting stanza to be cancelled: "+l)));return}k.removeHandler(d,a)},o=null;if(f>0){var p=setTimeout(n,f*1e3);o=function(){clearTimeout(p)}}if(g!=null)if(g.aborted){j((h||(h=b("Promise"))).reject(new(d("WAErrors").Disconnected)()));return}else{var q=function(){n("abort")};g.addEventListener("abort",q);o=function(){g.removeEventListener("abort",q)}}m={resolve:j,stanza:a,attachedToSocketId:e?m:Q,orderedId:P++,attempt:0,cleanup:o};if(i==="iq"){o=babelHelpers["extends"]({type:i},m);k.pendingIqs.set(l,o);k.config.handlers.onSendIq==null?void 0:k.config.handlers.onSendIq(a);k.maybeSendPendingStanza(o)}else{i;o=babelHelpers["extends"]({type:i},m);k.pendingSmaxStanzas.set(l,o);k.maybeSendPendingStanza(o)}})}function ga(a,b){var c,d;c=(c=b==null?void 0:b.withoutRetry)!=null?c:!1;d=(d=b==null?void 0:b.timeoutSeconds)!=null?d:0;b=(b=b==null?void 0:b.signal)!=null?b:null;return Y(a,c,d,b,"smax")}function ha(){var a=Z("sendPing");return a.sendPing()}function ia(){return Z("startHandlingRequests").startHandlingRequests()}function ja(){N&&N.deadSocketTimer.cancel()}function Z(a){if(N)return N;throw c("err")("[comms] "+a+" called before startComms")}function $(a){if(a.tag==="iq"){var b=a.attrs.type;if(b==="result"||b==="error")return d("WAWap").decodeAsString(a.attrs.id)||null}return null}function ka(){return P++}function la(){N=null,O=new(d("WAResolvable").Resolvable)(),P=1}g.DEFAULT_SOCKET_ID=Q;g.getComms=a;g.startComms=e;g.stopComms=f;g.closeSocketAndPreventRetry=S;g.openSocketLoop=T;g.maybeResetSocketLoop=U;g.forceResetSocketLoop=aa;g.forceAbortSocketConnection=ba;g.isSocketConnected=V;g.socketLoopIteration=W;g.closeSocket=X;g.onStreamErrorReceived=ca;g.waitForConnection=da;g.castSmaxStanza=ea;g.isActiveSocket=fa;g._sendIq=Y;g.sendSmaxStanza=ga;g.sendPing=ha;g.startHandlingRequests=ia;g.cancelDeadSocketTimer=ja;g.singletonOrThrowIfUninitialized=Z;g.getAndIncrementNextOrderedId=ka;g.resetStateForTests=la}),98);
__d("WAJobOrchestratorTypes",["$InternalEnum"],(function(a,b,c,d,e,f){"use strict";a=b("$InternalEnum")({SKIP:"SKIP_PRIORITIZATION",UI_ACTION:"UI_ACTION",LOW:"LOW",HIGH:"HIGH",OFFLINE:"OFFLINE",HISTORY_SYNC:"HISTORY_SYNC",BEST_EFFORT:"BEST_EFFORT"});c=1;d=a.LOW;e=10*1e3;f.JOB_PRIORITY=a;f.DEFAULT_CONCURRENCY=c;f.DEFAULT_JOB_PRIORITY=d;f.DEFAULT_JOB_TIMEOUT_MS=e}),66);
__d("WAJobPriorityBucket",["WAJobOrchestratorTypes","WALogger"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["Assertion failed::markJobTaskDone found jobId: "," in scheduled tasks"]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["Assertion failed::markJobTaskPending found jobId: "," in pending tasks"]);i=function(){return a};return a}a=function(){function a(a){this.tasks=[];this.pendingTasks=[];this.lastJobStartedTimestampMs=null;this.jobMaxConcurrency=(a=a.jobMaxConcurrencyMap)!=null?a:{}}var b=a.prototype;b.updateConfig=function(a){this.jobMaxConcurrency=(a=a.jobMaxConcurrencyMap)!=null?a:{}};b.getStats=function(){return[].concat(this.tasks,this.pendingTasks).reduce(function(a,b){var c;c=(c=a[b.jobName])!=null?c:0;a[b.jobName]=c+1;return a},{})};b.next=function(){var a=this;if(this.tasks.length===0)return null;var b=this.pendingTasks.reduce(function(a,b){var c;c=(c=a.get(b.jobName))!=null?c:0;a.set(b.jobName,c+1);return a},new Map()),c=this.tasks.filter(function(c){var e;return((e=b.get(c.jobName))!=null?e:0)<((e=a.jobMaxConcurrency[c.jobName])!=null?e:d("WAJobOrchestratorTypes").DEFAULT_CONCURRENCY)});return c.length>0?[c[0]]:null};b.add=function(a,b,c,d){c={jobId:c,jobInfo:b,jobName:a,run:d};this.tasks.push(c);return c};b.markJobTaskPending=function(a){this.pendingTasks.includes(function(b){return b.jobId===a.jobId})&&d("WALogger").ERROR(i(),a.jobId).sendLogs("JobOrchestrator::markJobTaskPending"),this.lastJobStartedTimestampMs=Date.now(),this.pendingTasks.push(a),this.tasks=this.tasks.filter(function(b){return b.jobId!==a.jobId})};b.markJobTaskDone=function(a){this.pendingTasks=this.pendingTasks.filter(function(b){return b.jobId!==a}),this.tasks.includes(function(b){return b.jobId===a})&&d("WALogger").ERROR(h(),a).sendLogs("JobOrchestrator::markJobTaskDone")};b.count=function(){return this.tasks.length};b.pendingCount=function(){return this.pendingTasks.length};b.clearWaitingTasks=function(){this.tasks=[]};b.clear=function(){this.tasks=[],this.pendingTasks=[]};b.getLastJobStartedTimestamp=function(){return this.lastJobStartedTimestampMs};return a}();b=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}var c=b.prototype;c.next=function(){var a=this,b,c;if(this.tasks.length===0)return null;var d=this.pendingTasks.reduce(function(a,b){var c;c=(c=a.get(b.jobName))!=null?c:0;a.set(b.jobName,c+1);return a},new Map()),e=this.tasks.filter(function(b){var c;return((c=d.get(b.jobName))!=null?c:0)<((c=a.jobMaxConcurrency[b.jobName])!=null?c:1)});if(e.length===0)return null;b=(b=this.jobMaxConcurrency[e[0].jobName])!=null?b:1;c=(c=d.get(e[0].jobName))!=null?c:0;if(b>1&&c<b){var f=e.filter(function(a){return a.jobName===e[0].jobName});b=Math.min(f.length,b-c);return f.slice(0,b)}return[e[0]]};return b}(a);g.BaseJobBucket=a;g.LowJobBucket=b}),98);
__d("WAMetrics",["Promise","WATimeUtils"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(){var a=d("WATimeUtils").performanceAbsoluteNow();return new(h||(h=b("Promise")))(function(b){setTimeout(function(){b(d("WATimeUtils").performanceAbsoluteNow()-a)},0)})}g.getEventLoopDelay=a}),98);
__d("WAPromiseTimeout",["Promise","WACustomError"],(function(a,b,c,d,e,f,g){"use strict";var h;a=function(a,c,e){var f=null,g=new(h||(h=b("Promise")))(function(a,b){f=setTimeout(function(){b(new(d("WACustomError").TimeoutError)(e)),clearTimeout(f)},c)});return h.race([a,g])["finally"](function(){clearTimeout(f)})};g.promiseTimeout=a}),98);
__d("WAConcurrentBucketJobQueue",["Promise","WABase64","WACustomError","WAJobOrchestratorTypes","WAJobPriorityBucket","WALogger","WAMetrics","WANullthrows","WAPromiseTimeout","err","regeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["[job-orchestator]: "," exceeding the timeout, release the thread."]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["[job-orchestator]: updated WAConcurrentBucketJobQueue config"]);j=function(){return a};return a}var k=30,l=new Map([[d("WAJobOrchestratorTypes").JOB_PRIORITY.HIGH,5],[d("WAJobOrchestratorTypes").JOB_PRIORITY.LOW,1]]);a=function(){function a(){this.$1=!1,this.$2=0,this.$3=0,this.$4=0,this.$5=new Map(),this.$6=new Map(),this.$7=new Map(),this.$9=0}var e=a.prototype;e.init=function(a,b){var e,f,g;if(this.$1)throw c("err")("WAConcurrentBucketJobQueue has already initialized");this.$4=(e=a==null?void 0:a.bestEffortWaitTimeoutSec)!=null?e:k;this.$2=a.maxConcurrency;this.$3=a.maxConcurrency;this.$8=b;this.$7=this.$11(a==null?void 0:a.jobPrioritiesQuota);this.$6=new Map(this.$7);this.$5=new Map();this.$9=Date.now();b=new(d("WAJobPriorityBucket").BaseJobBucket)({jobMaxConcurrencyMap:(e=a.maxConcurrencyPerJob)!=null?e:{}});e=new(d("WAJobPriorityBucket").LowJobBucket)({jobMaxConcurrencyMap:(e=a.maxConcurrencyPerJob)!=null?e:{}});f=new(d("WAJobPriorityBucket").LowJobBucket)({jobMaxConcurrencyMap:(f=a.maxConcurrencyPerJob)!=null?f:{}});g=new(d("WAJobPriorityBucket").BaseJobBucket)({jobMaxConcurrencyMap:(g=a.maxConcurrencyPerJob)!=null?g:{}});a=new(d("WAJobPriorityBucket").BaseJobBucket)({jobMaxConcurrencyMap:(a=a.maxConcurrencyPerJob)!=null?a:{}});this.$5.set(d("WAJobOrchestratorTypes").JOB_PRIORITY.UI_ACTION,b);this.$5.set(d("WAJobOrchestratorTypes").JOB_PRIORITY.HIGH,b);this.$5.set(d("WAJobOrchestratorTypes").JOB_PRIORITY.OFFLINE,g);this.$5.set(d("WAJobOrchestratorTypes").JOB_PRIORITY.HISTORY_SYNC,a);this.$5.set(d("WAJobOrchestratorTypes").JOB_PRIORITY.LOW,e);this.$5.set(d("WAJobOrchestratorTypes").JOB_PRIORITY.BEST_EFFORT,f);this.$1=!0};e.updateConfig=function(a){this.$3+=a.maxConcurrency-this.$2,this.$2=a.maxConcurrency,this.$5.forEach(function(b){return b.updateConfig({jobMaxConcurrencyMap:(b=a.maxConcurrencyPerJob)!=null?b:{}})}),this.$7=this.$11(a==null?void 0:a.jobPrioritiesQuota),d("WALogger").LOG(j())};e.isInitialized=function(){return this.$1};e.clearQueue=function(){if(!this.$1)throw c("err")("WAConcurrentBucketJobQueue not initialized");this.$5.forEach(function(a){return a.clear()})};e.clearQueueByPriority=function(a){if(!this.$1)throw c("err")("WAConcurrentBucketJobQueue not initialized");(a=this.$5.get(a))==null?void 0:a.clearWaitingTasks()};e.getIntStats=function(){var a=this,b=function(b){var c;b=a.$5.get(b);return((c=b==null?void 0:b.count())!=null?c:0)+((c=b==null?void 0:b.pendingCount())!=null?c:0)};return{highPriorityBucketSize:b(d("WAJobOrchestratorTypes").JOB_PRIORITY.HIGH),lowPriorityBucketSize:b(d("WAJobOrchestratorTypes").JOB_PRIORITY.LOW),bestEffortPriorityBucketSize:b(d("WAJobOrchestratorTypes").JOB_PRIORITY.BEST_EFFORT)}};e.getStringStats=function(){var a=this,b=function(b){var c=(b=(b=a.$5.get(b))==null?void 0:b.getStats())!=null?b:{};b=Object.keys(c).reduce(function(a,b){var d=a[0];a=a[1];var e=c[b];return e>d?[e,b]:[d,a]},[0,null]);b=b[1];return b};return{highPriorityMaxJob:b(d("WAJobOrchestratorTypes").JOB_PRIORITY.HIGH),lowPriorityMaxJob:b(d("WAJobOrchestratorTypes").JOB_PRIORITY.LOW),bestEffortPriorityMaxJob:b(d("WAJobOrchestratorTypes").JOB_PRIORITY.BEST_EFFORT)}};e.enqueue=function(a,e,f,g){var i,j=this;if(!this.$1)return(h||(h=b("Promise"))).reject(c("err")("WAConcurrentBucketJobQueue not initialized"));var k,l,m=new(h||(h=b("Promise")))(function(a,b){k=a,l=b}),n=babelHelpers["extends"]({priority:d("WAJobOrchestratorTypes").DEFAULT_JOB_PRIORITY},f),o=this.getJobBucketByType(n.priority);if(!o)return(h||(h=b("Promise"))).reject(c("err")("WAConcurrentBucketJobQueue no bucket for job with name "+a+" was found."));void d("WAMetrics").getEventLoopDelay().then(function(a){(g==null?void 0:g.isActive())&&(g==null?void 0:g.addPoint("measure_event_loop_delay",{"int":{eventLoopDelay:a}}))});g==null?void 0:g.addPoint("scheduling_job",{string:babelHelpers["extends"]({},this.getStringStats(),{priority:n.priority}),"int":babelHelpers["extends"]({},this.getIntStats(),{maxTimeoutMs:(i=f==null?void 0:f.maxTimeoutMs)!=null?i:0})});var p=n.priority+"-"+a+"-"+((i=f==null?void 0:f.jobId)!=null?i:d("WABase64").randomBase64(8));i=o.add(a,n,p,function(){var a;return b("regeneratorRuntime").async(function(c){while(1)switch(c.prev=c.next){case 0:c.prev=0;j.$8.logJobStarted(p);c.next=4;return b("regeneratorRuntime").awrap(j.$12(e(),f==null?void 0:f.maxTimeoutMs));case 4:a=c.sent;j.$8.logJobCompleted(p);k(a);c.next=13;break;case 9:c.prev=9,c.t0=c["catch"](0),c.t0 instanceof d("WACustomError").TimeoutError?j.$8.logJobTimeout(p):j.$8.logJobError(p),l(c.t0);case 13:case"end":return c.stop()}},null,this,[[0,9]])});this.$8.logJobCreated({jobId:p,jobName:a,jobPriority:n.priority,pendingJobsCount:o.count()});f&&f.priority===d("WAJobOrchestratorTypes").JOB_PRIORITY.UI_ACTION&&void this.$13(i);this.$14();return m};e.getAvailableThreadsCount=function(){return this.$3};e.getJobQuotaConfig=function(){return this.$7};e.getRemainingJobCountMap=function(){return this.$6};e.getJobBucketByType=function(a){return this.$5.get(a)};e.getSnapshot=function(a){a=this.getJobBucketByType(a);return!a?null:a.getStats()};e.$11=function(a){var b;!a?b=new Map(l):b=new Map(a);b.set(d("WAJobOrchestratorTypes").JOB_PRIORITY.BEST_EFFORT,0);return b};e.$15=function(a){return(a=this.$6.get(a))!=null?a:0};e.$16=function(){this.$6=new Map(this.$7)};e.$17=function(a){var b=this;a===void 0&&(a=!0);var c=0,e=null,f=0;this.$5.forEach(function(a,d){c+=a==null?void 0:a.count();f+=b.$15(d);if(e!=null)return;a.count()>0&&b.$15(d)>0&&(e=a)});var g=e==null||f===0;g&&this.$16();if(this.$18(c,g))return this.getJobBucketByType(d("WAJobOrchestratorTypes").JOB_PRIORITY.BEST_EFFORT);return e==null&&a?this.$17(!1):e};e.$18=function(a,b){var c=this;function e(a,b){var c=Date.now();return a>c?!1:c-a<b*1e3}function f(a,b){a=Math.ceil(a-Date.now())+b*1e3;return a>0?a:0}var g=this.getJobBucketByType(d("WAJobOrchestratorTypes").JOB_PRIORITY.BEST_EFFORT);a=a-((a=g==null?void 0:g.count())!=null?a:0);var h=g==null?void 0:g.getLastJobStartedTimestamp();if((g==null?void 0:g.count())===0)return!1;if(h==null&&e(this.$9,this.$4)){if(this.$10==null){g=f(this.$9,this.$4);this.$10=setTimeout(function(){c.$14(),c.$10=null},g)}return!1}return a>0&&h!=null&&e(h,this.$4)?!1:b};e.$19=function(a){a=this.$20(a);return c("WANullthrows")(this.$5.get(a))};e.$20=function(a){var b=a.split("-")[0];b=d("WAJobOrchestratorTypes").JOB_PRIORITY.cast(b);if(!b)throw c("err")("ConcurrentBucketQueue cannot extract known job priority type from id: "+a);return b};e.$21=function(a){a=this.$20(a);this.$15(a)>0?this.$6.set(a,this.$15(a)-1):this.$6.set(a,0)};e.$14=function(){var a=this;while(this.$3>0){var b=this.$17();b=b==null?void 0:b.next();if(b==null)break;b.forEach(function(b){a.$21(b.jobId),void a.$13(b)})}};e.$12=function(a,b){return b!==void 0?d("WAPromiseTimeout").promiseTimeout(a,b):a};e.$13=function(a){var c=this,e,f,g,h,j;return b("regeneratorRuntime").async(function(k){while(1)switch(k.prev=k.next){case 0:e=this.$19(a.jobId);this.$3--;e.markJobTaskPending(a);f=a.run,g=a.jobId,h=a.jobName;k.prev=4;k.next=7;return b("regeneratorRuntime").awrap(this.$12(f(),((j=a.jobInfo)==null?void 0:j.maxTimeoutMs)===void 0?d("WAJobOrchestratorTypes").DEFAULT_JOB_TIMEOUT_MS:void 0));case 7:k.next=17;break;case 9:k.prev=9;k.t0=k["catch"](4);if(!(k.t0 instanceof d("WACustomError").TimeoutError)){k.next=16;break}this.$8.logJobTimeout(g);d("WALogger").LOG(i(),h);k.next=17;break;case 16:throw k.t0;case 17:k.prev=17;this.$3++;e.markJobTaskDone(g);this.$3>0&&setTimeout(function(){return c.$14()},0);return k.finish(17);case 22:case"end":return k.stop()}},null,this,[[4,9,17,22]])};return a}();g.WAConcurrentBucketJobQueue=a}),98);
__d("WADefaultJobNoQueue",["WAHex","WAJobOrchestratorTypes","err","regeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(){this.$2=!1}var e=a.prototype;e.init=function(a,b){if(this.$2)throw c("err")("DefaultNoQueue has already initialized");this.$1=b;this.$2=!0};e.updateConfig=function(a){};e.isInitialized=function(){return this.$2};e.clearQueue=function(){};e.clearQueueByPriority=function(a){};e.getSnapshot=function(){throw c("err")("getSnapshot is not implemented for DefaultNoQueue")};e.enqueue=function(a,c,e){var f,g,h,i;return b("regeneratorRuntime").async(function(j){while(1)switch(j.prev=j.next){case 0:h=(f=e==null?void 0:e.jobId)!=null?f:d("WAHex").randomHex(8).substr(0,64);this.$1.logJobCreated({jobId:h,jobName:a,jobPriority:(g=e==null?void 0:e.priority)!=null?g:d("WAJobOrchestratorTypes").JOB_PRIORITY.LOW,pendingJobsCount:0});j.prev=2;this.$1.logJobStarted(h);j.next=6;return b("regeneratorRuntime").awrap(c());case 6:i=j.sent;this.$1.logJobCompleted(h);return j.abrupt("return",i);case 11:j.prev=11;j.t0=j["catch"](2);this.$1.logJobError(h);throw j.t0;case 15:case"end":return j.stop()}},null,this,[[2,11]])};return a}();g.WADefaultJobNoQueue=a}),98);
__d("WAFilteredCatch",[],(function(a,b,c,d,e,f){"use strict";function a(a,b){return function(c){var d=Array.isArray(a)?a.some(function(a){return c instanceof a}):c instanceof a;if(d)return b(c);throw c}}f.filteredCatch=a}),66);
__d("WAPromiseReduce",["asyncToGeneratorRuntime"],(function(a,b,c,d,e,f){"use strict";a=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c){c=c;var d=a.length;for(var e=0;e<d;e++)c=(yield b(c,a[e],e));return c});return function(b,c,d){return a.apply(this,arguments)}}();f.promiseReduce=a}),66);
__d("WAProtoConst",[],(function(a,b,c,d,e,f){"use strict";a={REPEATED:1<<6,PACKED:1<<7,REQUIRED:1<<8};b=31;c={INT32:1,INT64:2,UINT32:3,UINT64:4,SINT32:5,SINT64:6,BOOL:7,ENUM:8,FIXED64:9,SFIXED64:10,DOUBLE:11,STRING:12,BYTES:13,MESSAGE:14,FIXED32:15,SFIXED32:16,FLOAT:17,MAP:18};d={VARINT:0,BIT64:1,BINARY:2,BIT32:5};e={ONEOF:"__oneofs__",RESERVED:"__reserved__",RESERVED_TAGS:"tags",RESERVED_FIELDS:"fields"};f.FLAGS=a;f.TYPE_MASK=b;f.TYPES=c;f.ENC=d;f.KEYS=e}),66);
__d("WASmaxAttrs",["WAWap"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){if(b==null)return d("WAWap").DROP_ATTR;else return a(b)}function b(a,b){if(b)return a;else return d("WAWap").DROP_ATTR}g.OPTIONAL=a;g.OPTIONAL_LITERAL=b}),98);
__d("WASmaxChildren",["WADeepEquals"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){if(b==null)return null;else return a(b)}function b(a,b){if(b==null)return null;else if(b)return a()}function c(a,b){if(b)for(var c=1;c<b.length;c++)if(!d("WADeepEquals").deepEqual(b[c],b[0]))throw new Error("expected all homogeneous children to be equal, but they were not");c=h(a,b,0,Infinity);return c}function e(a,b){return i(a,b,0,Infinity)}function h(a,b,c,d){if(b==null){if(c>0)throw new Error("expected at least "+c+" children, but none provided");return[]}var e=b.length;if(e<c)throw new Error("expected at least "+c+" children, but found "+e);else if(e>d)throw new Error("expected at most "+d+" children, but found "+e);return b.map(function(b){return a(b)})}function i(a,b,c,d){if(b===0){if(c>0)throw new Error("expected at least "+c+" children, but none provided");return[]}if(b<c)throw new Error("expected at least "+c+" children, but found "+b);else if(b>d)throw new Error("expected at most "+d+" children, but found "+b);c=[];for(d=0;d<b;d++)c.push(a());return c}g.OPTIONAL_CHILD=a;g.HAS_OPTIONAL_CHILD=b;g.HOMOGENEOUS_CHILD=c;g.HOMOGENEOUS_CHILD_COUNT=e;g.REPEATED_CHILD=h;g.REPEATED_CHILD_COUNT=i}),98);
__d("WASmaxInBlocklistsIQErrorBadRequestMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"error");if(!b.success)return b;b=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"text","bad-request");if(!b.success)return b;a=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrInt,a,"code",400);return!a.success?a:d("WAResultOrError").makeResult({text:b.value,code:a.value})}g.parseIQErrorBadRequestMixin=a}),98);
__d("WASmaxInBlocklistsIQErrorRateOverlimitMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"error");if(!b.success)return b;b=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"text","rate-overlimit");if(!b.success)return b;a=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrInt,a,"code",429);return!a.success?a:d("WAResultOrError").makeResult({text:b.value,code:a.value})}g.parseIQErrorRateOverlimitMixin=a}),98);
__d("WASmaxInBlocklistsIQErrorBadRequestOrRateOverlimitMixinGroup",["WAResultOrError","WASmaxInBlocklistsIQErrorBadRequestMixin","WASmaxInBlocklistsIQErrorRateOverlimitMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxInBlocklistsIQErrorBadRequestMixin").parseIQErrorBadRequestMixin(a);if(b.success)return d("WAResultOrError").makeResult({name:"IQErrorBadRequest",value:b.value});var c=d("WASmaxInBlocklistsIQErrorRateOverlimitMixin").parseIQErrorRateOverlimitMixin(a);return c.success?d("WAResultOrError").makeResult({name:"IQErrorRateOverlimit",value:c.value}):d("WASmaxParseUtils").errorMixinDisjunction(a,["IQErrorBadRequest","IQErrorRateOverlimit"],[b,c])}g.parseIQErrorBadRequestOrRateOverlimitMixinGroup=a}),98);
__d("WASmaxInBlocklistsIQErrorFeatureNotImplementedMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"error");if(!b.success)return b;b=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"text","feature-not-implemented");if(!b.success)return b;a=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrInt,a,"code",501);return!a.success?a:d("WAResultOrError").makeResult({text:b.value,code:a.value})}g.parseIQErrorFeatureNotImplementedMixin=a}),98);
__d("WASmaxInBlocklistsIQErrorInternalServerErrorMixin",["WAResultOrError","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxParseUtils").assertTag(a,"error");if(!b.success)return b;b=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"text","internal-server-error");if(!b.success)return b;a=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrInt,a,"code",500);return!a.success?a:d("WAResultOrError").makeResult({text:b.value,code:a.value})}g.parseIQErrorInternalServerErrorMixin=a}),98);
__d("WASmaxInBlocklistsIQErrorFeatureNotImplementedOrInternalServerErrorMixinGroup",["WAResultOrError","WASmaxInBlocklistsIQErrorFeatureNotImplementedMixin","WASmaxInBlocklistsIQErrorInternalServerErrorMixin","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a){var b=d("WASmaxInBlocklistsIQErrorFeatureNotImplementedMixin").parseIQErrorFeatureNotImplementedMixin(a);if(b.success)return d("WAResultOrError").makeResult({name:"IQErrorFeatureNotImplemented",value:b.value});var c=d("WASmaxInBlocklistsIQErrorInternalServerErrorMixin").parseIQErrorInternalServerErrorMixin(a);return c.success?d("WAResultOrError").makeResult({name:"IQErrorInternalServerError",value:c.value}):d("WASmaxParseUtils").errorMixinDisjunction(a,["IQErrorFeatureNotImplemented","IQErrorInternalServerError"],[b,c])}g.parseIQErrorFeatureNotImplementedOrInternalServerErrorMixinGroup=a}),98);
__d("WASmaxInBlocklistsIQErrorResponseMixin",["WAResultOrError","WASmaxParseReference","WASmaxParseUtils"],(function(a,b,c,d,e,f,g){function a(a,b){var c=d("WASmaxParseUtils").assertTag(a,"iq");if(!c.success)return c;c=d("WASmaxParseReference").attrStringFromReference(b,["id"]);if(!c.success)return c;c=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"id",c.value);if(!c.success)return c;c=d("WASmaxParseReference").attrStringFromReference(b,["to"]);if(!c.success)return c;b=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"from",c.value);if(!b.success)return b;c=d("WASmaxParseUtils").literal(d("WASmaxParseUtils").attrString,a,"type","error");return!c.success?c:d("WAResultOrError").makeResult({type:c.value})}g.parseIQErrorResponseMixin=a}),98);
__d("WASmaxParsingFailure",[],(function(a,b,c,d,e,f){"use strict";a=function(a){babelHelpers.inheritsLoose(b,a);function b(b){var c;c=a.call(this,"SmaxParsingFailure: "+b)||this;c.name="SmaxParsingFailure";c.reason=b;return c}var c=b.prototype;c.toString=function(){return"SmaxParsingFailure: "+this.reason};return b}(babelHelpers.wrapNativeSuper(Error));f.SmaxParsingFailure=a}),66);
__d("WASmaxRpcUtils",[],(function(a,b,c,d,e,f){"use strict";function a(a,b){var c=Object.keys(b).map(function(a){var c=a==="Request"?"<request>":'<response name="'+a+'">';return"Tried "+c+", but failed with "+b[a].error+"."}).join(" ");return'Failed to parse incoming stanza of <rpc name="'+a+'">. '+c}f.errorMessageRpcParsing=a}),66);
__d("WATypeUtils",[],(function(a,b,c,d,e,f){"use strict";function a(a){return typeof a==="function"}function b(a){return typeof a==="number"}function c(a){return typeof a==="string"}function d(a){return typeof a==="boolean"}f.isFunction=a;f.isNumber=b;f.isString=c;f.isBoolean=d}),66);
__d("WAUpperFirst",[],(function(a,b,c,d,e,f){"use strict";function a(a){return a.charAt(0).toUpperCase()+a.slice(1)}f["default"]=a}),66);
/**
 * License: https://www.facebook.com/legal/license/7R_-0_GF-gR/
 */
__d("dexie-3.2.2",["Promise"],(function(a,b,c,d,e,f){"use strict";var g,h={},i={exports:h},j;function k(){(function(b,c){typeof h==="object"&&typeof i!=="undefined"?i.exports=c():typeof j==="function"&&j.amd?j(c):(b=typeof globalThis!=="undefined"?globalThis:b||self,b.Dexie=c())})(this,function(){var c=function(){c=Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++){b=arguments[c];for(var e in b)Object.prototype.hasOwnProperty.call(b,e)&&(a[e]=b[e])}return a};return c.apply(this,arguments)};function d(a,b,c){if(c||arguments.length===2)for(var d=0,e=b.length,f;d<e;d++)(f||!(d in b))&&(f||(f=Array.prototype.slice.call(b,0,d)),f[d]=b[d]);return a.concat(f||Array.prototype.slice.call(b))}var e=typeof globalThis!=="undefined"?globalThis:typeof self!=="undefined"?self:typeof window!=="undefined"?window:a,f=Object.keys,h=Array.isArray;typeof (g||(g=b("Promise")))!=="undefined"&&!e.Promise&&(e.Promise=g||(g=b("Promise")));function i(a,b){if(typeof b!=="object")return a;f(b).forEach(function(c){a[c]=b[c]});return a}var j=Object.getPrototypeOf,k={}.hasOwnProperty;function l(a,b){return k.call(a,b)}function m(a,b){typeof b==="function"&&(b=b(j(a))),(typeof Reflect==="undefined"?f:Reflect.ownKeys)(b).forEach(function(c){o(a,c,b[c])})}var n=Object.defineProperty;function o(a,b,c,d){n(a,b,i(c&&l(c,"get")&&typeof c.get==="function"?{get:c.get,set:c.set,configurable:!0}:{value:c,configurable:!0,writable:!0},d))}function p(a){return{from:function(b){a.prototype=Object.create(b.prototype);o(a.prototype,"constructor",a);return{extend:m.bind(null,a.prototype)}}}}var q=Object.getOwnPropertyDescriptor;function r(a,b){var c=q(a,b);return c||(c=j(a))&&r(c,b)}var s=[].slice;function t(a,b,c){return s.call(a,b,c)}function u(a,b){return b(a)}function v(a){if(!a)throw new Error("Assertion Failed")}function w(a){e.setImmediate?setImmediate(a):setTimeout(a,0)}function x(a,b){return a.reduce(function(a,c,d){c=b(c,d);c&&(a[c[0]]=c[1]);return a},{})}function aa(a,b,c){try{a.apply(null,c)}catch(a){b&&b(a)}}function y(a,b){if(l(a,b))return a[b];if(!b)return a;if(typeof b!=="string"){var c=[];for(var d=0,e=b.length;d<e;++d){var f=y(a,b[d]);c.push(f)}return c}f=b.indexOf(".");if(f!==-1){d=a[b.substr(0,f)];return d===void 0?void 0:y(d,b.substr(f+1))}return void 0}function z(a,b,c){if(!a||b===void 0)return;if("isFrozen"in Object&&Object.isFrozen(a))return;if(typeof b!=="string"&&"length"in b){v(typeof c!=="string"&&"length"in c);for(var d=0,e=b.length;d<e;++d)z(a,b[d],c[d])}else{d=b.indexOf(".");if(d!==-1){e=b.substr(0,d);d=b.substr(d+1);if(d==="")c===void 0?h(a)&&!isNaN(parseInt(e))?a.splice(e,1):delete a[e]:a[e]=c;else{var f=a[e];(!f||!l(a,e))&&(f=a[e]={});z(f,d,c)}}else c===void 0?h(a)&&!isNaN(parseInt(b))?a.splice(b,1):delete a[b]:a[b]=c}}function ba(a,b){typeof b==="string"?z(a,b,void 0):"length"in b&&[].map.call(b,function(b){z(a,b,void 0)})}function ca(a){var b={};for(var c in a)l(a,c)&&(b[c]=a[c]);return b}var da=[].concat;function ea(a){return da.apply([],a)}var A="Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(ea([8,16,32,64].map(function(a){return["Int","Uint","Float"].map(function(b){return b+a+"Array"})}))).filter(function(a){return e[a]}),fa=A.map(function(a){return e[a]});x(A,function(a){return[a,!0]});var B=null;function ga(a){B=typeof WeakMap!=="undefined"&&new WeakMap();a=ha(a);B=null;return a}function ha(a){if(!a||typeof a!=="object")return a;var b=B&&B.get(a);if(b)return b;if(h(a)){b=[];B&&B.set(a,b);for(var c=0,d=a.length;c<d;++c)b.push(ha(a[c]))}else if(fa.indexOf(a.constructor)>=0)b=a;else{c=j(a);b=c===Object.prototype?{}:Object.create(c);B&&B.set(a,b);for(d in a)l(a,d)&&(b[d]=ha(a[d]))}return b}var ia={}.toString;function ja(a){return ia.call(a).slice(8,-1)}var ka=typeof Symbol!=="undefined"?typeof Symbol==="function"?Symbol.iterator:"@@iterator":"@@iterator",la=typeof ka==="symbol"?function(a){var b;return a!=null&&(b=a[ka])&&b.apply(a)}:function(){return null},ma={};function C(a){var b,c,d,e;if(arguments.length===1){if(h(a))return a.slice();if(this===ma&&typeof a==="string")return[a];if(e=la(a)){c=[];while(d=e.next(),!d.done)c.push(d.value);return c}if(a==null)return[a];b=a.length;if(typeof b==="number"){c=new Array(b);while(b--)c[b]=a[b];return c}return[a]}b=arguments.length;c=new Array(b);while(b--)c[b]=arguments[b];return c}var na=typeof Symbol!=="undefined"?function(a){return a[typeof Symbol==="function"?Symbol.toStringTag:"@@toStringTag"]==="AsyncFunction"}:function(){return!1},D=typeof location!=="undefined"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function oa(a,b){D=a,pa=b}var pa=function(){return!0},qa=!new Error("").stack;function ra(){if(qa)try{throw new Error()}catch(a){return a}return new Error()}function sa(a,b){var c=a.stack;if(!c)return"";b=b||0;c.indexOf(a.name)===0&&(b+=(a.name+a.message).split("\n").length);return c.split("\n").slice(b).filter(pa).map(function(a){return"\n"+a}).join("")}A=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"];var E=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"];A=A.concat(E);var ta={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function ua(a,b){this._e=ra(),this.name=a,this.message=b}p(ua).from(Error).extend({stack:{get:function(){return this._stack||(this._stack=this.name+": "+this.message+sa(this._e,2))}},toString:function(){return this.name+": "+this.message}});function va(a,b){return a+". Errors: "+Object.keys(b).map(function(a){return b[a].toString()}).filter(function(a,b,c){return c.indexOf(a)===b}).join("\n")}function wa(a,b,c,d){this._e=ra(),this.failures=b,this.failedKeys=d,this.successCount=c,this.message=va(a,b)}p(wa).from(ua);function xa(a,b){this._e=ra(),this.name="BulkError",this.failures=Object.keys(b).map(function(a){return b[a]}),this.failuresByPos=b,this.message=va(a,b)}p(xa).from(ua);var ya=A.reduce(function(a,b){return a[b]=b+"Error",a},{}),za=ua,F=A.reduce(function(b,c){var d=c+"Error";function a(a,b){this._e=ra(),this.name=d,!a?(this.message=ta[c]||d,this.inner=null):typeof a==="string"?(this.message=""+a+(b?"\n "+b:""),this.inner=b||null):typeof a==="object"&&(this.message=a.name+" "+a.message,this.inner=a)}p(a).from(za);b[c]=a;return b},{});F.Syntax=SyntaxError;F.Type=TypeError;F.Range=RangeError;var Aa=E.reduce(function(a,b){a[b+"Error"]=F[b];return a},{});function Ba(a,b){if(!a||a instanceof ua||a instanceof TypeError||a instanceof SyntaxError||!a.name||!Aa[a.name])return a;b=new Aa[a.name](b||a.message,a);"stack"in a&&o(b,"stack",{get:function(){return this.inner.stack}});return b}E=A.reduce(function(a,b){["Syntax","Type","Range"].indexOf(b)===-1&&(a[b+"Error"]=F[b]);return a},{});E.ModifyError=wa;E.DexieError=ua;E.BulkError=xa;function G(){}function Ca(a){return a}function Da(a,b){return a==null||a===Ca?b:function(c){return b(a(c))}}function H(a,b){return function(){a.apply(this,arguments),b.apply(this,arguments)}}function Ea(a,b){return a===G?b:function(){var c=a.apply(this,arguments);c!==void 0&&(arguments[0]=c);var d=this.onsuccess,e=this.onerror;this.onsuccess=null;this.onerror=null;var f=b.apply(this,arguments);d&&(this.onsuccess=this.onsuccess?H(d,this.onsuccess):d);e&&(this.onerror=this.onerror?H(e,this.onerror):e);return f!==void 0?f:c}}function Fa(a,b){return a===G?b:function(){a.apply(this,arguments);var c=this.onsuccess,d=this.onerror;this.onsuccess=this.onerror=null;b.apply(this,arguments);c&&(this.onsuccess=this.onsuccess?H(c,this.onsuccess):c);d&&(this.onerror=this.onerror?H(d,this.onerror):d)}}function Ga(a,b){return a===G?b:function(c){var d=a.apply(this,arguments);i(c,d);var e=this.onsuccess,f=this.onerror;this.onsuccess=null;this.onerror=null;var g=b.apply(this,arguments);e&&(this.onsuccess=this.onsuccess?H(e,this.onsuccess):e);f&&(this.onerror=this.onerror?H(f,this.onerror):f);return d===void 0?g===void 0?void 0:g:i(d,g)}}function Ha(a,b){return a===G?b:function(){return b.apply(this,arguments)===!1?!1:a.apply(this,arguments)}}function Ia(a,b){return a===G?b:function(){var c=a.apply(this,arguments);if(c&&typeof c.then==="function"){var d=this,e=arguments.length,f=new Array(e);while(e--)f[e]=arguments[e];return c.then(function(){return b.apply(d,f)})}return b.apply(this,arguments)}}var Ja={},Ka=100,La=20,Ma=100;A=typeof (g||(g=b("Promise")))==="undefined"?[]:function(){var a=(g||(g=b("Promise"))).resolve();if(typeof crypto==="undefined"||!crypto.subtle)return[a,j(a),a];var c=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[c,j(c),a]}();var Na=A[0],Oa=A[1],Pa=A[2],Qa=Oa&&Oa.then,Ra=Na&&Na.constructor,Sa=!!Pa,Ta=!1,Ua=Pa?function(){Pa.then(mb)}:e.setImmediate?setImmediate.bind(null,mb):e.MutationObserver?function(){var a=document.createElement("div");new MutationObserver(function(){mb(),a=null}).observe(a,{attributes:!0});a.setAttribute("i","1")}:function(){setTimeout(mb,0)},Va=function(a,b){bb.push([a,b]),Xa&&(Ua(),Xa=!1)},Wa=!0,Xa=!0,I=[],Ya=[],Za=null,$a=Ca,ab={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:Jb,pgp:!1,env:{},finalize:function(){this.unhandleds.forEach(function(a){try{Jb(a[0],a[1])}catch(a){}})}},J=ab,bb=[],K=0,cb=[];function L(a){if(typeof this!=="object")throw new TypeError("Promises must be constructed via new");this._listeners=[];this.onuncatched=G;this._lib=!1;var b=this._PSD=J;D&&(this._stackHolder=ra(),this._prev=null,this._numPrev=0);if(typeof a!=="function"){if(a!==Ja)throw new TypeError("Not a function");this._state=arguments[1];this._value=arguments[2];this._state===!1&&gb(this,this._value);return}this._state=null;this._value=null;++b.ref;fb(this,a)}var db={get:function(){var a=J,b=xb;function c(c,d){var e=this,f=!a.global&&(a!==J||b!==xb),g=f&&!P(),h=new L(function(b,h){ib(e,new eb(Gb(c,a,f,g),Gb(d,a,f,g),b,h,a))});D&&lb(h,this);return h}c.prototype=Ja;return c},set:function(a){o(this,"then",a&&a.prototype===Ja?db:{get:function(){return a},set:db.set})}};m(L.prototype,{then:db,_then:function(a,b){ib(this,new eb(null,null,a,b,J))},"catch":function(b){if(arguments.length===1)return this.then(null,b);var a=arguments[0],c=arguments[1];return typeof a==="function"?this.then(null,function(b){return b instanceof a?c(b):tb(b)}):this.then(null,function(b){return b&&b.name===a?c(b):tb(b)})},"finally":function(a){return this.then(function(b){a();return b},function(b){a();return tb(b)})},stack:{get:function(){if(this._stack)return this._stack;try{Ta=!0;var a=kb(this,[],La);a=a.join("\nFrom previous: ");this._state!==null&&(this._stack=a);return a}finally{Ta=!1}}},timeout:function(a,b){var c=this;return a<Infinity?new L(function(d,e){var f=setTimeout(function(){return e(new F.Timeout(b))},a);c.then(d,e)["finally"](clearTimeout.bind(null,f))}):this}});typeof Symbol!=="undefined"&&(typeof Symbol==="function"?Symbol.toStringTag:"@@toStringTag")&&o(L.prototype,typeof Symbol==="function"?Symbol.toStringTag:"@@toStringTag","Dexie.Promise");ab.env=Db();function eb(a,b,c,d,e){this.onFulfilled=typeof a==="function"?a:null,this.onRejected=typeof b==="function"?b:null,this.resolve=c,this.reject=d,this.psd=e}m(L,{all:function(){var a=C.apply(null,arguments).map(Ab);return new L(function(b,c){a.length===0&&b([]);var d=a.length;a.forEach(function(e,f){return L.resolve(e).then(function(c){a[f]=c,--d||b(a)},c)})})},resolve:function(a){if(a instanceof L)return a;if(a&&typeof a.then==="function")return new L(function(b,c){a.then(b,c)});var b=new L(Ja,!0,a);lb(b,Za);return b},reject:tb,race:function(){var a=C.apply(null,arguments).map(Ab);return new L(function(b,c){a.map(function(a){return L.resolve(a).then(b,c)})})},PSD:{get:function(){return J},set:function(a){return J=a}},totalEchoes:{get:function(){return xb}},newPSD:O,usePSD:Eb,scheduler:{get:function(){return Va},set:function(a){Va=a}},rejectionMapper:{get:function(){return $a},set:function(a){$a=a}},follow:function(a,b){return new L(function(c,d){return O(function(b,c){var d=J;d.unhandleds=[];d.onunhandled=c;d.finalize=H(function(){var a=this;qb(function(){a.unhandleds.length===0?b():c(a.unhandleds[0])})},d.finalize);a()},b,c,d)})}});Ra&&(Ra.allSettled&&o(L,"allSettled",function(){var a=C.apply(null,arguments).map(Ab);return new L(function(b){a.length===0&&b([]);var c=a.length,d=new Array(c);a.forEach(function(a,e){return L.resolve(a).then(function(a){return d[e]={status:"fulfilled",value:a}},function(a){return d[e]={status:"rejected",reason:a}}).then(function(){return--c||b(d)})})})}),Ra.any&&typeof AggregateError!=="undefined"&&o(L,"any",function(){var a=C.apply(null,arguments).map(Ab);return new L(function(b,c){a.length===0&&c(new AggregateError([]));var d=a.length,e=new Array(d);a.forEach(function(a,f){return L.resolve(a).then(function(a){return b(a)},function(a){e[f]=a,--d||c(new AggregateError(e))})})})}));function fb(a,b){try{b(function(b){if(a._state!==null)return;if(b===a)throw new TypeError("A promise cannot be resolved with itself.");var c=a._lib&&nb();b&&typeof b.then==="function"?fb(a,function(a,c){b instanceof L?b._then(a,c):b.then(a,c)}):(a._state=!0,a._value=b,hb(a));c&&ob()},gb.bind(null,a))}catch(b){gb(a,b)}}function gb(a,b){Ya.push(b);if(a._state!==null)return;var c=a._lib&&nb();b=$a(b);a._state=!1;a._value=b;D&&b!==null&&typeof b==="object"&&!b._promise&&aa(function(){var c=r(b,"stack");b._promise=a;o(b,"stack",{get:function(){return Ta?c&&(c.get?c.get.apply(b):c.value):a.stack}})});rb(a);hb(a);c&&ob()}function hb(a){var b=a._listeners;a._listeners=[];for(var c=0,d=b.length;c<d;++c)ib(a,b[c]);c=a._PSD;--c.ref||c.finalize();K===0&&(++K,Va(function(){--K===0&&pb()},[]))}function ib(a,b){if(a._state===null){a._listeners.push(b);return}var c=a._state?b.onFulfilled:b.onRejected;if(c===null)return(a._state?b.resolve:b.reject)(a._value);++b.psd.ref;++K;Va(jb,[c,a,b])}function jb(a,b,c){try{Za=b;var d,e=b._value;b._state?d=a(e):(Ya.length&&(Ya=[]),d=a(e),Ya.indexOf(e)===-1&&sb(b));c.resolve(d)}catch(a){c.reject(a)}finally{Za=null,--K===0&&pb(),--c.psd.ref||c.psd.finalize()}}function kb(a,b,c){if(b.length===c)return b;var d="";if(a._state===!1){var e=a._value,f,g;e!=null?(f=e.name||"Error",g=e.message||e,d=sa(e,0)):(f=e,g="");b.push(f+(g?": "+g:"")+d)}D&&(d=sa(a._stackHolder,2),d&&b.indexOf(d)===-1&&b.push(d),a._prev&&kb(a._prev,b,c));return b}function lb(a,b){var c=b?b._numPrev+1:0;c<Ka&&(a._prev=b,a._numPrev=c)}function mb(){nb()&&ob()}function nb(){var a=Wa;Wa=!1;Xa=!1;return a}function ob(){var a,b,c;do while(bb.length>0){a=bb;bb=[];c=a.length;for(b=0;b<c;++b){var d=a[b];d[0].apply(null,d[1])}}while(bb.length>0);Wa=!0;Xa=!0}function pb(){var a=I;I=[];a.forEach(function(a){a._PSD.onunhandled.call(null,a._value,a)});a=cb.slice(0);var b=a.length;while(b)a[--b]()}function qb(a){function b(){a(),cb.splice(cb.indexOf(b),1)}cb.push(b);++K;Va(function(){--K===0&&pb()},[])}function rb(a){I.some(function(b){return b._value===a._value})||I.push(a)}function sb(a){var b=I.length;while(b)if(I[--b]._value===a._value){I.splice(b,1);return}}function tb(a){return new L(Ja,!1,a)}function M(a,b){var c=J;return function(){var d=nb(),e=J;try{Q(c,!0);return a.apply(this,arguments)}catch(a){b&&b(a)}finally{Q(e,!1),d&&ob()}}}var N={awaits:0,echoes:0,id:0},ub=0,vb=[],wb=0,xb=0,yb=0;function O(b,a,c,d){var e=J,f=Object.create(e);f.parent=e;f.ref=0;f.global=!1;f.id=++yb;var g=ab.env;f.env=Sa?{Promise:L,PromiseProp:{value:L,configurable:!0,writable:!0},all:L.all,race:L.race,allSettled:L.allSettled,any:L.any,resolve:L.resolve,reject:L.reject,nthen:Hb(g.nthen,f),gthen:Hb(g.gthen,f)}:{};a&&i(f,a);++e.ref;f.finalize=function(){--this.parent.ref||this.parent.finalize()};g=Eb(f,b,c,d);f.ref===0&&f.finalize();return g}function zb(){N.id||(N.id=++ub);++N.awaits;N.echoes+=Ma;return N.id}function P(){if(!N.awaits)return!1;--N.awaits===0&&(N.id=0);N.echoes=N.awaits*Ma;return!0}(""+Qa).indexOf("[native code]")===-1&&(zb=P=G);function Ab(a){if(N.echoes&&a&&a.constructor===Ra){zb();return a.then(function(a){P();return a},function(a){P();return R(a)})}return a}function Bb(a){++xb,(!N.echoes||--N.echoes===0)&&(N.echoes=N.id=0),vb.push(J),Q(a,!0)}function Cb(){var a=vb[vb.length-1];vb.pop();Q(a,!1)}function Q(a,b){var c=J;(b?N.echoes&&(!wb++||a!==J):wb&&(!--wb||a!==J))&&Fb(b?Bb.bind(null,a):Cb);if(a===J)return;J=a;c===ab&&(ab.env=Db());if(Sa){b=ab.env.Promise;var d=a.env;Oa.then=d.nthen;b.prototype.then=d.gthen;(c.global||a.global)&&(Object.defineProperty(e,"Promise",d.PromiseProp),b.all=d.all,b.race=d.race,b.resolve=d.resolve,b.reject=d.reject,d.allSettled&&(b.allSettled=d.allSettled),d.any&&(b.any=d.any))}}function Db(){var a=e.Promise;return Sa?{Promise:a,PromiseProp:Object.getOwnPropertyDescriptor(e,"Promise"),all:a.all,race:a.race,allSettled:a.allSettled,any:a.any,resolve:a.resolve,reject:a.reject,nthen:Oa.then,gthen:a.prototype.then}:{}}function Eb(a,b,c,d,e){var f=J;try{Q(a,!0);return b(c,d,e)}finally{Q(f,!1)}}function Fb(a){Qa.call(Na,a)}function Gb(a,b,c,d){return typeof a!=="function"?a:function(){var e=J;c&&zb();Q(b,!0);try{return a.apply(this,arguments)}finally{Q(e,!1),d&&Fb(P)}}}function Hb(a,b){return function(c,d){return a.call(this,Gb(c,b),Gb(d,b))}}var Ib="unhandledrejection";function Jb(a,b){var c;try{c=b.onuncatched(a)}catch(a){}if(c!==!1)try{var d;b={promise:b,reason:a};e.document&&document.createEvent?(d=document.createEvent("Event"),d.initEvent(Ib,!0,!0),i(d,b)):e.CustomEvent&&(d=new CustomEvent(Ib,{detail:b}),i(d,b));if(d&&e.dispatchEvent){dispatchEvent(d);if(!e.PromiseRejectionEvent&&e.onunhandledrejection)try{e.onunhandledrejection(d)}catch(a){}}D&&d&&!d.defaultPrevented}catch(a){}}var R=L.reject;function Kb(a,b,c,d){if(!a.idbdb||!a._state.openComplete&&!J.letThrough&&!a._vip){if(a._state.openComplete)return R(new F.DatabaseClosed(a._state.dbOpenError));if(!a._state.isBeingOpened){if(!a._options.autoOpen)return R(new F.DatabaseClosed());a.open()["catch"](G)}return a._state.dbReadyPromise.then(function(){return Kb(a,b,c,d)})}else{var e=a._createTransaction(b,c,a._dbSchema);try{e.create(),a._state.PR1398_maxLoop=3}catch(e){if(e.name===ya.InvalidState&&a.isOpen()&&--a._state.PR1398_maxLoop>0){a._close();return a.open().then(function(){return Kb(a,b,c,d)})}return R(e)}return e._promise(b,function(a,b){return O(function(){J.trans=e;return d(a,b,e)})}).then(function(a){return e._completion.then(function(){return a})})}}A="3.2.2";var Lb=String.fromCharCode(65535),Mb=-Infinity,S="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",Nb="String expected.",Ob=[],Pb=typeof navigator!=="undefined"&&/(MSIE|Trident|Edge)/.test(navigator.userAgent),Qb=Pb,Rb=Pb,Sb=function(a){return!/(dexie\.js|dexie\.min\.js)/.test(a)},Tb="__dbnames",Ub="readonly",Vb="readwrite";function Wb(a,b){return a?b?function(){return a.apply(this,arguments)&&b.apply(this,arguments)}:a:b}var Xb={type:3,lower:-Infinity,lowerOpen:!1,upper:[[]],upperOpen:!1};function Yb(a){return typeof a==="string"&&!/\./.test(a)?function(b){b[a]===void 0&&a in b&&(b=ga(b),delete b[a]);return b}:function(a){return a}}var Zb=function(){function a(){}a.prototype._trans=function(a,b,c){var d=this._tx||J.trans,e=this.name;function f(c,d,a){if(!a.schema[e])throw new F.NotFound("Table "+e+" not part of transaction");return b(a.idbtrans,a)}var g=nb();try{return d&&d.db===this.db?d===J.trans?d._promise(a,f,c):O(function(){return d._promise(a,f,c)},{trans:d,transless:J.transless||J}):Kb(this.db,a,[this.name],f)}finally{g&&ob()}};a.prototype.get=function(a,b){var c=this;return a&&a.constructor===Object?this.where(a).first(b):this._trans("readonly",function(b){return c.core.get({trans:b,key:a}).then(function(a){return c.hook.reading.fire(a)})}).then(b)};a.prototype.where=function(a){if(typeof a==="string")return new this.db.WhereClause(this,a);if(h(a))return new this.db.WhereClause(this,"["+a.join("+")+"]");var b=f(a);if(b.length===1)return this.where(b[0]).equals(a[b[0]]);var c=this.schema.indexes.concat(this.schema.primKey).filter(function(a){return a.compound&&b.every(function(b){return a.keyPath.indexOf(b)>=0})&&a.keyPath.every(function(a){return b.indexOf(a)>=0})})[0];if(c&&this.db._maxKey!==Lb)return this.where(c.name).equals(c.keyPath.map(function(b){return a[b]}));!c&&D&&!1;var d=this.schema.idxByName,e=this.db._deps.indexedDB;function g(a,b){try{return e.cmp(a,b)===0}catch(a){return!1}}var i=b.reduce(function(b,c){var e=b[0];b=b[1];var f=d[c],i=a[c];return[e||f,e||!f?Wb(b,f&&f.multi?function(a){a=y(a,c);return h(a)&&a.some(function(a){return g(i,a)})}:function(a){return g(i,y(a,c))}):b]},[null,null]),j=i[0];i=i[1];return j?this.where(j.name).equals(a[j.keyPath]).filter(i):c?this.filter(i):this.where(b).equals("")};a.prototype.filter=function(a){return this.toCollection().and(a)};a.prototype.count=function(a){return this.toCollection().count(a)};a.prototype.offset=function(a){return this.toCollection().offset(a)};a.prototype.limit=function(a){return this.toCollection().limit(a)};a.prototype.each=function(a){return this.toCollection().each(a)};a.prototype.toArray=function(a){return this.toCollection().toArray(a)};a.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))};a.prototype.orderBy=function(a){return new this.db.Collection(new this.db.WhereClause(this,h(a)?"["+a.join("+")+"]":a))};a.prototype.reverse=function(){return this.toCollection().reverse()};a.prototype.mapToClass=function(a){this.schema.mappedClass=a;var b=function(b){if(!b)return b;var c=Object.create(a.prototype);for(var d in b)if(l(b,d))try{c[d]=b[d]}catch(a){}return c};this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook);this.schema.readHook=b;this.hook("reading",b);return a};a.prototype.defineClass=function(){function a(a){i(this,a)}return this.mapToClass(a)};a.prototype.add=function(a,b){var c=this,d=this.schema.primKey,e=d.auto,f=d.keyPath,g=a;f&&e&&(g=Yb(f)(a));return this._trans("readwrite",function(a){return c.core.mutate({trans:a,type:"add",keys:b!=null?[b]:null,values:[g]})}).then(function(a){return a.numFailures?L.reject(a.failures[0]):a.lastResult}).then(function(b){if(f)try{z(a,f,b)}catch(a){}return b})};a.prototype.update=function(a,b){if(typeof a==="object"&&!h(a)){var c=y(a,this.schema.primKey.keyPath);if(c===void 0)return R(new F.InvalidArgument("Given object does not contain its primary key"));try{typeof b!=="function"?f(b).forEach(function(c){z(a,c,b[c])}):b(a,{value:a,primKey:c})}catch(a){}return this.where(":id").equals(c).modify(b)}else return this.where(":id").equals(a).modify(b)};a.prototype.put=function(a,b){var c=this,d=this.schema.primKey,e=d.auto,f=d.keyPath,g=a;f&&e&&(g=Yb(f)(a));return this._trans("readwrite",function(a){return c.core.mutate({trans:a,type:"put",values:[g],keys:b!=null?[b]:null})}).then(function(a){return a.numFailures?L.reject(a.failures[0]):a.lastResult}).then(function(b){if(f)try{z(a,f,b)}catch(a){}return b})};a.prototype["delete"]=function(a){var b=this;return this._trans("readwrite",function(c){return b.core.mutate({trans:c,type:"delete",keys:[a]})}).then(function(a){return a.numFailures?L.reject(a.failures[0]):void 0})};a.prototype.clear=function(){var a=this;return this._trans("readwrite",function(b){return a.core.mutate({trans:b,type:"deleteRange",range:Xb})}).then(function(a){return a.numFailures?L.reject(a.failures[0]):void 0})};a.prototype.bulkGet=function(a){var b=this;return this._trans("readonly",function(c){return b.core.getMany({keys:a,trans:c}).then(function(a){return a.map(function(a){return b.hook.reading.fire(a)})})})};a.prototype.bulkAdd=function(b,c,d){var e=this,a=Array.isArray(c)?c:void 0;d=d||(a?void 0:c);var f=d?d.allKeys:void 0;return this._trans("readwrite",function(c){var d=e.schema.primKey,g=d.auto;d=d.keyPath;if(d&&a)throw new F.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(a&&a.length!==b.length)throw new F.InvalidArgument("Arguments objects and keys must have the same length");var h=b.length;g=d&&g?b.map(Yb(d)):b;return e.core.mutate({trans:c,type:"add",keys:a,values:g,wantResults:f}).then(function(a){var b=a.numFailures,c=a.results,d=a.lastResult;a=a.failures;c=f?c:d;if(b===0)return c;throw new xa(e.name+".bulkAdd(): "+b+" of "+h+" operations failed",a)})})};a.prototype.bulkPut=function(b,c,d){var e=this,a=Array.isArray(c)?c:void 0;d=d||(a?void 0:c);var f=d?d.allKeys:void 0;return this._trans("readwrite",function(c){var d=e.schema.primKey,g=d.auto;d=d.keyPath;if(d&&a)throw new F.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(a&&a.length!==b.length)throw new F.InvalidArgument("Arguments objects and keys must have the same length");var h=b.length;g=d&&g?b.map(Yb(d)):b;return e.core.mutate({trans:c,type:"put",keys:a,values:g,wantResults:f}).then(function(a){var b=a.numFailures,c=a.results,d=a.lastResult;a=a.failures;c=f?c:d;if(b===0)return c;throw new xa(e.name+".bulkPut(): "+b+" of "+h+" operations failed",a)})})};a.prototype.bulkDelete=function(a){var b=this,c=a.length;return this._trans("readwrite",function(c){return b.core.mutate({trans:c,type:"delete",keys:a})}).then(function(a){var d=a.numFailures,e=a.lastResult;a=a.failures;if(d===0)return e;throw new xa(b.name+".bulkDelete(): "+d+" of "+c+" operations failed",a)})};return a}();function $b(a){var b={},c=function(d,e){if(e){var c=arguments.length,f=new Array(c-1);while(--c)f[c-1]=arguments[c];b[d].subscribe.apply(null,f);return a}else if(typeof d==="string")return b[d]};c.addEventType=g;for(var d=1,e=arguments.length;d<e;++d)g(arguments[d]);return c;function g(a,d,e){if(typeof a==="object")return i(a);d||(d=Ha);e||(e=G);var f={subscribers:[],fire:e,subscribe:function(a){f.subscribers.indexOf(a)===-1&&(f.subscribers.push(a),f.fire=d(f.fire,a))},unsubscribe:function(a){f.subscribers=f.subscribers.filter(function(b){return b!==a}),f.fire=f.subscribers.reduce(d,e)}};b[a]=c[a]=f;return f}function i(a){f(a).forEach(function(b){var c=a[b];if(h(c))g(b,a[b][0],a[b][1]);else if(c==="asap")var d=g(b,Ca,function(){var a=arguments.length,b=new Array(a);while(a--)b[a]=arguments[a];d.subscribers.forEach(function(a){w(function(){a.apply(null,b)})})});else throw new F.InvalidArgument("Invalid event config")})}}function ac(a,b){p(b).from({prototype:a});return b}function bc(a){return ac(Zb.prototype,function(b,c,d){this.db=a,this._tx=d,this.name=b,this.schema=c,this.hook=a._allTables[b]?a._allTables[b].hook:$b(null,{creating:[Ea,G],reading:[Da,Ca],updating:[Ga,G],deleting:[Fa,G]})})}function cc(a,b){return!(a.filter||a.algorithm||a.or)&&(b?a.justLimit:!a.replayFilter)}function dc(a,b){a.filter=Wb(a.filter,b)}function ec(a,b,c){var d=a.replayFilter;a.replayFilter=d?function(){return Wb(d(),b())}:b;a.justLimit=c&&!d}function fc(a,b){a.isMatch=Wb(a.isMatch,b)}function gc(a,b){if(a.isPrimKey)return b.primaryKey;var c=b.getIndexByKeyPath(a.index);if(!c)throw new F.Schema("KeyPath "+a.index+" on object store "+b.name+" is not indexed");return c}function hc(a,b,c){var d=gc(a,b.schema);return b.openCursor({trans:c,values:!a.keysOnly,reverse:a.dir==="prev",unique:!!a.unique,query:{index:d,range:a.range}})}function ic(a,c,d,e){var f=a.replayFilter?Wb(a.filter,a.replayFilter()):a.filter;if(!a.or)return jc(hc(a,e,d),Wb(a.algorithm,f),c,!a.keysOnly&&a.valueMapper);else{var h={},i=function(a,b,d){if(!f||f(b,d,function(a){return b.stop(a)},function(a){return b.fail(a)})){var e=b.primaryKey,g=""+e;g==="[object ArrayBuffer]"&&(g=""+new Uint8Array(e));l(h,g)||(h[g]=!0,c(a,b,d))}};return(g||(g=b("Promise"))).all([a.or._iterate(i,d),jc(hc(a,e,d),a.algorithm,i,!a.keysOnly&&a.valueMapper)])}}function jc(a,b,c,d){var e=d?function(a,b,e){return c(d(a),b,e)}:c,f=M(e);return a.then(function(a){if(a)return a.start(function(){var c=function(){return a["continue"]()};(!b||b(a,function(a){return c=a},function(b){a.stop(b),c=G},function(b){a.fail(b),c=G}))&&f(a.value,a,function(a){return c=a});c()})})}function T(a,b){try{var c=mc(a),d=mc(b);if(c!==d){if(c==="Array")return 1;if(d==="Array")return-1;if(c==="binary")return 1;if(d==="binary")return-1;if(c==="string")return 1;if(d==="string")return-1;if(c==="Date")return 1;return d!=="Date"?NaN:-1}switch(c){case"number":case"Date":case"string":return a>b?1:a<b?-1:0;case"binary":return lc(nc(a),nc(b));case"Array":return kc(a,b)}}catch(a){}return NaN}function kc(a,b){var c=a.length,d=b.length,e=c<d?c:d;for(var f=0;f<e;++f){var g=T(a[f],b[f]);if(g!==0)return g}return c===d?0:c<d?-1:1}function lc(a,b){var c=a.length,d=b.length,e=c<d?c:d;for(var f=0;f<e;++f)if(a[f]!==b[f])return a[f]<b[f]?-1:1;return c===d?0:c<d?-1:1}function mc(a){var b=typeof a;if(b!=="object")return b;if(ArrayBuffer.isView(a))return"binary";b=ja(a);return b==="ArrayBuffer"?"binary":b}function nc(a){if(a instanceof Uint8Array)return a;return ArrayBuffer.isView(a)?new Uint8Array(a.buffer,a.byteOffset,a.byteLength):new Uint8Array(a)}var oc=function(){function a(){}a.prototype._read=function(a,b){var c=this._ctx;return c.error?c.table._trans(null,R.bind(null,c.error)):c.table._trans("readonly",a).then(b)};a.prototype._write=function(a){var b=this._ctx;return b.error?b.table._trans(null,R.bind(null,b.error)):b.table._trans("readwrite",a,"locked")};a.prototype._addAlgorithm=function(a){var b=this._ctx;b.algorithm=Wb(b.algorithm,a)};a.prototype._iterate=function(a,b){return ic(this._ctx,a,b,this._ctx.table.core)};a.prototype.clone=function(a){var b=Object.create(this.constructor.prototype),c=Object.create(this._ctx);a&&i(c,a);b._ctx=c;return b};a.prototype.raw=function(){this._ctx.valueMapper=null;return this};a.prototype.each=function(a){var b=this._ctx;return this._read(function(c){return ic(b,a,c,b.table.core)})};a.prototype.count=function(a){var b=this;return this._read(function(a){var c=b._ctx,d=c.table.core;if(cc(c,!0))return d.count({trans:a,query:{index:gc(c,d.schema),range:c.range}}).then(function(a){return Math.min(a,c.limit)});else{var e=0;return ic(c,function(){++e;return!1},a,d).then(function(){return e})}}).then(a)};a.prototype.sortBy=function(a,b){var c=a.split(".").reverse(),d=c[0],e=c.length-1;function f(a,b){return b?f(a[c[b]],b-1):a[d]}var g=this._ctx.dir==="next"?1:-1;function h(a,b){a=f(a,e);b=f(b,e);return a<b?-g:a>b?g:0}return this.toArray(function(a){return a.sort(h)}).then(b)};a.prototype.toArray=function(a){var b=this;return this._read(function(a){var c=b._ctx;if(c.dir==="next"&&cc(c,!0)&&c.limit>0){var d=c.valueMapper,e=gc(c,c.table.core.schema);return c.table.core.query({trans:a,limit:c.limit,values:!0,query:{index:e,range:c.range}}).then(function(a){a=a.result;return d?a.map(d):a})}else{var f=[];return ic(c,function(a){return f.push(a)},a,c.table.core).then(function(){return f})}},a)};a.prototype.offset=function(a){var b=this._ctx;if(a<=0)return this;b.offset+=a;cc(b)?ec(b,function(){var b=a;return function(a,c){if(b===0)return!0;if(b===1){--b;return!1}c(function(){a.advance(b),b=0});return!1}}):ec(b,function(){var b=a;return function(){return--b<0}});return this};a.prototype.limit=function(a){this._ctx.limit=Math.min(this._ctx.limit,a);ec(this._ctx,function(){var b=a;return function(a,c,d){--b<=0&&c(d);return b>=0}},!0);return this};a.prototype.until=function(a,b){dc(this._ctx,function(c,d,e){if(a(c.value)){d(e);return b}else return!0});return this};a.prototype.first=function(a){return this.limit(1).toArray(function(a){return a[0]}).then(a)};a.prototype.last=function(a){return this.reverse().first(a)};a.prototype.filter=function(a){dc(this._ctx,function(b){return a(b.value)});fc(this._ctx,a);return this};a.prototype.and=function(a){return this.filter(a)};a.prototype.or=function(a){return new this.db.WhereClause(this._ctx.table,a,this)};a.prototype.reverse=function(){this._ctx.dir=this._ctx.dir==="prev"?"next":"prev";this._ondirectionchange&&this._ondirectionchange(this._ctx.dir);return this};a.prototype.desc=function(){return this.reverse()};a.prototype.eachKey=function(a){var b=this._ctx;b.keysOnly=!b.isMatch;return this.each(function(b,c){a(c.key,c)})};a.prototype.eachUniqueKey=function(a){this._ctx.unique="unique";return this.eachKey(a)};a.prototype.eachPrimaryKey=function(a){var b=this._ctx;b.keysOnly=!b.isMatch;return this.each(function(b,c){a(c.primaryKey,c)})};a.prototype.keys=function(a){var b=this._ctx;b.keysOnly=!b.isMatch;var c=[];return this.each(function(a,b){c.push(b.key)}).then(function(){return c}).then(a)};a.prototype.primaryKeys=function(a){var b=this._ctx;if(b.dir==="next"&&cc(b,!0)&&b.limit>0)return this._read(function(a){var c=gc(b,b.table.core.schema);return b.table.core.query({trans:a,values:!1,limit:b.limit,query:{index:c,range:b.range}})}).then(function(a){a=a.result;return a}).then(a);b.keysOnly=!b.isMatch;var c=[];return this.each(function(a,b){c.push(b.primaryKey)}).then(function(){return c}).then(a)};a.prototype.uniqueKeys=function(a){this._ctx.unique="unique";return this.keys(a)};a.prototype.firstKey=function(a){return this.limit(1).keys(function(a){return a[0]}).then(a)};a.prototype.lastKey=function(a){return this.reverse().firstKey(a)};a.prototype.distinct=function(){var a=this._ctx;a=a.index&&a.table.schema.idxByName[a.index];if(!a||!a.multi)return this;var b={};dc(this._ctx,function(a){a=a.primaryKey.toString();var c=l(b,a);b[a]=!0;return!c});return this};a.prototype.modify=function(a){var c=this,d=this._ctx;return this._write(function(e){var h;if(typeof a==="function")h=a;else{var i=f(a),j=i.length;h=function(b){var c=!1;for(var d=0;d<j;++d){var e=i[d],f=a[e];y(b,e)!==f&&(z(b,e,f),c=!0)}return c}}var k=d.table.core,l=k.schema.primaryKey,m=l.outbound,n=l.extractKey,o=c.db._options.modifyChunkSize||200,p=[],q=0,r=[],s=function(a,b){var c=b.failures;b=b.numFailures;q+=a-b;for(a=0,b=f(c);a<b.length;a++){var d=b[a];p.push(c[d])}};return c.clone().primaryKeys().then(function(c){var f=function f(i){var j=Math.min(o,c.length-i);return k.getMany({trans:e,keys:c.slice(i,i+j),cache:"immutable"}).then(function(l){var p=[],q=[],r=m?[]:null,t=[];for(var u=0;u<j;++u){var v=l[u],w={value:ga(v),primKey:c[i+u]};h.call(w,w.value,w)!==!1&&(w.value==null?t.push(c[i+u]):!m&&T(n(v),n(w.value))!==0?(t.push(c[i+u]),p.push(w.value)):(q.push(w.value),m&&r.push(c[i+u])))}var x=cc(d)&&d.limit===Infinity&&(typeof a!=="function"||a===pc)&&{index:d.index,range:d.range};return(g||(g=b("Promise"))).resolve(p.length>0&&k.mutate({trans:e,type:"add",values:p}).then(function(a){for(var b in a.failures)t.splice(parseInt(b),1);s(p.length,a)})).then(function(){return(q.length>0||x&&typeof a==="object")&&k.mutate({trans:e,type:"put",keys:r,values:q,criteria:x,changeSpec:typeof a!=="function"&&a}).then(function(a){return s(q.length,a)})}).then(function(){return(t.length>0||x&&a===pc)&&k.mutate({trans:e,type:"delete",keys:t,criteria:x}).then(function(a){return s(t.length,a)})}).then(function(){return c.length>i+j&&f(i+o)})})};return f(0).then(function(){if(p.length>0)throw new wa("Error modifying one or more objects",p,q,r);return c.length})})})};a.prototype["delete"]=function(){var a=this._ctx,b=a.range;return cc(a)&&(a.isPrimKey&&!Rb||b.type===3)?this._write(function(c){var d=a.table.core.schema.primaryKey,e=b;return a.table.core.count({trans:c,query:{index:d,range:e}}).then(function(b){return a.table.core.mutate({trans:c,type:"deleteRange",range:e}).then(function(a){var c=a.failures;a.lastResult;a.results;a=a.numFailures;if(a)throw new wa("Could not delete some values",Object.keys(c).map(function(a){return c[a]}),b-a);return b-a})})}):this.modify(pc)};return a}(),pc=function(a,b){return b.value=null};function qc(a){return ac(oc.prototype,function(b,c){this.db=a;var d=Xb,e=null;if(c)try{d=c()}catch(a){e=a}c=b._ctx;b=c.table;var f=b.hook.reading.fire;this._ctx={table:b,index:c.index,isPrimKey:!c.index||b.schema.primKey.keyPath&&c.index===b.schema.primKey.name,range:d,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:Infinity,error:e,or:c.or,valueMapper:f!==Ca?f:null}})}function rc(a,b){return a<b?-1:a===b?0:1}function sc(a,b){return a>b?-1:a===b?0:1}function U(a,b,c){a=a instanceof zc?new a.Collection(a):a;a._ctx.error=c?new c(b):new TypeError(b);return a}function tc(a){return new a.Collection(a,function(){return yc("")}).limit(0)}function uc(a){return a==="next"?function(a){return a.toUpperCase()}:function(a){return a.toLowerCase()}}function vc(a){return a==="next"?function(a){return a.toLowerCase()}:function(a){return a.toUpperCase()}}function wc(b,c,d,e,a,f){var g=Math.min(b.length,e.length),h=-1;for(var i=0;i<g;++i){var j=c[i];if(j!==e[i]){if(a(b[i],d[i])<0)return b.substr(0,i)+d[i]+d.substr(i+1);if(a(b[i],e[i])<0)return b.substr(0,i)+e[i]+d.substr(i+1);return h>=0?b.substr(0,h)+c[h]+d.substr(h+1):null}a(b[i],j)<0&&(h=i)}if(g<e.length&&f==="next")return b+d.substr(b.length);return g<b.length&&f==="prev"?b.substr(0,d.length):h<0?null:b.substr(0,h)+e[h]+d.substr(h+1)}function xc(a,b,c,d){var e,f,g,h,i,j,k,l=c.length;if(!c.every(function(a){return typeof a==="string"}))return U(a,Nb);function m(a){e=uc(a);f=vc(a);g=a==="next"?rc:sc;var b=c.map(function(a){return{lower:f(a),upper:e(a)}}).sort(function(a,b){return g(a.lower,b.lower)});h=b.map(function(a){return a.upper});i=b.map(function(a){return a.lower});j=a;k=a==="next"?"":d}m("next");a=new a.Collection(a,function(){return V(h[0],i[l-1]+d)});a._ondirectionchange=function(a){m(a)};var n=0;a._addAlgorithm(function(a,c,d){var e=a.key;if(typeof e!=="string")return!1;var m=f(e);if(b(m,i,n))return!0;else{var o=null;for(var p=n;p<l;++p){var q=wc(e,m,h[p],i[p],g,j);q===null&&o===null?n=p+1:(o===null||g(o,q)>0)&&(o=q)}o!==null?c(function(){a["continue"](o+k)}):c(d);return!1}});return a}function V(a,b,c,d){return{type:2,lower:a,upper:b,lowerOpen:c,upperOpen:d}}function yc(a){return{type:1,lower:a,upper:a}}var zc=function(){function a(){}Object.defineProperty(a.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0});a.prototype.between=function(a,b,c,d){c=c!==!1;d=d===!0;try{return this._cmp(a,b)>0||this._cmp(a,b)===0&&(c||d)&&!(c&&d)?tc(this):new this.Collection(this,function(){return V(a,b,!c,!d)})}catch(a){return U(this,S)}};a.prototype.equals=function(a){return a==null?U(this,S):new this.Collection(this,function(){return yc(a)})};a.prototype.above=function(a){return a==null?U(this,S):new this.Collection(this,function(){return V(a,void 0,!0)})};a.prototype.aboveOrEqual=function(a){return a==null?U(this,S):new this.Collection(this,function(){return V(a,void 0,!1)})};a.prototype.below=function(a){return a==null?U(this,S):new this.Collection(this,function(){return V(void 0,a,!1,!0)})};a.prototype.belowOrEqual=function(a){return a==null?U(this,S):new this.Collection(this,function(){return V(void 0,a)})};a.prototype.startsWith=function(a){return typeof a!=="string"?U(this,Nb):this.between(a,a+Lb,!0,!0)};a.prototype.startsWithIgnoreCase=function(a){return a===""?this.startsWith(a):xc(this,function(a,b){return a.indexOf(b[0])===0},[a],Lb)};a.prototype.equalsIgnoreCase=function(a){return xc(this,function(a,b){return a===b[0]},[a],"")};a.prototype.anyOfIgnoreCase=function(){var a=C.apply(ma,arguments);return a.length===0?tc(this):xc(this,function(a,b){return b.indexOf(a)!==-1},a,"")};a.prototype.startsWithAnyOfIgnoreCase=function(){var a=C.apply(ma,arguments);return a.length===0?tc(this):xc(this,function(a,b){return b.some(function(b){return a.indexOf(b)===0})},a,Lb)};a.prototype.anyOf=function(){var a=this,b=C.apply(ma,arguments),c=this._cmp;try{b.sort(c)}catch(a){return U(this,S)}if(b.length===0)return tc(this);var d=new this.Collection(this,function(){return V(b[0],b[b.length-1])});d._ondirectionchange=function(d){c=d==="next"?a._ascending:a._descending,b.sort(c)};var e=0;d._addAlgorithm(function(a,d,f){var g=a.key;while(c(g,b[e])>0){++e;if(e===b.length){d(f);return!1}}if(c(g,b[e])===0)return!0;else{d(function(){a["continue"](b[e])});return!1}});return d};a.prototype.notEqual=function(a){return this.inAnyRange([[Mb,a],[a,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})};a.prototype.noneOf=function(){var a=C.apply(ma,arguments);if(a.length===0)return new this.Collection(this);try{a.sort(this._ascending)}catch(a){return U(this,S)}var b=a.reduce(function(a,b){return a?a.concat([[a[a.length-1][1],b]]):[[Mb,b]]},null);b.push([a[a.length-1],this.db._maxKey]);return this.inAnyRange(b,{includeLowers:!1,includeUppers:!1})};a.prototype.inAnyRange=function(c,d){var e=this,a=this._cmp,f=this._ascending,g=this._descending,h=this._min,i=this._max;if(c.length===0)return tc(this);if(!c.every(function(a){return a[0]!==void 0&&a[1]!==void 0&&f(a[0],a[1])<=0}))return U(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",F.InvalidArgument);var j=!d||d.includeLowers!==!1,k=d&&d.includeUppers===!0;function b(b,c){var d=0,e=b.length;for(;d<e;++d){var f=b[d];if(a(c[0],f[1])<0&&a(c[1],f[0])>0){f[0]=h(f[0],c[0]);f[1]=i(f[1],c[1]);break}}d===e&&b.push(c);return b}var l=f;function m(a,b){return l(a[0],b[0])}var n;try{n=c.reduce(b,[]),n.sort(m)}catch(a){return U(this,S)}var o=0,p=k?function(a){return f(a,n[o][1])>0}:function(a){return f(a,n[o][1])>=0},q=j?function(a){return g(a,n[o][0])>0}:function(a){return g(a,n[o][0])>=0};function r(a){return!p(a)&&!q(a)}var s=p;d=new this.Collection(this,function(){return V(n[0][0],n[n.length-1][1],!j,!k)});d._ondirectionchange=function(a){a==="next"?(s=p,l=f):(s=q,l=g),n.sort(m)};d._addAlgorithm(function(a,b,c){var d=a.key;while(s(d)){++o;if(o===n.length){b(c);return!1}}if(r(d))return!0;else if(e._cmp(d,n[o][1])===0||e._cmp(d,n[o][0])===0)return!1;else{b(function(){l===f?a["continue"](n[o][0]):a["continue"](n[o][1])});return!1}});return d};a.prototype.startsWithAnyOf=function(){var a=C.apply(ma,arguments);if(!a.every(function(a){return typeof a==="string"}))return U(this,"startsWithAnyOf() only works with strings");return a.length===0?tc(this):this.inAnyRange(a.map(function(a){return[a,a+Lb]}))};return a}();function Ac(a){return ac(zc.prototype,function(b,c,d){this.db=a;this._ctx={table:b,index:c===":id"?null:c,or:d};var e=a._deps.indexedDB;if(!e)throw new F.MissingAPI();this._cmp=this._ascending=e.cmp.bind(e);this._descending=function(a,b){return e.cmp(b,a)};this._max=function(a,b){return e.cmp(a,b)>0?a:b};this._min=function(a,b){return e.cmp(a,b)<0?a:b};this._IDBKeyRange=a._deps.IDBKeyRange})}function W(a){return M(function(b){Bc(b);a(b.target.error);return!1})}function Bc(a){a.stopPropagation&&a.stopPropagation(),a.preventDefault&&a.preventDefault()}var Cc="storagemutated",X="x-storagemutated-1",Y=$b(null,Cc),Dc=function(){function a(){}a.prototype._lock=function(){v(!J.global);++this._reculock;this._reculock===1&&!J.global&&(J.lockOwnerFor=this);return this};a.prototype._unlock=function(){v(!J.global);if(--this._reculock===0){J.global||(J.lockOwnerFor=null);while(this._blockedFuncs.length>0&&!this._locked()){var a=this._blockedFuncs.shift();try{Eb(a[1],a[0])}catch(a){}}}return this};a.prototype._locked=function(){return this._reculock&&J.lockOwnerFor!==this};a.prototype.create=function(a){var b=this;if(!this.mode)return this;var c=this.db.idbdb,d=this.db._state.dbOpenError;v(!this.idbtrans);if(!a&&!c)switch(d&&d.name){case"DatabaseClosedError":throw new F.DatabaseClosed(d);case"MissingAPIError":throw new F.MissingAPI(d.message,d);default:throw new F.OpenFailed(d)}if(!this.active)throw new F.TransactionInactive();v(this._completion._state===null);a=this.idbtrans=a||(this.db.core?this.db.core.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}):c.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}));a.onerror=M(function(c){Bc(c),b._reject(a.error)});a.onabort=M(function(c){Bc(c),b.active&&b._reject(new F.Abort(a.error)),b.active=!1,b.on("abort").fire(c)});a.oncomplete=M(function(){b.active=!1,b._resolve(),"mutatedParts"in a&&Y.storagemutated.fire(a.mutatedParts)});return this};a.prototype._promise=function(a,b,c){var d=this;if(a==="readwrite"&&this.mode!=="readwrite")return R(new F.ReadOnly("Transaction is readonly"));if(!this.active)return R(new F.TransactionInactive());if(this._locked())return new L(function(e,f){d._blockedFuncs.push([function(){d._promise(a,b,c).then(e,f)},J])});else if(c)return O(function(){var a=new L(function(a,c){d._lock();var e=b(a,c,d);e&&e.then&&e.then(a,c)});a["finally"](function(){return d._unlock()});a._lib=!0;return a});else{var e=new L(function(a,c){var e=b(a,c,d);e&&e.then&&e.then(a,c)});e._lib=!0;return e}};a.prototype._root=function(){return this.parent?this.parent._root():this};a.prototype.waitFor=function(a){var b=this._root(),c=L.resolve(a);if(b._waitingFor)b._waitingFor=b._waitingFor.then(function(){return c});else{b._waitingFor=c;b._waitingQueue=[];var d=b.idbtrans.objectStore(b.storeNames[0]);(function a(){++b._spinCount;while(b._waitingQueue.length)b._waitingQueue.shift()();b._waitingFor&&(d.get(-Infinity).onsuccess=a)})()}var e=b._waitingFor;return new L(function(a,d){c.then(function(c){return b._waitingQueue.push(M(a.bind(null,c)))},function(a){return b._waitingQueue.push(M(d.bind(null,a)))})["finally"](function(){b._waitingFor===e&&(b._waitingFor=null)})})};a.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new F.Abort()))};a.prototype.table=function(a){var b=this._memoizedTables||(this._memoizedTables={});if(l(b,a))return b[a];var c=this.schema[a];if(!c)throw new F.NotFound("Table "+a+" not part of transaction");c=new this.db.Table(a,c,this);c.core=this.db.core.table(a);b[a]=c;return c};return a}();function Ec(a){return ac(Dc.prototype,function(b,c,d,e,f){var g=this;this.db=a;this.mode=b;this.storeNames=c;this.schema=d;this.chromeTransactionDurability=e;this.idbtrans=null;this.on=$b(this,"complete","error","abort");this.parent=f||null;this.active=!0;this._reculock=0;this._blockedFuncs=[];this._resolve=null;this._reject=null;this._waitingFor=null;this._waitingQueue=null;this._spinCount=0;this._completion=new L(function(a,b){g._resolve=a,g._reject=b});this._completion.then(function(){g.active=!1,g.on.complete.fire()},function(a){var b=g.active;g.active=!1;g.on.error.fire(a);g.parent?g.parent._reject(a):b&&g.idbtrans&&g.idbtrans.abort();return R(a)})})}function Fc(a,b,c,d,e,f,g){return{name:a,keyPath:b,unique:c,multi:d,auto:e,compound:f,src:(c&&!g?"&":"")+(d?"*":"")+(e?"++":"")+Gc(b)}}function Gc(a){return typeof a==="string"?a:a?"["+[].join.call(a,"+")+"]":""}function Hc(a,b,c){return{name:a,primKey:b,indexes:c,mappedClass:null,idxByName:x(c,function(a){return[a.name,a]})}}function Ic(a){return a.length===1?a[0]:a}var Jc=function(a){try{a.only([[]]);Jc=function(){return[[]]};return[[]]}catch(a){Jc=function(){return Lb};return Lb}};function Kc(a){if(a==null)return function(){return void 0};else if(typeof a==="string")return Lc(a);else return function(b){return y(b,a)}}function Lc(a){var b=a.split(".");if(b.length===1)return function(b){return b[a]};else return function(b){return y(b,a)}}function Mc(a){return[].slice.call(a)}var Nc=0;function Oc(a){return a==null?":id":typeof a==="string"?a:"["+a.join("+")+"]"}function Pc(a,c,d){function e(a,b){var c=Mc(a.objectStoreNames);return{schema:{name:a.name,tables:c.map(function(a){return b.objectStore(a)}).map(function(a){var b=a.keyPath,c=a.autoIncrement,d=h(b),e=b==null,f={};e={name:a.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:e,compound:d,keyPath:b,autoIncrement:c,unique:!0,extractKey:Kc(b)},indexes:Mc(a.indexNames).map(function(b){return a.index(b)}).map(function(b){var c=b.name,d=b.unique,e=b.multiEntry;b=b.keyPath;var a=h(b);c={name:c,compound:a,keyPath:b,unique:d,multiEntry:e,extractKey:Kc(b)};f[Oc(b)]=c;return c}),getIndexByKeyPath:function(a){return f[Oc(a)]}};f[":id"]=e.primaryKey;b!=null&&(f[Oc(b)]=e.primaryKey);return e})},hasGetAll:c.length>0&&"getAll"in b.objectStore(c[0])&&!(typeof navigator!=="undefined"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}}function f(a){if(a.type===3)return null;if(a.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var b=a.lower,d=a.upper,e=a.lowerOpen;a=a.upperOpen;b=b===void 0?d===void 0?null:c.upperBound(d,!!a):d===void 0?c.lowerBound(b,!!e):c.bound(b,d,!!e,!!a);return b}function i(c){var d=c.name;function e(e){var h=e.trans,c=e.type,a=e.keys,i=e.values,j=e.range;return new(g||(g=b("Promise")))(function(b,e){b=M(b);e=h.objectStore(d);var g=e.keyPath==null,k=c==="put"||c==="add";if(!k&&c!=="delete"&&c!=="deleteRange")throw new Error("Invalid operation type: "+c);var l=(a||i||{length:1}).length;if(a&&i&&a.length!==i.length)throw new Error("Given keys array must have same length as given values array.");if(l===0)return b({numFailures:0,failures:{},results:[],lastResult:void 0});var m,n=[],o=[],p=0,q=function(a){++p,Bc(a)};if(c==="deleteRange"){if(j.type===4)return b({numFailures:p,failures:o,results:[],lastResult:void 0});j.type===3?n.push(m=e.clear()):n.push(m=e["delete"](f(j)))}else{g=k?g?[i,a]:[i,null]:[a,null];var r=g[0];g=g[1];if(k)for(k=0;k<l;++k)n.push(m=g&&g[k]!==void 0?e[c](r[k],g[k]):e[c](r[k])),m.onerror=q;else for(k=0;k<l;++k)n.push(m=e[c](r[k])),m.onerror=q}var s=function(d){d=d.target.result;n.forEach(function(a,b){return a.error!=null&&(o[b]=a.error)});b({numFailures:p,failures:o,results:c==="delete"?a:n.map(function(a){return a.result}),lastResult:d})};m.onerror=function(a){q(a),s(a)};m.onsuccess=s})}function a(c){var e=c.trans,h=c.values,a=c.query,i=c.reverse,j=c.unique;return new(g||(g=b("Promise")))(function(c,k){c=M(c);var l=a.index,m=a.range,n=e.objectStore(d);n=l.isPrimaryKey?n:n.index(l.name);l=i?j?"prevunique":"prev":j?"nextunique":"next";var o=h||!("openKeyCursor"in n)?n.openCursor(f(m),l):n.openKeyCursor(f(m),l);o.onerror=W(k);o.onsuccess=M(function(a){var d=o.result;if(!d){c(null);return}d.___id=++Nc;d.done=!1;var f=d["continue"].bind(d),h=d.continuePrimaryKey;h&&(h=h.bind(d));var i=d.advance.bind(d);a=function(){throw new Error("Cursor not started")};var j=function(){throw new Error("Cursor not stopped")};d.trans=e;d.stop=d["continue"]=d.continuePrimaryKey=d.advance=a;d.fail=M(k);d.next=function(){var a=this,b=1;return this.start(function(){return b--?a["continue"]():a.stop()}).then(function(){return a})};d.start=function(a){var c=new(g||(g=b("Promise")))(function(a,b){a=M(a),o.onerror=W(b),d.fail=b,d.stop=function(b){d.stop=d["continue"]=d.continuePrimaryKey=d.advance=j,a(b)}}),e=function(){if(o.result)try{a()}catch(a){d.fail(a)}else d.done=!0,d.start=function(){throw new Error("Cursor behind last entry")},d.stop()};o.onsuccess=M(function(a){o.onsuccess=e,e()});d["continue"]=f;d.continuePrimaryKey=h;d.advance=i;e();return c};c(d)},k)})}function h(a){return function(c){return new(g||(g=b("Promise")))(function(e,g){e=M(e);var h=c.trans,i=c.values,j=c.limit,b=c.query,k=j===Infinity?void 0:j,l=b.index;b=b.range;h=h.objectStore(d);h=l.isPrimaryKey?h:h.index(l.name);l=f(b);if(j===0)return e({result:[]});if(a){b=i?h.getAll(l,k):h.getAllKeys(l,k);b.onsuccess=function(a){return e({result:a.target.result})};b.onerror=W(g)}else{var m=0,n=i||!("openKeyCursor"in h)?h.openCursor(l):h.openKeyCursor(l),o=[];n.onsuccess=function(a){a=n.result;if(!a)return e({result:o});o.push(i?a.value:a.primaryKey);if(++m===j)return e({result:o});a["continue"]()};n.onerror=W(g)}})}}return{name:d,schema:c,mutate:e,getMany:function(c){var e=c.trans,a=c.keys;return new(g||(g=b("Promise")))(function(b,c){b=M(b);var f=e.objectStore(d),g=a.length,h=new Array(g),i=0,j=0,k=function(a){a=a.target;(h[a._pos]=a.result)!=null;++j===i&&b(h)};c=W(c);for(var l=0;l<g;++l){var m=a[l];m!=null&&(m=f.get(a[l]),m._pos=l,m.onsuccess=k,m.onerror=c,++i)}i===0&&b(h)})},get:function(a){var c=a.trans,e=a.key;return new(g||(g=b("Promise")))(function(a,b){a=M(a);var f=c.objectStore(d);f=f.get(e);f.onsuccess=function(b){return a(b.target.result)};f.onerror=W(b)})},query:h(j),openCursor:a,count:function(c){var a=c.query,e=c.trans,h=a.index,i=a.range;return new(g||(g=b("Promise")))(function(a,b){var c=e.objectStore(d);c=h.isPrimaryKey?c:c.index(h.name);var g=f(i);g=g?c.count(g):c.count();g.onsuccess=M(function(b){return a(b.target.result)});g.onerror=W(b)})}}}e=e(a,d);d=e.schema;var j=e.hasGetAll;e=d.tables.map(function(a){return i(a)});var k={};e.forEach(function(a){return k[a.name]=a});return{stack:"dbcore",transaction:a.transaction.bind(a),table:function(a){var b=k[a];if(!b)throw new Error("Table '"+a+"' not found");return k[a]},MIN_KEY:-Infinity,MAX_KEY:Jc(c),schema:d}}function Qc(a,b){return b.reduce(function(a,b){b=b.create;return c(c({},a),b(a))},a)}function Rc(a,b,c,d){var e=c.IDBKeyRange;c.indexedDB;c=Qc(Pc(b,e,d),a.dbcore);return{dbcore:c}}function Sc(a,b){var c=a._novip;a=b.db;a=Rc(c._middlewares,a,c._deps,b);c.core=a.dbcore;c.tables.forEach(function(a){var b=a.name;c.core.schema.tables.some(function(a){return a.name===b})&&(a.core=c.core.table(b),c[b]instanceof c.Table&&(c[b].core=a.core))})}function Tc(a,b,c,d){var e=a._novip;c.forEach(function(a){var c=d[a];b.forEach(function(b){var d=r(b,a);(!d||"value"in d&&d.value===void 0)&&(b===e.Transaction.prototype||b instanceof e.Transaction?o(b,a,{get:function(){return this.table(a)},set:function(b){n(this,a,{value:b,writable:!0,configurable:!0,enumerable:!0})}}):b[a]=new e.Table(a,c))})})}function Uc(a,b){var c=a._novip;b.forEach(function(a){for(var b in a)a[b]instanceof c.Table&&delete a[b]})}function Vc(a,b){return a._cfg.version-b._cfg.version}function Wc(a,b,c,d){var e=a._dbSchema,g=a._createTransaction("readwrite",a._storeNames,e);g.create(c);g._completion["catch"](d);var h=g._reject.bind(g),i=J.transless||J;O(function(){J.trans=g,J.transless=i,b===0?(f(e).forEach(function(a){Zc(c,a,e[a].primKey,e[a].indexes)}),Sc(a,c),L.follow(function(){return a.on.populate.fire(g)})["catch"](h)):Xc(a,b,g,c)["catch"](h)})}function Xc(a,b,c,d){var e=a._novip,g=[];a=e._versions;var h=e._dbSchema=cd(e,e.idbdb,d),i=!1;a=a.filter(function(a){return a._cfg.version>=b});a.forEach(function(a){g.push(function(){var g=h,j=a._cfg.dbschema;fd(e,g,d);fd(e,j,d);h=e._dbSchema=j;var k=Yc(g,j);k.add.forEach(function(a){Zc(d,a[0],a[1].primKey,a[1].indexes)});k.change.forEach(function(a){if(a.recreate)throw new F.Upgrade("Not yet support for changing primary key");else{var b=d.objectStore(a.name);a.add.forEach(function(a){return bd(b,a)});a.change.forEach(function(a){b.deleteIndex(a.name),bd(b,a)});a.del.forEach(function(a){return b.deleteIndex(a)})}});var l=a._cfg.contentUpgrade;if(l&&a._cfg.version>b){Sc(e,d);c._memoizedTables={};i=!0;var m=ca(j);k.del.forEach(function(a){m[a]=g[a]});Uc(e,[e.Transaction.prototype]);Tc(e,[e.Transaction.prototype],f(m),m);c.schema=m;var n=na(l);n&&zb();var o;j=L.follow(function(){o=l(c);if(o&&n){var a=P.bind(null,null);o.then(a,a)}});return o&&typeof o.then==="function"?L.resolve(o):j.then(function(){return o})}}),g.push(function(b){if(!i||!Qb){var d=a._cfg.dbschema;ad(d,b)}Uc(e,[e.Transaction.prototype]);Tc(e,[e.Transaction.prototype],e._storeNames,e._dbSchema);c.schema=e._dbSchema})});function j(){return g.length?L.resolve(g.shift()(c.idbtrans)).then(j):L.resolve()}return j().then(function(){$c(h,d)})}function Yc(a,b){var c={del:[],add:[],change:[]},d;for(d in a)b[d]||c.del.push(d);for(d in b){var e=a[d],f=b[d];if(!e)c.add.push([d,f]);else{var g={name:d,def:f,recreate:!1,del:[],add:[],change:[]};if(""+(e.primKey.keyPath||"")!==""+(f.primKey.keyPath||"")||e.primKey.auto!==f.primKey.auto&&!Pb)g.recreate=!0,c.change.push(g);else{e=e.idxByName;f=f.idxByName;var h;for(h in e)f[h]||g.del.push(h);for(h in f){var i=e[h],j=f[h];!i?g.add.push(j):i.src!==j.src&&g.change.push(j)}(g.del.length>0||g.add.length>0||g.change.length>0)&&c.change.push(g)}}}return c}function Zc(a,b,c,d){var e=a.db.createObjectStore(b,c.keyPath?{keyPath:c.keyPath,autoIncrement:c.auto}:{autoIncrement:c.auto});d.forEach(function(a){return bd(e,a)});return e}function $c(a,b){f(a).forEach(function(c){b.db.objectStoreNames.contains(c)||Zc(b,c,a[c].primKey,a[c].indexes)})}function ad(a,b){[].slice.call(b.db.objectStoreNames).forEach(function(c){return a[c]==null&&b.db.deleteObjectStore(c)})}function bd(a,b){a.createIndex(b.name,b.keyPath,{unique:b.unique,multiEntry:b.multi})}function cd(a,b,c){var d={};a=t(b.objectStoreNames,0);a.forEach(function(a){var b=c.objectStore(a),e=b.keyPath,f=Fc(Gc(e),e||"",!1,!1,!!b.autoIncrement,e&&typeof e!=="string",!0),g=[];for(var h=0;h<b.indexNames.length;++h){var i=b.index(b.indexNames[h]);e=i.keyPath;i=Fc(i.name,e,!!i.unique,!!i.multiEntry,!1,e&&typeof e!=="string",!1);g.push(i)}d[a]=Hc(a,f,g)});return d}function dd(a,b,c){a=a._novip;a.verno=b.version/10;c=a._dbSchema=cd(a,b,c);a._storeNames=t(b.objectStoreNames,0);Tc(a,[a._allTables],f(c),c)}function ed(a,b){b=cd(a,a.idbdb,b);b=Yc(b,a._dbSchema);return!(b.add.length||b.change.some(function(a){return a.add.length||a.change.length}))}function fd(a,b,c){a=a._novip;var d=c.db.objectStoreNames;for(var f=0;f<d.length;++f){var g=d[f],h=c.objectStore(g);a._hasGetAll="getAll"in h;for(var i=0;i<h.indexNames.length;++i){var j=h.indexNames[i],k=h.index(j).keyPath;k=typeof k==="string"?k:"["+t(k).join("+")+"]";if(b[g]){var l=b[g].idxByName[k];l&&(l.name=j,delete b[g].idxByName[k],b[g].idxByName[j]=l)}}}typeof navigator!=="undefined"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&e.WorkerGlobalScope&&e instanceof e.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(a._hasGetAll=!1)}function gd(a){return a.split(",").map(function(a,b){a=a.trim();var c=a.replace(/([&*]|\+\+)/g,""),d=/^\[/.test(c)?c.match(/^\[(.*)\]$/)[1].split("+"):c;return Fc(c,d||null,/\&/.test(a),/\*/.test(a),/\+\+/.test(a),h(d),b===0)})}var hd=function(){function a(){}a.prototype._parseStoresSpec=function(a,b){f(a).forEach(function(c){if(a[c]!==null){var d=gd(a[c]),e=d.shift();if(e.multi)throw new F.Schema("Primary key cannot be multi-valued");d.forEach(function(a){if(a.auto)throw new F.Schema("Only primary key can be marked as autoIncrement (++)");if(!a.keyPath)throw new F.Schema("Index must have a name and cannot be an empty string")});b[c]=Hc(c,e,d)}})};a.prototype.stores=function(a){var b=this.db;this._cfg.storesSource=this._cfg.storesSource?i(this._cfg.storesSource,a):a;a=b._versions;var c={},d={};a.forEach(function(a){i(c,a._cfg.storesSource),d=a._cfg.dbschema={},a._parseStoresSpec(c,d)});b._dbSchema=d;Uc(b,[b._allTables,b,b.Transaction.prototype]);Tc(b,[b._allTables,b,b.Transaction.prototype,this._cfg.tables],f(d),d);b._storeNames=f(d);return this};a.prototype.upgrade=function(a){this._cfg.contentUpgrade=Ia(this._cfg.contentUpgrade||G,a);return this};return a}();function id(a){return ac(hd.prototype,function(b){this.db=a,this._cfg={version:b,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})}function jd(a,b){var c=a._dbNamesDB;c||(c=a._dbNamesDB=new Md(Tb,{addons:[],indexedDB:a,IDBKeyRange:b}),c.version(1).stores({dbnames:"name"}));return c.table("dbnames")}function kd(a){return a&&typeof a.databases==="function"}function ld(a){var c=a.indexedDB;a=a.IDBKeyRange;return kd(c)?(g||(g=b("Promise"))).resolve(c.databases()).then(function(a){return a.map(function(a){return a.name}).filter(function(a){return a!==Tb})}):jd(c,a).toCollection().primaryKeys()}function md(a,b){var c=a.indexedDB;a=a.IDBKeyRange;!kd(c)&&b!==Tb&&jd(c,a).put({name:b})["catch"](G)}function nd(a,b){var c=a.indexedDB;a=a.IDBKeyRange;!kd(c)&&b!==Tb&&jd(c,a)["delete"](b)["catch"](G)}function od(a){return O(function(){J.letThrough=!0;return a()})}function pd(){var a=!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent);if(!a||!indexedDB.databases)return(g||(g=b("Promise"))).resolve();var c;return new(g||(g=b("Promise")))(function(a){var b=function(){return indexedDB.databases()["finally"](a)};c=setInterval(b,100);b()})["finally"](function(){return clearInterval(c)})}function qd(a){var b=a._state,c=a._deps.indexedDB;if(b.isBeingOpened||a.idbdb)return b.dbReadyPromise.then(function(){return b.dbOpenError?R(b.dbOpenError):a});D&&(b.openCanceller._stackHolder=ra());b.isBeingOpened=!0;b.dbOpenError=null;b.openComplete=!1;var d=b.openCanceller;function e(){if(b.openCanceller!==d)throw new F.DatabaseClosed("db.open() was cancelled")}var f=b.dbReadyResolve,g=null,h=!1;return L.race([d,(typeof navigator==="undefined"?L.resolve():pd()).then(function(){return new L(function(d,f){e();if(!c)throw new F.MissingAPI();var i=a.name,j=b.autoSchema?c.open(i):c.open(i,Math.round(a.verno*10));if(!j)throw new F.MissingAPI();j.onerror=W(f);j.onblocked=M(a._fireOnBlocked);j.onupgradeneeded=M(function(d){g=j.transaction;if(b.autoSchema&&!a._options.allowEmptyDB){j.onerror=Bc;g.abort();j.result.close();var e=c.deleteDatabase(i);e.onsuccess=e.onerror=M(function(){f(new F.NoSuchDatabase("Database "+i+" doesnt exist"))})}else{g.onerror=W(f);e=d.oldVersion>Math.pow(2,62)?0:d.oldVersion;h=e<1;a._novip.idbdb=j.result;Wc(a,e/10,g,f)}},f);j.onsuccess=M(function(){g=null;var c=a._novip.idbdb=j.result,e=t(c.objectStoreNames);if(e.length>0)try{e=c.transaction(Ic(e),"readonly");b.autoSchema?dd(a,c,e):(fd(a,a._dbSchema,e),!ed(a,e));Sc(a,e)}catch(a){}Ob.push(a);c.onversionchange=M(function(c){b.vcFired=!0,a.on("versionchange").fire(c)});c.onclose=M(function(b){a.on("close").fire(b)});h&&md(a._deps,i);d()},f)})})]).then(function(){e();b.onReadyBeingFired=[];return L.resolve(od(function(){return a.on.ready.fire(a.vip)})).then(function c(){if(b.onReadyBeingFired.length>0){var d=b.onReadyBeingFired.reduce(Ia,G);b.onReadyBeingFired=[];return L.resolve(od(function(){return d(a.vip)})).then(c)}})})["finally"](function(){b.onReadyBeingFired=null,b.isBeingOpened=!1}).then(function(){return a})["catch"](function(c){b.dbOpenError=c;try{g&&g.abort()}catch(a){}d===b.openCanceller&&a._close();return R(c)})["finally"](function(){b.openComplete=!0,f()})}function rd(a){var c=function(b){return a.next(b)},d=function(b){return a["throw"](b)},e=i(c),f=i(d);function i(a){return function(c){c=a(c);var d=c.value;return c.done?d:!d||typeof d.then!=="function"?h(d)?(g||(g=b("Promise"))).all(d).then(e,f):e(d):d.then(e,f)}}return i(c)()}function sd(a,b,c){var d=arguments.length;if(d<2)throw new F.InvalidArgument("Too few arguments");var e=new Array(d-1);while(--d)e[d-1]=arguments[d];c=e.pop();var f=ea(e);return[a,f,c]}function td(a,b,c,d,e){return L.resolve().then(function(){var f=J.transless||J,g=a._createTransaction(b,c,a._dbSchema,d);f={trans:g,transless:f};if(d)g.idbtrans=d.idbtrans;else try{g.create(),a._state.PR1398_maxLoop=3}catch(d){if(d.name===ya.InvalidState&&a.isOpen()&&--a._state.PR1398_maxLoop>0){a._close();return a.open().then(function(){return td(a,b,c,null,e)})}return R(d)}var h=na(e);h&&zb();var i;f=L.follow(function(){i=e.call(g,g);if(i)if(h){var a=P.bind(null,null);i.then(a,a)}else typeof i.next==="function"&&typeof i["throw"]==="function"&&(i=rd(i))},f);return(i&&typeof i.then==="function"?L.resolve(i).then(function(a){return g.active?a:R(new F.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):f.then(function(){return i})).then(function(a){d&&g._resolve();return g._completion.then(function(){return a})})["catch"](function(a){g._reject(a);return R(a)})})}function ud(a,b,c){a=h(a)?a.slice():[a];for(var d=0;d<c;++d)a.push(b);return a}function vd(a){return c(c({},a),{table:function(b){var d=a.table(b);b=d.schema;var e={},f=[];function g(a,b,d){var h=Oc(a);h=e[h]=e[h]||[];var i=a==null?0:typeof a==="string"?1:a.length,j=b>0;j=c(c({},d),{isVirtual:j,keyTail:b,keyLength:i,extractKey:Kc(a),unique:!j&&d.unique});h.push(j);j.isPrimaryKey||f.push(j);if(i>1){a=i===2?a[0]:a.slice(0,i-1);g(a,b+1,d)}h.sort(function(a,b){return a.keyTail-b.keyTail});return j}var h=g(b.primaryKey.keyPath,0,b.primaryKey);e[":id"]=[h];for(var i=0,j=b.indexes;i<j.length;i++){var k=j[i];g(k.keyPath,0,k)}function l(a){a=e[Oc(a)];return a&&a[0]}function m(b,c){return{type:b.type===1?2:b.type,lower:ud(b.lower,b.lowerOpen?a.MAX_KEY:a.MIN_KEY,c),lowerOpen:!0,upper:ud(b.upper,b.upperOpen?a.MIN_KEY:a.MAX_KEY,c),upperOpen:!0}}function n(b){var a=b.query.index;return a.isVirtual?c(c({},b),{query:{index:a,range:m(b.query.range,a.keyTail)}}):b}k=c(c({},d),{schema:c(c({},b),{primaryKey:h,indexes:f,getIndexByKeyPath:l}),count:function(a){return d.count(n(a))},query:function(a){return d.query(n(a))},openCursor:function(c){var b=c.query.index,e=b.keyTail,f=b.isVirtual,g=b.keyLength;if(!f)return d.openCursor(c);function h(b){function d(d){d!=null?b["continue"](ud(d,c.reverse?a.MAX_KEY:a.MIN_KEY,e)):c.unique?b["continue"](b.key.slice(0,g).concat(c.reverse?a.MIN_KEY:a.MAX_KEY,e)):b["continue"]()}d=Object.create(b,{"continue":{value:d},continuePrimaryKey:{value:function(d,c){b.continuePrimaryKey(ud(d,a.MAX_KEY,e),c)}},primaryKey:{get:function(){return b.primaryKey}},key:{get:function(){var a=b.key;return g===1?a[0]:a.slice(0,g)}},value:{get:function(){return b.value}}});return d}return d.openCursor(n(c)).then(function(a){return a&&h(a)})}});return k}})}var wd={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:vd};function xd(a,b,c,d){c=c||{};d=d||"";f(a).forEach(function(e){if(!l(b,e))c[d+e]=void 0;else{var f=a[e],g=b[e];if(typeof f==="object"&&typeof g==="object"&&f&&g){var h=ja(f),i=ja(g);h!==i?c[d+e]=b[e]:h==="Object"?xd(f,g,c,d+e+"."):f!==g&&(c[d+e]=b[e])}else f!==g&&(c[d+e]=b[e])}});f(b).forEach(function(e){l(a,e)||(c[d+e]=b[e])});return c}function yd(a,b){return b.type==="delete"?b.keys:b.keys||b.values.map(a.extractKey)}var zd={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(a){return c(c({},a),{table:function(e){var f=a.table(e),h=f.schema.primaryKey,i=c(c({},f),{mutate:function(a){var i=J.trans,j=i.table(e).hook,k=j.deleting,m=j.creating,n=j.updating;switch(a.type){case"add":if(m.fire===G)break;return i._promise("readwrite",function(){return o(a)},!0);case"put":if(m.fire===G&&n.fire===G)break;return i._promise("readwrite",function(){return o(a)},!0);case"delete":if(k.fire===G)break;return i._promise("readwrite",function(){return o(a)},!0);case"deleteRange":if(k.fire===G)break;return i._promise("readwrite",function(){return p(a)},!0)}return f.mutate(a);function o(e){var i=J.trans,a=e.keys||yd(h,e);if(!a)throw new Error("Keys missing");e=e.type==="add"||e.type==="put"?c(c({},e),{keys:a}):c({},e);e.type!=="delete"&&(e.values=d([],e.values,!0));e.keys&&(e.keys=d([],e.keys,!0));return Ad(f,e,a).then(function(c){var d=a.map(function(a,b){var d=c[b],f={onerror:null,onsuccess:null};if(e.type==="delete")k.fire.call(f,a,d,i);else if(e.type==="add"||d===void 0){var g=m.fire.call(f,a,e.values[b],i);a==null&&g!=null&&(a=g,e.keys[b]=a,h.outbound||z(e.values[b],h.keyPath,a))}else{g=xd(d,e.values[b]);var j=n.fire.call(f,g,a,d,i);if(j){var o=e.values[b];Object.keys(j).forEach(function(a){l(o,a)?o[a]=j[a]:z(o,a,j[a])})}}return f});return f.mutate(e).then(function(b){var f=b.failures,g=b.results,h=b.numFailures;b=b.lastResult;for(var i=0;i<a.length;++i){var j=g?g[i]:a[i],k=d[i];j==null?k.onerror&&k.onerror(f[i]):k.onsuccess&&k.onsuccess(e.type==="put"&&c[i]?e.values[i]:j)}return{failures:f,results:g,numFailures:h,lastResult:b}})["catch"](function(a){d.forEach(function(b){return b.onerror&&b.onerror(a)});return(g||(g=b("Promise"))).reject(a)})})}function p(a){return q(a.trans,a.range,1e4)}function q(a,d,e){return f.query({trans:a,values:!1,query:{index:h,range:d},limit:e}).then(function(f){var h=f.result;return o({type:"delete",keys:h,trans:a}).then(function(f){if(f.numFailures>0)return(g||(g=b("Promise"))).reject(f.failures[0]);if(h.length<e)return{failures:[],numFailures:0,lastResult:void 0};else return q(a,c(c({},d),{lower:h[h.length-1],lowerOpen:!0}),e)})})}}});return i}})}};function Ad(a,c,d){return c.type==="add"?(g||(g=b("Promise"))).resolve([]):a.getMany({trans:c.trans,keys:d,cache:"immutable"})}function Bd(a,b,c){try{if(!b)return null;if(b.keys.length<a.length)return null;var d=[];for(var e=0,f=0;e<b.keys.length&&f<a.length;++e){if(T(b.keys[e],a[f])!==0)continue;d.push(c?ga(b.values[e]):b.values[e]);++f}return d.length===a.length?d:null}catch(a){return null}}var Cd={stack:"dbcore",level:-1,create:function(a){return{table:function(b){var d=a.table(b);return c(c({},d),{getMany:function(a){if(!a.cache)return d.getMany(a);var b=Bd(a.keys,a.trans._cache,a.cache==="clone");return b?L.resolve(b):d.getMany(a).then(function(b){a.trans._cache={keys:a.keys,values:a.cache==="clone"?ga(b):b};return b})},mutate:function(a){a.type!=="add"&&(a.trans._cache=null);return d.mutate(a)}})}}}};function Dd(a){return!("from"in a)}var Z=function a(b,c){if(this)i(this,arguments.length?{d:1,from:b,to:arguments.length>1?c:b}:{d:0});else{var d=new a();b&&"d"in b&&i(d,b);return d}};m(Z.prototype,(vd={add:function(a){Fd(this,a);return this},addKey:function(a){Ed(this,a,a);return this},addKeys:function(a){var b=this;a.forEach(function(a){return Ed(b,a,a)});return this}},vd[ka]=function(){return Hd(this)},vd));function Ed(a,b,c){var d=T(b,c);if(isNaN(d))return;if(d>0)throw RangeError();if(Dd(a))return i(a,{from:b,to:c,d:1});d=a.l;var e=a.r;if(T(c,a.from)<0){d?Ed(d,b,c):a.l={from:b,to:c,d:1,l:null,r:null};return Id(a)}if(T(b,a.to)>0){e?Ed(e,b,c):a.r={from:b,to:c,d:1,l:null,r:null};return Id(a)}T(b,a.from)<0&&(a.from=b,a.l=null,a.d=e?e.d+1:1);T(c,a.to)>0&&(a.to=c,a.r=null,a.d=a.l?a.l.d+1:1);b=!a.r;d&&!a.l&&Fd(a,d);e&&b&&Fd(a,e)}function Fd(a,b){function c(a,b){var d=b.from,e=b.to,f=b.l;b=b.r;Ed(a,d,e);f&&c(a,f);b&&c(a,b)}Dd(b)||c(a,b)}function Gd(a,b){b=Hd(b);var c=b.next();if(c.done)return!1;var d=c.value;a=Hd(a);var e=a.next(d.from),f=e.value;while(!c.done&&!e.done){if(T(f.from,d.to)<=0&&T(f.to,d.from)>=0)return!0;T(d.from,f.from)<0?d=(c=b.next(f.from)).value:f=(e=a.next(d.from)).value}return!1}function Hd(a){var b=Dd(a)?null:{s:0,n:a};return{next:function(a){var c=arguments.length>0;while(b)switch(b.s){case 0:b.s=1;if(c)while(b.n.l&&T(a,b.n.from)<0)b={up:b,n:b.n.l,s:1};else while(b.n.l)b={up:b,n:b.n.l,s:1};case 1:b.s=2;if(!c||T(a,b.n.to)<=0)return{value:b.n,done:!1};case 2:if(b.n.r){b.s=3;b={up:b,n:b.n.r,s:0};continue}case 3:b=b.up}return{done:!0}}}}function Id(a){var b;b=(((b=a.r)===null||b===void 0?void 0:b.d)||0)-(((b=a.l)===null||b===void 0?void 0:b.d)||0);b=b>1?"r":b<-1?"l":"";if(b){var d=b==="r"?"l":"r",e=c({},a),f=a[b];a.from=f.from;a.to=f.to;a[b]=f[b];e[b]=f[d];a[d]=e;e.d=Jd(e)}a.d=Jd(a)}function Jd(a){var b=a.r;a=a.l;return(b?a?Math.max(b.d,a.d):b.d:a?a.d:0)+1}var Kd={stack:"dbcore",level:0,create:function(a){var b=a.schema.name,d=new Z(a.MIN_KEY,a.MAX_KEY);return c(c({},a),{table:function(e){var g=a.table(e),i=g.schema,j=i.primaryKey,k=j.extractKey,l=j.outbound,m=c(c({},g),{mutate:function(f){var j=f.trans,k=j.mutatedParts||(j.mutatedParts={}),l=function(a){a="idb://"+b+"/"+e+"/"+a;return k[a]||(k[a]=new Z())},m=l(""),n=l(":dels"),c=f.type;j=f.type==="deleteRange"?[f.range]:f.type==="delete"?[f.keys]:f.values.length<50?[[],f.values]:[];var a=j[0],o=j[1],p=f.trans._cache;return g.mutate(f).then(function(b){if(h(a)){c!=="delete"&&(a=b.results);m.addKeys(a);var e=Bd(a,p);!e&&c!=="add"&&n.addKeys(a);(e||o)&&Ld(l,i,e,o)}else if(a){e={from:a.lower,to:a.upper};n.add(e);m.add(e)}else m.add(d),n.add(d),i.indexes.forEach(function(a){return l(a.name).add(d)});return b})}}),n=function(b){b=b.query;var c=b.index;b=b.range;return[c,new Z((c=b.lower)!==null&&c!==void 0?c:a.MIN_KEY,(c=b.upper)!==null&&c!==void 0?c:a.MAX_KEY)]},o={get:function(a){return[j,new Z(a.key)]},getMany:function(a){return[j,new Z().addKeys(a.keys)]},count:n,query:n,openCursor:n};f(o).forEach(function(a){m[a]=function(f){var h=J.subscr;if(h){var i=function(a){a="idb://"+b+"/"+e+"/"+a;return h[a]||(h[a]=new Z())},j=i(""),m=i(":dels"),n=o[a](f),p=n[0],q=n[1];i(p.name||"").add(q);if(!p.isPrimaryKey)if(a==="count")m.add(d);else{var r=a==="query"&&l&&f.values&&g.query(c(c({},f),{values:!1}));return g[a].apply(this,arguments).then(function(b){if(a==="query"){if(l&&f.values)return r.then(function(a){a=a.result;j.addKeys(a);return b});var c=f.values?b.result.map(k):b.result;f.values?j.addKeys(c):m.addKeys(c)}else if(a==="openCursor"){var d=b,e=f.values;return d&&Object.create(d,{key:{get:function(){m.addKey(d.primaryKey);return d.key}},primaryKey:{get:function(){var a=d.primaryKey;m.addKey(a);return a}},value:{get:function(){e&&j.addKey(d.primaryKey);return d.value}}})}return b})}}return g[a].apply(this,arguments)}});return m}})}};function Ld(a,b,c,d){function e(b){var e=a(b.name||"");function f(a){return a!=null?b.extractKey(a):null}var g=function(a){return b.multiEntry&&h(a)?a.forEach(function(a){return e.addKey(a)}):e.addKey(a)};(c||d).forEach(function(a,b){a=c&&f(c[b]);b=d&&f(d[b]);T(a,b)!==0&&(a!=null&&g(a),b!=null&&g(b))})}b.indexes.forEach(e)}var Md=function(){function a(b,d){var e=this;this._middlewares={};this.verno=0;var f=a.dependencies;this._options=d=c({addons:a.addons,autoOpen:!0,indexedDB:f.indexedDB,IDBKeyRange:f.IDBKeyRange},d);this._deps={indexedDB:d.indexedDB,IDBKeyRange:d.IDBKeyRange};f=d.addons;this._dbSchema={};this._versions=[];this._storeNames=[];this._allTables={};this.idbdb=null;this._novip=this;var g={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:G,dbReadyPromise:null,cancelOpen:G,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3};g.dbReadyPromise=new L(function(a){g.dbReadyResolve=a});g.openCanceller=new L(function(a,b){g.cancelOpen=b});this._state=g;this.name=b;this.on=$b(this,"populate","blocked","versionchange","close",{ready:[Ia,G]});this.on.ready.subscribe=u(this.on.ready.subscribe,function(b){return function(c,d){a.vip(function(){var a=e._state;if(a.openComplete)a.dbOpenError||L.resolve().then(c),d&&b(c);else if(a.onReadyBeingFired)a.onReadyBeingFired.push(c),d&&b(c);else{b(c);var f=e;d||b(function a(){f.on.ready.unsubscribe(c),f.on.ready.unsubscribe(a)})}})}});this.Collection=qc(this);this.Table=bc(this);this.Transaction=Ec(this);this.Version=id(this);this.WhereClause=Ac(this);this.on("versionchange",function(a){a.newVersion>0?!1:!1,e.close()});this.on("blocked",function(a){!a.newVersion||a.newVersion<a.oldVersion?!1:!1});this._maxKey=Jc(d.IDBKeyRange);this._createTransaction=function(a,b,c,d){return new e.Transaction(a,b,c,e._options.chromeTransactionDurability,d)};this._fireOnBlocked=function(a){e.on("blocked").fire(a),Ob.filter(function(a){return a.name===e.name&&a!==e&&!a._state.vcFired}).map(function(b){return b.on("versionchange").fire(a)})};this.use(wd);this.use(zd);this.use(Kd);this.use(Cd);this.vip=Object.create(this,{_vip:{value:!0}});f.forEach(function(a){return a(e)})}a.prototype.version=function(a){if(isNaN(a)||a<.1)throw new F.Type("Given version is not a positive number");a=Math.round(a*10)/10;if(this.idbdb||this._state.isBeingOpened)throw new F.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,a);var b=this._versions,c=b.filter(function(b){return b._cfg.version===a})[0];if(c)return c;c=new this.Version(a);b.push(c);b.sort(Vc);c.stores({});this._state.autoSchema=!1;return c};a.prototype._whenReady=function(a){var b=this;return this.idbdb&&(this._state.openComplete||J.letThrough||this._vip)?a():new L(function(a,c){if(b._state.openComplete)return c(new F.DatabaseClosed(b._state.dbOpenError));if(!b._state.isBeingOpened){if(!b._options.autoOpen){c(new F.DatabaseClosed());return}b.open()["catch"](G)}b._state.dbReadyPromise.then(a,c)}).then(a)};a.prototype.use=function(a){var b=a.stack,c=a.create,d=a.level;a=a.name;a&&this.unuse({stack:b,name:a});var e=this._middlewares[b]||(this._middlewares[b]=[]);e.push({stack:b,create:c,level:d==null?10:d,name:a});e.sort(function(a,b){return a.level-b.level});return this};a.prototype.unuse=function(a){var b=a.stack,c=a.name,d=a.create;b&&this._middlewares[b]&&(this._middlewares[b]=this._middlewares[b].filter(function(a){return d?a.create!==d:c?a.name!==c:!1}));return this};a.prototype.open=function(){return qd(this)};a.prototype._close=function(){var a=this._state,b=Ob.indexOf(this);b>=0&&Ob.splice(b,1);if(this.idbdb){try{this.idbdb.close()}catch(a){}this._novip.idbdb=null}a.dbReadyPromise=new L(function(b){a.dbReadyResolve=b});a.openCanceller=new L(function(b,c){a.cancelOpen=c})};a.prototype.close=function(){this._close();var a=this._state;this._options.autoOpen=!1;a.dbOpenError=new F.DatabaseClosed();a.isBeingOpened&&a.cancelOpen(a.dbOpenError)};a.prototype["delete"]=function(){var a=this,b=arguments.length>0,c=this._state;return new L(function(d,e){var f=function(){a.close();var b=a._deps.indexedDB.deleteDatabase(a.name);b.onsuccess=M(function(){nd(a._deps,a.name),d()});b.onerror=W(e);b.onblocked=a._fireOnBlocked};if(b)throw new F.InvalidArgument("Arguments not allowed in db.delete()");c.isBeingOpened?c.dbReadyPromise.then(f):f()})};a.prototype.backendDB=function(){return this.idbdb};a.prototype.isOpen=function(){return this.idbdb!==null};a.prototype.hasBeenClosed=function(){var a=this._state.dbOpenError;return a&&a.name==="DatabaseClosed"};a.prototype.hasFailed=function(){return this._state.dbOpenError!==null};a.prototype.dynamicallyOpened=function(){return this._state.autoSchema};Object.defineProperty(a.prototype,"tables",{get:function(){var a=this;return f(this._allTables).map(function(b){return a._allTables[b]})},enumerable:!1,configurable:!0});a.prototype.transaction=function(){var a=sd.apply(this,arguments);return this._transaction.apply(this,a)};a.prototype._transaction=function(a,b,c){var d=this,e=J.trans;(!e||e.db!==this||a.indexOf("!")!==-1)&&(e=null);var f=a.indexOf("?")!==-1;a=a.replace("!","").replace("?","");var g,h;try{h=b.map(function(a){a=a instanceof d.Table?a.name:a;if(typeof a!=="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return a});if(a=="r"||a===Ub)g=Ub;else if(a=="rw"||a==Vb)g=Vb;else throw new F.InvalidArgument("Invalid transaction mode: "+a);if(e){if(e.mode===Ub&&g===Vb)if(f)e=null;else throw new F.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");e&&h.forEach(function(a){if(e&&e.storeNames.indexOf(a)===-1)if(f)e=null;else throw new F.SubTransaction("Table "+a+" not included in parent transaction.")});f&&e&&!e.active&&(e=null)}}catch(a){return e?e._promise(null,function(b,c){c(a)}):R(a)}var i=td.bind(null,this,g,h,e,c);return e?e._promise(g,i,"lock"):J.trans?Eb(J.transless,function(){return d._whenReady(i)}):this._whenReady(i)};a.prototype.table=function(a){if(!l(this._allTables,a))throw new F.InvalidTable("Table "+a+" does not exist");return this._allTables[a]};return a}(),Nd=typeof Symbol!=="undefined"&&"observable"in Symbol?typeof Symbol==="function"?Symbol.observable:"@@observable":"@@observable",Od=function(){function a(a){this._subscribe=a}a.prototype.subscribe=function(a,b,c){return this._subscribe(!a||typeof a==="function"?{next:a,error:b,complete:c}:a)};a.prototype[Nd]=function(){return this};return a}();function Pd(a,b){f(b).forEach(function(c){var d=a[c]||(a[c]=new Z());Fd(d,b[c])});return a}function Qd(a){return new Od(function(c){var d=na(a);function e(b){d&&zb();var c=function(){return O(a,{subscr:b,trans:null})};c=J.trans?Eb(J.transless,c):c();d&&c.then(P,P);return c}var h=!1,i={},j={},k={get closed(){return h},unsubscribe:function(){h=!0,Y.storagemutated.unsubscribe(o)}};c.start&&c.start(k);var l=!1,m=!1;function n(){return f(j).some(function(a){return i[a]&&Gd(i[a],j[a])})}var o=function(a){Pd(i,a),n()&&p()},p=function a(){if(l||h)return;i={};var d={},f=e(d);m||(Y(Cc,o),m=!0);l=!0;(g||(g=b("Promise"))).resolve(f).then(function(b){l=!1;if(h)return;n()?a():(i={},j=d,c.next&&c.next(b))},function(a){l=!1,c.error&&c.error(a),k.unsubscribe()})};p();return k})}try{vd={indexedDB:e.indexedDB||e.mozIndexedDB||e.webkitIndexedDB||e.msIndexedDB,IDBKeyRange:e.IDBKeyRange||e.webkitIDBKeyRange}}catch(a){vd={indexedDB:null,IDBKeyRange:null}}var Rd=Md;m(Rd,c(c({},E),{"delete":function(a){a=new Rd(a,{addons:[]});return a["delete"]()},exists:function(a){return new Rd(a,{addons:[]}).open().then(function(a){a.close();return!0})["catch"]("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(a){try{return ld(Rd.dependencies).then(a)}catch(a){return R(new F.MissingAPI())}},defineClass:function(){function a(a){i(this,a)}return a},ignoreTransaction:function(a){return J.trans?Eb(J.transless,a):a()},vip:od,async:function(a){return function(){try{var b=rd(a.apply(this,arguments));return!b||typeof b.then!=="function"?L.resolve(b):b}catch(a){return R(a)}}},spawn:function(a,b,c){try{a=rd(a.apply(c,b||[]));return!a||typeof a.then!=="function"?L.resolve(a):a}catch(a){return R(a)}},currentTransaction:{get:function(){return J.trans||null}},waitFor:function(a,b){a=L.resolve(typeof a==="function"?Rd.ignoreTransaction(a):a).timeout(b||6e4);return J.trans?J.trans.waitFor(a):a},Promise:L,debug:{get:function(){return D},set:function(a){oa(a,a==="dexie"?function(){return!0}:Sb)}},derive:p,extend:i,props:m,override:u,Events:$b,on:Y,liveQuery:Qd,extendObservabilitySet:Pd,getByKeyPath:y,setByKeyPath:z,delByKeyPath:ba,shallowClone:ca,deepClone:ga,getObjectDiff:xd,cmp:T,asap:w,minKey:Mb,addons:[],connections:Ob,errnames:ya,dependencies:vd,semVer:A,version:A.split(".").map(function(a){return parseInt(a)}).reduce(function(a,b,c){return a+b/Math.pow(10,c*2)})}));Rd.maxKey=Jc(Rd.dependencies.IDBKeyRange);typeof dispatchEvent!=="undefined"&&typeof addEventListener!=="undefined"&&(Y(Cc,function(a){if(!$){var b;Pb?(b=document.createEvent("CustomEvent"),b.initCustomEvent(X,!0,!0,a)):b=new CustomEvent(X,{detail:a});$=!0;dispatchEvent(b);$=!1}}),addEventListener(X,function(a){a=a.detail;$||Sd(a)}));function Sd(a){var b=$;try{$=!0,Y.storagemutated.fire(a)}finally{$=b}}var $=!1;if(typeof BroadcastChannel!=="undefined"){var Td=new BroadcastChannel(X);Y(Cc,function(a){$||Td.postMessage(a)});Td.onmessage=function(a){a.data&&Sd(a.data)}}else if(typeof self!=="undefined"&&typeof navigator!=="undefined"){Y(Cc,function(a){try{$||(typeof localStorage!=="undefined"&&localStorage.setItem(X,JSON.stringify({trig:Math.random(),changedParts:a})),typeof self.clients==="object"&&d([],self.clients.matchAll({includeUncontrolled:!0}),!0).forEach(function(b){return b.postMessage({type:X,changedParts:a})}))}catch(a){}});typeof addEventListener!=="undefined"&&addEventListener("storage",function(a){if(a.key===X){a=JSON.parse(a.newValue);a&&Sd(a.changedParts)}});E=self.document&&navigator.serviceWorker;E&&E.addEventListener("message",Ud)}function Ud(a){a=a.data;a&&a.type===X&&Sd(a.changedParts)}L.rejectionMapper=Ba;oa(D,Sb);ba=Object.freeze({__proto__:null,Dexie:Md,liveQuery:Qd,"default":Md,RangeSet:Z,mergeRanges:Fd,rangesOverlap:Gd});c(Md,ba,{"default":Md});return Md})}var l=!1;function m(){l||(l=!0,k());return i.exports}function c(a){switch(a){case void 0:return m()}}e.exports=c}),null);
__d("WAWeb-dexie",["dexie-3.2.2"],(function(a,b,c,d,e,f){e.exports=b("dexie-3.2.2")()}),null);
__d("WAWebAbstractStore",["asyncToGeneratorRuntime","err"],(function(a,b,c,d,e,f,g){a=function(){function a(){}var d=a.prototype;d.open=function(){var a=this;if(this.$2)return this.$2;if(this.$1){this.$2=this.$1["catch"](function(b){a.$2=null;throw b}).then(function(){a.$2=null;return a.open()});return this.$2}this.$2=this.doOpen()["catch"](function(b){a.$2=null;throw b}).then(function(){a.$2=null});return this.$2};d.close=function(){var a=this;if(this.$1)return this.$1;if(this.$2){this.$1=this.$2["catch"](function(b){a.$1=null;throw b}).then(function(){a.$1=null;return a.close()});return this.$1}this.$1=this.doClose()["catch"](function(b){a.$1=null;throw b}).then(function(){a.$1=null});return this.$1};d.get=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){yield this.open();return this.doGet(a)});function c(b){return a.apply(this,arguments)}return c}();d.queryByIndex=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){yield this.open();return this.doQueryByIndex(a,b)});function c(b,c){return a.apply(this,arguments)}return c}();d.getAll=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){yield this.open();return this.doGetAll()});function c(){return a.apply(this,arguments)}return c}();d.put=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){yield this.open();return this.doPut(a,b)});function c(b,c){return a.apply(this,arguments)}return c}();d.del=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){yield this.open();return this.doDel(a)});function c(b){return a.apply(this,arguments)}return c}();d.count=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){yield this.open();return this.doCount()});function c(){return a.apply(this,arguments)}return c}();d.clear=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){yield this.open();return this.doClear()});function c(){return a.apply(this,arguments)}return c}();d.doGet=function(a){throw c("err")("Not implemented")};d.doQueryByIndex=function(a,b){throw c("err")("Not implemented")};d.doGetAll=function(){throw c("err")("Not implemented")};d.doPut=function(a,b){throw c("err")("Not implemented")};d.doDel=function(a){throw c("err")("Not implemented")};d.doCount=function(){throw c("err")("Not implemented")};d.doClear=function(){throw c("err")("Not implemented")};d.doOpen=function(){throw c("err")("Not implemented")};d.doClose=function(){throw c("err")("Not implemented")};return a}();g["default"]=a}),98);
__d("WAWebWamEnumWebcScenarioType",[],(function(a,b,c,d,e,f){a=Object.freeze({INITIAL_PAIRING:0,OFFLINE_RESUME:1,IDLE:2,RECENT_HISTORY_SYNC:3,CHAT_NAVIGATION:4});f.WEBC_SCENARIO_TYPE=a}),66);
__d("WAWebBrokerGlobalAppState",["WAWebWamEnumWebcScenarioType"],(function(a,b,c,d,e,f,g){var h=(a={},a[(b=d("WAWebWamEnumWebcScenarioType")).WEBC_SCENARIO_TYPE.IDLE]=0,a[b.WEBC_SCENARIO_TYPE.INITIAL_PAIRING]=5*60*1e3,a[b.WEBC_SCENARIO_TYPE.OFFLINE_RESUME]=2*60*1e3,a[b.WEBC_SCENARIO_TYPE.RECENT_HISTORY_SYNC]=0,a[b.WEBC_SCENARIO_TYPE.CHAT_NAVIGATION]=0,a),i,j;c={isLogoutInProgress:!1,takeOver:!1,getCurrentScenario:function(){var a;return(a=j)!=null?a:d("WAWebWamEnumWebcScenarioType").WEBC_SCENARIO_TYPE.IDLE},initOrUpdateTracking:function(a){i&&self.clearTimeout(i);j=a;if(j===d("WAWebWamEnumWebcScenarioType").WEBC_SCENARIO_TYPE.IDLE)return;i=self.setTimeout(function(){j=d("WAWebWamEnumWebcScenarioType").WEBC_SCENARIO_TYPE.IDLE,i=null},h[a])}};e=c;g["default"]=e}),98);
__d("WAWebEnvironment",["gkx"],(function(a,b,c,d,e,f,g){a=c("gkx")("4112");b=!a;d={isWeb:b,isWindows:a};e=d;g["default"]=e}),98);
__d("WAWebClientFeatureFlags",["WAWebEnvironment","gkx"],(function(a,b,c,d,e,f,g){d=!1;var h={a11y_block:!1,lid_debug:!1,media_existence_check:!c("gkx")("26258"),youtube_video_preview_without_blur:!c("gkx")("26258"),message_add_ons:!1,reactions_filter_problematic_flags:!0,skip_compliance_phone_check:!1,debug_commands:d,debug_win_long_sync:!c("gkx")("26258")&&c("WAWebEnvironment").isWindows};function a(a){return h[a]}function i(a){h[a]=!0}function j(a){h[a]=!1}function b(){if(!c("gkx")("26258")){var a;a=new URLSearchParams(((a=location.search)!=null?a:"").toLowerCase());k(a,"feature_enable",i);k(a,"feature_disable",j)}}function k(a,b,c){a=a.get(b);if(a==null)return;b=a.split(",");b.forEach(function(a){a in h&&c(a)})}g.isFeatureEnabled=a;g.debugEnableFeatureFlag=i;g.debugDisableFeatureFlag=j;g.overwriteDebugFeatures=b}),98);
__d("WAWebWamDroppedEventWamEvent",["WAWebWamCodegenUtils"],(function(a,b,c,d,e,f,g){b=(a=d("WAWebWamCodegenUtils")).defineEvents({WamDroppedEvent:[4358,{droppedEventCode:[1,a.TYPES.INTEGER],droppedEventCount:[2,a.TYPES.INTEGER],isFromWamsys:[3,a.TYPES.BOOLEAN]},[1,1,1],"regular"]},{WamDroppedEvent:[]});g.WamDroppedEventWamEvent=b}),98);
__d("WAWebWamCodegenGlobalMetrics",["WANullthrows","WAWebWamCodegenUtils"],(function(a,b,c,d,e,f,g){function h(a){return typeof a==="number"&&a===Math.floor(a)}var i=function(a,b,c){this.name=a;this.id=b;this.type=c;if(typeof c==="object"){var e=new Set(Object.values(c));this.validator=function(a){return e.has(a)}}else c===d("WAWebWamCodegenUtils").TYPES.INTEGER||c===d("WAWebWamCodegenUtils").TYPES.TIMER?this.validator=h:(c,this.validator=c)},j=function(b){babelHelpers.inheritsLoose(a,b);function a(a,c,d,e){a=b.call(this,a,c,d)||this;a.channels=e;return a}return a}(i);a=function(){function a(){this.$1={},this.$2=new Map()}var b=a.prototype;b.$3=function(a,b){return a+"::"+b};b.getEvent=function(a,b){a=this.$3(a,b);return c("WANullthrows")(this.$1[a],a)};b.define=function(a,b,c,d){a=this.$3(a,b);a in this.$1||(this.$1[a]=new i(b,c,d));return this.$1[a]};b.defineGlobal=function(a,b,d,e){this.$2.has(a)||this.$2.set(a,new j(a,b,d,e));return c("WANullthrows")(this.$2.get(a),a)};b.getGlobal=function(a){return c("WANullthrows")(this.$2.get(a),a)};return a}();g.Metric=i;g.GlobalMetric=j;g.Metrics=a}),98);
__d("WAWebWamInitQueue",["WAWebWamRuntimeProvider"],(function(a,b,c,d,e,f,g){var h=[];function a(a,b){b===void 0&&(b=!1),h.push([a,b])}function b(a,b){h.push([!1,a,b])}function c(){var a=d("WAWebWamRuntimeProvider").getWamRuntime();if(a==null)return;var b=h.splice(0);b.forEach(function(b){b.length===2?a.commit.apply(a,b):void a.set(b[1],b[2])})}g.queueEvent=a;g.queueMetric=b;g.processQueuedJobs=c}),98);
__d("WAWebWamRuntimeProvider",["WALogger","WAWebWamInitQueue"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["wamRuntime already set"]);h=function(){return a};return a}var i=null;function a(a){if(i!=null){d("WALogger").ERROR(h());return}i=a;d("WAWebWamInitQueue").processQueuedJobs()}function b(){return i}g.setWamRuntime=a;g.getWamRuntime=b}),98);
__d("WAWebWamTypeHash",["WALogger","err"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["type-validator fails ",""]);h=function(){return a};return a}b=function(){function a(){}var b=a.prototype;b.set=function(a){for(var b in a)this[b]=a[b]};return a}();function a(a,b,d){var e={$className:{value:a}};for(var f in b){var g=b[f];g=typeof g==="string"||typeof g==="function"?{type:g}:g;if(g==null||typeof g!=="object"){var h;throw c("err")(a+" specified with non-object "+((h=JSON.stringify(g))!=null?h:"undefined"))}e[f]={enumerable:!0,get:i(f,g),set:j(f,g)}}h=function(a){babelHelpers.inheritsLoose(b,a);function b(b){var c;c=a.call(this)||this;c.all={};b&&c.set(b);return c}return b}(d);Object.defineProperties(h.prototype,e);return h}function i(a,b){return function(){return this.all[a]}}function j(a,b){var c=b.type,e=b.set;return function(b){if(b===this.all[a])return;if(!(b==null))if(typeof c==="function"){if(!c(b)){d("WALogger").LOG(h(),b);throw new TypeError(this.$className+"."+a+" type-validator failed")}}else if(typeof b!==c)throw new TypeError(this.$className+"."+a+" requires type "+c+", got "+String(b));e&&e.call(this,b);this.all[a]=b}}g.TypeHash=b;g.defineTypeHash=a}),98);
__d("WAWebWamCodegenUtils",["WAUpperFirst","WAWebWamCodegenGlobalMetrics","WAWebWamCodegenWamEvent","WAWebWamInitQueue","WAWebWamRuntimeProvider","WAWebWamTypeHash","err","gkx"],(function(a,b,c,d,e,f,g){var h=Object.freeze({BOOLEAN:"boolean",INTEGER:"integer",NUMBER:"number",STRING:"string",TIMER:"timer"}),i=new(d("WAWebWamCodegenGlobalMetrics").Metrics)(),j={};function k(a){var b=a.name,e=a.id,f=a.weight,g=a.props,k=a.wamChannel,l=a.privateStatsIdInt;a=a.validators;var m={id:e,weight:f,wamChannel:k,privateStatsIdInt:l,validators:a};e={};f=[];for(k in g){l=g[k];a=i.define(b,k,l[0],l[1]);e[k]=a.validator;l[1]===h.TIMER&&f.push(k)}a=d("WAWebWamTypeHash").defineTypeHash(b,e,d("WAWebWamCodegenWamEvent").WamEvent);f.forEach(function(a){m["mark"+c("WAUpperFirst")(a)]=function(){var b=this.startMarkers,c=this.eventTime;this[a]=Date.now()-((b=(b=b[a])==null?void 0:b.ts)!=null?b:c)},m["start"+c("WAUpperFirst")(a)]=function(){var b=Date.now();this.startMarkers[a]={ts:b}}});Object.assign(a.prototype,m);j[b]=a;return a}function a(a,b){b===void 0&&(b={});for(var d in a){var e=a[d],f=e[2],g=1;c("gkx")("26259")&&(g=f[1]);c("gkx")("26258")&&(g=f[2]);f=(f=e[3])!=null?f:"regular";var h=e.length===5?e[4]:-1;return k({name:d,id:e[0],props:e[1],weight:g,wamChannel:f,privateStatsIdInt:h,validators:(e=b[d])!=null?e:[]})}throw c("err")("defineEvent: empty definition")}var l=function(b){babelHelpers.inheritsLoose(a,b);function a(){var a,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(a=c=b.call.apply(b,[this].concat(e))||this,c.commitOnSet=!0,a)||babelHelpers.assertThisInitialized(c)}return a}(d("WAWebWamTypeHash").TypeHash);function b(a){var b={},c=function(c){var e=a[c],f=e[0],g=e[1];e=e[2];e=e===void 0?["regular"]:e;var h=i.defineGlobal(c,f,g,e);b[c]={type:h.validator,set:function(a){if(this.commitOnSet){var b=d("WAWebWamRuntimeProvider").getWamRuntime();b?void b.set(h,a):d("WAWebWamInitQueue").queueMetric(h,a)}}}};for(var e in a)c(e);c=d("WAWebWamTypeHash").defineTypeHash("Global",b,l);return new c()}g.TYPES=h;g.metrics=i;g.events=j;g.defineEvents=a;g.defineGlobal=b}),98);
__d("WAWebWamCodegenWamEvent",["Promise","WACamelCase","WALogger","WAWebWamDroppedEventWamEvent","WAWebWamInitQueue","WAWebWamRuntimeProvider","WAWebWamTypeHash"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["commitAndWaitForFlush should not be called before initWamRuntime"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["wam event failed validation: ",""]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose([""," event validator failed condition ",""]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["","."," should be nonnull"]);l=function(){return a};return a}var m=1;a=function(a){babelHelpers.inheritsLoose(e,a);function e(b){b=a.call(this)||this;b.instanceId=m++;b.eventTime=Date.now();b.commitTime=void 0;b.startMarkers={};return b}var f=e.prototype;f.getValue=function(a){return this.all[a]};f.runPreCommitValidation=function(){var a=this;this.validators.forEach(function(b){var e=b[0],f=b[1];b=b[2];for(var e=e,g=Array.isArray(e),h=0,e=g?e:e[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var i;if(g){if(h>=e.length)break;i=e[h++]}else{h=e.next();if(h.done)break;i=h.value}i=i;if(!i(a))return}for(i=f,h=Array.isArray(i),g=0,i=h?i:i[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){if(h){if(g>=i.length)break;e=i[g++]}else{g=i.next();if(g.done)break;e=g.value}f=e;if(a.getValue(c("WACamelCase")(f))==null){d("WALogger").LOG(l(),a.$className,f);throw new TypeError(a.$className+"."+f+" should be nonnull")}}for(e=b,f=Array.isArray(e),g=0,e=f?e:e[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){if(f){if(g>=e.length)break;h=e[g++]}else{g=e.next();if(g.done)break;h=g.value}i=h;b=i[0];h=i[1];if(!b(a)){d("WALogger").LOG(k(),a.$className,h);throw new TypeError(a.$className+" event validator failed condition "+h)}}})};f.commit=function(){try{this.runPreCommitValidation()}catch(a){d("WALogger").ERROR(j(),a);new(d("WAWebWamDroppedEventWamEvent").WamDroppedEventWamEvent)({droppedEventCode:this.id,droppedEventCount:1}).commit();return}var a=d("WAWebWamRuntimeProvider").getWamRuntime();a?void a.commit(this,!1):d("WAWebWamInitQueue").queueEvent(this,!1)};f.commitAndWaitForFlush=function(a){a===void 0&&(a=!1);this.runPreCommitValidation();var c=d("WAWebWamRuntimeProvider").getWamRuntime();if(c==null){d("WAWebWamInitQueue").queueEvent(this,a);return(h||(h=b("Promise"))).resolve()}c=c.commit(this,a);if(c==null){d("WALogger").ERROR(i());return(h||(h=b("Promise"))).resolve()}return c};f.setTime=function(a){this.eventTime=a||Date.now()};return e}(d("WAWebWamTypeHash").TypeHash);g.WamEvent=a}),98);
__d("WAWebWamEnumWebScenarioCode",[],(function(a,b,c,d,e,f){a=Object.freeze({OFFLINE_RESUME:0});f.WEB_SCENARIO_CODE=a}),66);
__d("WAWebWamEnumWebTableLogReasonCode",[],(function(a,b,c,d,e,f){a=Object.freeze({BASE:0,EXCEEDED_THRESHOLD:1});f.WEB_TABLE_LOG_REASON_CODE=a}),66);
__d("WAWebWebDbTableUsageWamEvent",["WAWebWamCodegenUtils","WAWebWamEnumWebScenarioCode","WAWebWamEnumWebTableLogReasonCode"],(function(a,b,c,d,e,f,g){b=(a=d("WAWebWamCodegenUtils")).defineEvents({WebDbTableUsage:[5074,{offlineSessionId:[1,a.TYPES.STRING],webScenario:[2,d("WAWebWamEnumWebScenarioCode").WEB_SCENARIO_CODE],webTable:[3,a.TYPES.STRING],webTableLogReason:[4,d("WAWebWamEnumWebTableLogReasonCode").WEB_TABLE_LOG_REASON_CODE],webTableReadCount:[5,a.TYPES.INTEGER],webTableWriteCount:[6,a.TYPES.INTEGER]},[1,1,100],"regular"]},{WebDbTableUsage:[]});g.WebDbTableUsageWamEvent=b}),98);
__d("WAWebDBTableUsage",["WAWebWebDbTableUsageWamEvent"],(function(a,b,c,d,e,f,g){var h=new Map(),i=50;function a(a,b,c){var e=new Map();for(var b=b,f=Array.isArray(b),g=0,b=f?b:b[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var j;if(f){if(g>=b.length)break;j=b[g++]}else{g=b.next();if(g.done)break;j=g.value}j=j;var k=new(d("WAWebWebDbTableUsageWamEvent").WebDbTableUsageWamEvent)({webScenario:a,webTableReadCount:0,webTableWriteCount:0,webTable:j});e.set(j,k)}function l(){if(c!=null)for(var a=e.values(),b=Array.isArray(a),d=0,a=b?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var f;if(b){if(d>=a.length)break;f=a[d++]}else{d=a.next();if(d.done)break;f=d.value}f=f;f.offlineSessionId=c}for(f=e.values(),d=Array.isArray(f),b=0,f=d?f:f[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var g;if(d){if(b>=f.length)break;a=f[b++]}else{b=f.next();if(b.done)break;a=b.value}a=a;(((g=a.webTableReadCount)!=null?g:0)>i||((g=a.webTableWriteCount)!=null?g:0)>i||a.webTable==="message")&&a.commit()}h["delete"](l);return h.size}h.set(l,e);return l}function b(a,b){for(var c=h,d=Array.isArray(c),e=0,c=d?c:c[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var f;if(d){if(e>=c.length)break;f=c[e++]}else{e=c.next();if(e.done)break;f=e.value}f=f;f=f[1];f=f.get(a);f!=null&&(b==="read"?f.webTableReadCount++:f.webTableWriteCount++)}}g.beginDBTableUsage=a;g.recordTableUsageStat=b}),98);
__d("WAWebDexieCastTypes",["Promise"],(function(a,b,c,d,e,f){var g;function a(a){return(g||(g=b("Promise"))).resolve(a)}f.dexieCastToPromise=a}),66);
__d("WAWebMiscErrors",["WACustomError"],(function(a,b,c,d,e,f,g){b=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}return b}((a=d("WACustomError")).customError("Offline"));c=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}return b}(a.customError("GaveUpRetry"));e=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}return b}(a.customError("CatalogImageDownloadError"));f=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}return b}(a.customError("MediaFileError"));d=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}return b}(a.customError("InvalidImageFileType",!0,f));var h=function(b){babelHelpers.inheritsLoose(a,b);function a(){return b.apply(this,arguments)||this}return a}(a.customError("InvalidMediaFileType",!0,f)),i=function(b){babelHelpers.inheritsLoose(a,b);function a(){return b.apply(this,arguments)||this}return a}(a.customError("InvalidMediaCheckRepairFailedType",!0,f)),j=function(b){babelHelpers.inheritsLoose(a,b);function a(){return b.apply(this,arguments)||this}return a}(a.customError("MediaEncryptionError",!0,f)),k=function(b){babelHelpers.inheritsLoose(a,b);function a(){return b.apply(this,arguments)||this}return a}(a.customError("MediaDecryptionError",!0,f)),l=function(b){babelHelpers.inheritsLoose(a,b);function a(){return b.apply(this,arguments)||this}return a}(a.customError("MediaDecryptionError",!0,f)),m=function(b){babelHelpers.inheritsLoose(a,b);function a(){return b.apply(this,arguments)||this}return a}(a.customError("MediaFileFailedLoad",!0,f)),n=function(b){babelHelpers.inheritsLoose(a,b);function a(){return b.apply(this,arguments)||this}return a}(a.customError("MediaFileEmpty",!0,f));function o(a){try{return JSON.stringify(a)}catch(b){return a.toString()}}var p=function(b){babelHelpers.inheritsLoose(a,b);function a(a){var c=typeof a==="string"?a:o(a);c=b.call(this,c)||this;c.event=a;return c}return a}(a.customError("SocketError")),q=function(b){babelHelpers.inheritsLoose(a,b);function a(a){return b.call(this,"socket not open, is "+a)||this}return a}(a.customError("SocketNotOpen")),r=function(b){babelHelpers.inheritsLoose(a,b);function a(a,c){var d;d=b.call(this,"Image failed to load.")||this;d.src=a;d.status=c;d.target={src:a,status:c};return d}return a}(a.customError("ImageError")),s=function(b){babelHelpers.inheritsLoose(a,b);function a(a,c){a=b.call(this,a)||this;a.event=c;return a}return a}(a.customError("DecodeWebpResultsError")),t=function(b){babelHelpers.inheritsLoose(a,b);function a(a,c){a=b.call(this,a)||this;a.event=c;return a}return a}(a.customError("DecodeWebpError")),u=function(b){babelHelpers.inheritsLoose(a,b);function a(a,c,d){a=a||"Server replied with a failed status code";a=b.call(this,a+": "+d)||this;a.url=c;a.status=d;return a}return a}(a.customError("ServerStatusError")),v=function(b){babelHelpers.inheritsLoose(a,b);function a(a,c,d){a="Invalid response for "+a+", with status "+c;d&&(a=a+": "+d);return b.call(this,a)||this}return a}(a.customError("InvalidServerResponseError")),w=function(b){babelHelpers.inheritsLoose(a,b);function a(a,c,d){d="Error "+c+" for "+a+": "+JSON.stringify(d);return b.call(this,d,a,c)||this}return a}(a.customError("BingServerError",!0,u)),x=function(b){babelHelpers.inheritsLoose(a,b);function a(){return b.apply(this,arguments)||this}return a}(a.customError("MediaNeedsReupload")),y=function(b){babelHelpers.inheritsLoose(a,b);function a(){return b.apply(this,arguments)||this}return a}(a.customError("FileNotReadableError",!0,Error)),z=function(b){babelHelpers.inheritsLoose(a,b);function a(a){var c;c=b.call(this,a)||this;c.src=a;return c}return a}(a.customError("MediaLoadError")),A=function(b){babelHelpers.inheritsLoose(a,b);function a(){return b.call(this,"Transcode blob too large")||this}return a}(a.customError("TranscodeBlobTooLargeError")),B=function(b){babelHelpers.inheritsLoose(a,b);function a(a){return b.call(this,"Unable to play video. Reason: "+String(a))||this}return a}(a.customError("UnableToPlayVideoError")),C=function(b){babelHelpers.inheritsLoose(a,b);function a(){return b.apply(this,arguments)||this}return a}(a.customError("MediaDragDropError",!0,z)),D=function(b){babelHelpers.inheritsLoose(a,b);function a(){return b.apply(this,arguments)||this}return a}(a.customError("MediaUnsupportedError"));D.message="Media format is unsupported";var E=function(b){babelHelpers.inheritsLoose(a,b);function a(a,c){a=b.call(this,a)||this;a.model=c;return a}return a}(a.customError("ModelCreateError")),F=function(b){babelHelpers.inheritsLoose(a,b);function a(a){return b.call(this,"MasterDatabaseEncryptionKey."+a+" was accessed before init")||this}return a}(a.customError("DbEncKeyNotLoadedError")),G=function(b){babelHelpers.inheritsLoose(a,b);function a(a){return b.call(this,"MasterDatabaseMessageEncryptionKey."+a+" was accessed before init")||this}return a}(a.customError("DbMsgEncKeyNotLoadedError")),H=function(b){babelHelpers.inheritsLoose(a,b);function a(){return b.apply(this,arguments)||this}return a}(a.customError("DbOnLogoutAbortError"));H.message="DB operation was dropped due to logout activity";var I=function(b){babelHelpers.inheritsLoose(a,b);function a(){return b.apply(this,arguments)||this}return a}(a.customError("DbClosedOnTakeover"));I.message="DB operation was dropped due to session takeover (DB closed)";var J=function(b){babelHelpers.inheritsLoose(a,b);function a(){return b.apply(this,arguments)||this}return a}(a.customError("DbNotFoundOnTakeover"));J.message="DB operation was dropped due to session takeover (DB not found)";var K=function(b){babelHelpers.inheritsLoose(a,b);function a(){return b.apply(this,arguments)||this}return a}(a.customError("DBExpiredFtsHMACKey"));K.message="MasterDatabaseEncryptionKey.fts_hmac_keys is in an invalid state";var L=function(b){babelHelpers.inheritsLoose(a,b);function a(){return b.apply(this,arguments)||this}return a}(a.customError("ActionError"));L.message="Could not perform action.";var M=function(b){babelHelpers.inheritsLoose(a,b);function a(){return b.apply(this,arguments)||this}return a}(a.customError("Unmount")),N=function(b){babelHelpers.inheritsLoose(a,b);function a(){return b.apply(this,arguments)||this}return a}(a.customError("GetUserMediaError")),O=function(b){babelHelpers.inheritsLoose(a,b);function a(){return b.apply(this,arguments)||this}return a}(a.customError("NotSupportedError",!0,N));O.message="The operation is not supported.";var P=function(b){babelHelpers.inheritsLoose(a,b);function a(){return b.apply(this,arguments)||this}return a}(a.customError("NotAllowedError",!0,N));P.message="The user did not grant permission for the operation";var Q=function(b){babelHelpers.inheritsLoose(a,b);function a(a){var c;c=b.call(this,"RMR attempted on a newsletter message of media type "+a+", newsletter messages do not support media reupload requests")||this;c.mediaType=a;return c}return a}(a.customError("RMRNotSupportedOnNewsletterMessagesError")),R=function(b){babelHelpers.inheritsLoose(a,b);function a(){return b.apply(this,arguments)||this}return a}(a.customError("ConstraintNotSatisfiedError",!0,N));R.message="One of the mandatory Constraints could not be satisfied.";var S=function(b){babelHelpers.inheritsLoose(a,b);function a(){return b.apply(this,arguments)||this}return a}(a.customError("OverconstrainedError",!0,N));S.message="Due to changes in the environment, one or more mandatory constraints can no longer be satisfied.";var T=function(b){babelHelpers.inheritsLoose(a,b);function a(){return b.apply(this,arguments)||this}return a}(a.customError("NotFoundError",!0,N));T.message="The object can not be found here.";var U=function(b){babelHelpers.inheritsLoose(a,b);function a(){return b.apply(this,arguments)||this}return a}(a.customError("SourceUnavailableError",!0,N));U.message="The source of the MediaStream could not be accessed due to a hardware error (e.g. lock from another process).";a=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}return b}(a.customError("UnableToGetContentLengthError"));a.message="Failed to get media contentLength from mms";O={GetUserMediaError:N,NotSupportedError:O,NotAllowedError:P,ConstraintNotSatisfiedError:R,OverconstrainedError:S,NotFoundError:T,SourceUnavailableError:U};g.Offline=b;g.GaveUpRetry=c;g.CatalogImageDownloadError=e;g.MediaFileError=f;g.InvalidImageFileType=d;g.InvalidMediaFileType=h;g.InvalidMediaCheckRepairFailedType=i;g.MediaEncryptionError=j;g.MediaDecryptionError=k;g.MediaHashMismatch=l;g.MediaFileFailedLoad=m;g.MediaFileEmpty=n;g.SocketError=p;g.SocketNotOpen=q;g.ImageError=r;g.DecodeWebpResultsError=s;g.EncodeWebpError=t;g.ServerStatusError=u;g.InvalidServerResponseError=v;g.BingServerError=w;g.MediaNeedsReupload=x;g.FileNotReadableError=y;g.MediaLoadError=z;g.TranscodeBlobTooLargeError=A;g.UnableToPlayVideoError=B;g.MediaDragDropError=C;g.MediaUnsupportedError=D;g.ModelCreateError=E;g.DbEncKeyNotLoaded=F;g.DbMsgEncKeyNotLoaded=G;g.DbOnLogoutAbort=H;g.DbClosedOnTakeover=I;g.DbNotFoundOnTakeover=J;g.DBInvalidFtsHMACKey=K;g.ActionError=L;g.Unmount=M;g.GetUserMediaError=N;g.NotAllowedError=P;g.RMRNotSupportedOnNewsletterMessagesError=Q;g.NotFoundError=T;g.UnableToGetContentLengthError=a;g.GetUserMedia=O}),98);
__d("WAWebPageLoadLogging",[],(function(a,b,c,d,e,f){var g={PAGE_LOAD_ID:"0",endPageLoadQpl:function(){},endPageLoadQplMeasure:function(){},startPageLoadQplMeasure:function(){},addPageLoadQplPoint:function(){},addPageLoadQplAnnotation:function(){},incrementPageLoadQplSocketError:function(){},addPageLoadValidationData:function(){},setWamCompleteForValidation:function(){}};function a(a){g=a}var h=!1;function b(a,b){h=!0;return g.endPageLoadQpl(a,b)}function c(a){return g.startPageLoadQplMeasure(a)}function d(a){return g.endPageLoadQplMeasure(a)}function e(a){return g.addPageLoadQplPoint(a)}function i(a){return g.addPageLoadQplAnnotation(a)}function j(a,b){return g.addPageLoadValidationData(a,b)}function k(){return g.incrementPageLoadQplSocketError()}function l(){return g.setWamCompleteForValidation()}function m(){return g.PAGE_LOAD_ID}function n(){return h}f.setImpl=a;f.endPageLoadQpl=b;f.startPageLoadQplMeasure=c;f.endPageLoadQplMeasure=d;f.addPageLoadQplPoint=e;f.addPageLoadQplAnnotation=i;f.addPageLoadValidationData=j;f.incrementPageLoadQplSocketError=k;f.setWamCompleteForValidation=l;f.getPageLoadId=m;f.wasPageLoadQplLogged=n}),66);
__d("WAWebDbEncryptionKey",["invariant","Promise","WABase64","WALogger","WAResolvable","WATimeUtils","WAWeb-dexie","WAWebDexieCastTypes","WAWebMiscErrors","WAWebPageLoadLogging","asyncToGeneratorRuntime","err"],(function(a,b,c,d,e,f,g,h){var i;function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["Base ftsHMACKey is null in _generateFinalFtsHmacKey"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["App reconnected to chatd, during same session"]);k=function(){return a};return a}var l="wawc_db_enc",m="keys",n=128,o={name:"HKDF"},p={hash:"SHA-256"},q=d("WATimeUtils").WEEK_MILLISECONDS*4*24,r="fts_hmac_keys",s="AES-CBC";a=function(){function a(){var a=this;this._waitUntilFinalDbEncKeyReady=new(d("WAResolvable").Resolvable)();this._waitUntilFinalFtsHmacKeyReady=new(d("WAResolvable").Resolvable)();this._waitUntilInit=new(d("WAResolvable").Resolvable)();this._getOrUpdateEncKeys=function(c){return a._getDbOrThrow().keys.orderBy("id").toArray().then(function(d){if(!d||d.length===0)return a._addNewEncKey(c);var e=d[d.length-1]._expiration;if(e!=null&&e<=new Date().getTime())return a._addNewEncKey(c);a._ephemeralLocalEncSalt=c;e=d.map(function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=(yield self.crypto.subtle.deriveKey(babelHelpers["extends"]({},o,p,{salt:c,info:new Uint8Array(1)}),a.key,{name:s,length:n},!1,["encrypt","decrypt"]));return babelHelpers["extends"]({},a,{key:b})});return function(b){return a.apply(this,arguments)}}());return(i||(i=b("Promise"))).all(e).then(function(b){a._keys=b})})};this._getOrUpdateFtsKey=function(){return a._getDbOrThrow()[r].orderBy("id").toArray().then(function(b){if(!b||b.length===0)return a._addNewFtsHMACKey();if(b.length>1)throw new(d("WAWebMiscErrors").DBInvalidFtsHMACKey)();a._ftsHMACKey=b[b.length-1]})};this._addNewEncKey=function(b){return t().then(function(c){return a._getDbOrThrow().keys.add({key:c,_expiration:new Date().getTime()+q}).then(function(){return a._getOrUpdateEncKeys(b)})})};this._addNewFtsHMACKey=function(){return t().then(function(b){return a._getDbOrThrow()[r].add({key:b}).then(function(){return a._getOrUpdateFtsKey()})})};this.generateFinalDbEncryptionAndFtsKey=function(c){if(a._finalDbMsgEncKeys!=null||a._ephemeralLocalEncSalt==null){d("WALogger").DEV(k()).tags("db-encryption-key");return(i||(i=b("Promise"))).resolve()}c=d("WABase64").decodeB64(c);a._generateFinalFtsHmacKey(c);a._generateFinalDbMsgEncryptionKey(c);return(i||(i=b("Promise"))).resolve()};this._generateFinalDbMsgEncryptionKey=function(c){d("WAWebPageLoadLogging").startPageLoadQplMeasure("generateFinalDbMsgEncryptionKey");var e=a._getDbOrThrow().keys.orderBy("id").toArray().then(function(d){d=d.map(function(){var d=b("asyncToGeneratorRuntime").asyncToGenerator(function*(b){a._ephemeralLocalEncSalt!=null||h(0,56319);var d;try{d=(yield self.crypto.subtle.deriveKey(babelHelpers["extends"]({},o,p,{salt:c,info:new Uint8Array(a._ephemeralLocalEncSalt||0)}),b.key,{name:s,length:n},!1,["encrypt","decrypt"]))}catch(b){a._ephemeralLocalEncSalt=null;throw b}return babelHelpers["extends"]({},b,{key:d})});return function(a){return d.apply(this,arguments)}}());return(i||(i=b("Promise"))).all(d).then(function(b){a._ephemeralLocalEncSalt=null,a._finalDbMsgEncKeys=b,a._waitUntilFinalDbEncKeyReady.resolve()})});return e["finally"](function(){d("WAWebPageLoadLogging").endPageLoadQplMeasure("generateFinalDbMsgEncryptionKey"),a._ephemeralLocalEncSalt=null})};this._generateFinalFtsHmacKey=function(){var c=b("asyncToGeneratorRuntime").asyncToGenerator(function*(b){if(!a._ftsHMACKey||a._ftsHMACKey.key==null||a._ftsHMACKey.id==null){d("WALogger").LOG(j());throw new(d("WAWebMiscErrors").DBInvalidFtsHMACKey)()}var c=[a._ftsHMACKey.id,a._ftsHMACKey.key],e=c[0];c=c[1];b=(yield self.crypto.subtle.deriveKey(babelHelpers["extends"]({},o,p,{salt:b,info:new Uint8Array(0)}),c,{name:"HMAC",hash:"SHA-256"},!1,["sign"]));a._finalFtsHmacKey={id:e,key:b};a._waitUntilFinalFtsHmacKeyReady.resolve()});return function(a){return c.apply(this,arguments)}}()}var e=a.prototype;e.init=function(a){var e,f=this;if(this._db)return(i||(i=b("Promise"))).resolve();this._db=new(c("WAWeb-dexie"))(l,{chromeTransactionDurability:"relaxed",addons:[]});this._getDbOrThrow().version(1).stores((e={},e[m]="++id, _expirtation",e[r]="++id",e));this._getDbOrThrow().version(2).stores((e={},e[m]="++id",e[r]="++id",e));var g=a.buffer.slice(a.byteOffset,a.byteLength+a.byteOffset);return d("WAWebDexieCastTypes").dexieCastToPromise(this._getDbOrThrow().open()).then(function(){return(i||(i=b("Promise"))).all([f._getOrUpdateEncKeys(g),f._getOrUpdateFtsKey()])}).then(function(){return f._waitUntilInit.resolve()})};e._getDbOrThrow=function(){if(this._db==null)throw c("err")("[db_encryption_key] db is not initialized");return this._db};e.deleteKeys=function(){var a=this;return(i||(i=b("Promise"))).all([this._getDbOrThrow().table(m).clear(),this._getDbOrThrow().table(r).clear()]).then(function(){return})["finally"](function(){a._db=null;return d("WAWebDexieCastTypes").dexieCastToPromise(c("WAWeb-dexie")["delete"](l))["catch"](function(){return c("WAWeb-dexie")["delete"](l)})})};e.resetDB=function(){var a;(a=this._db)==null?void 0:a.close();this._db=null};e.deleteKeyCache=function(){this._keys=null,this._ftsHMACKey=null,this._finalDbMsgEncKeys=null,this._waitUntilFinalDbEncKeyReady=new(d("WAResolvable").Resolvable)(),this._waitUntilFinalFtsHmacKeyReady=new(d("WAResolvable").Resolvable)(),this._finalFtsHmacKey=null,this._ephemeralLocalEncSalt=null,this._waitUntilInit=new(d("WAResolvable").Resolvable)()};e.waitForFinalDbMsgEncKey=function(){return this._waitUntilFinalDbEncKeyReady.promise};e.waitForFinalFtsHmacKey=function(){return this._waitUntilFinalFtsHmacKeyReady.promise};e.waitForInit=function(){return this._waitUntilInit.promise};e.getEncKeys=function(){if(!this._keys)throw new(d("WAWebMiscErrors").DbEncKeyNotLoaded)(m);return this._keys};e.getDbMsgEncKeys=function(a){if(!this._finalDbMsgEncKeys)throw new(d("WAWebMiscErrors").DbMsgEncKeyNotLoaded)(a.tableName);return this._finalDbMsgEncKeys};e.getFtsHMACKey=function(){if(!this._finalFtsHmacKey)throw new(d("WAWebMiscErrors").DbEncKeyNotLoaded)(r);return this._finalFtsHmacKey};return a}();function t(){var a=new Uint8Array(n);self.crypto.getRandomValues(a);return self.crypto.subtle.importKey("raw",a,o,!1,["deriveKey"])}e=new a();g.DB_ENCRYPTION_CIPHER=s;g.DbEncKeyStore=e}),98);
__d("WAWebEventEmitter",["err"],(function(a,b,c,d,e,f,g){var h=/\s+/,i=0;a=function(){function a(){}var b=a.prototype;b.on=function(a,b,d){var e;if(!b)return this;if(typeof b!=="function")throw c("err")("Callback parameter passed is not a function");if(this._multiEvent.apply(this,[this.on].concat(Array.prototype.slice.call(arguments))))return this;this._getOrCreateEvents(a).push({callback:b,context:d,ctx:(e=d)!=null?e:this});return this};b.once=function(a,b,c){if(!b)return this;if(this._multiEvent.apply(this,[this.once].concat(Array.prototype.slice.call(arguments))))return this;var d=this,e=!1,f=function c(){e||(e=!0,d.off(a,c),b.apply(this,arguments))};f._callback=b;return this.on(a,f,c)};b.off=function(a,b,c){var d=this._events;if(!d)return this;if(this._multiEvent.apply(this,[this.off].concat(Array.prototype.slice.call(arguments))))return this;if(!a&&b==null&&c==null){this._events=void 0;return this}var e=a?[a]:Object.keys(d);for(var f=0;f<e.length;f++){var g=e[f],h=d[g];if(!h)continue;d[g]=[];if(b!=null||c!=null)for(var i=0;i<h.length;i++){var j=h[i];(b&&b!==j.callback&&b!==j.callback._callback||c!=null&&j.context!==c)&&d[g].push(j)}d[g].length||delete d[g]}return this};b.trigger=function(a){for(var b=arguments.length,c=new Array(b>1?b-1:0),d=1;d<b;d++)c[d-1]=arguments[d];if(!this._events)return this;if(this._multiEvent.apply(this,[this.trigger].concat(Array.prototype.slice.call(arguments))))return this;var e=this._getEvents(a),f=this._getEvents("all");e&&this._triggerEvents(e,c);f&&this._triggerEvents(f,arguments);return this};b.stopListening=function(a,b,c){var d,e=this._listeningTo;if(!e)return this;var f=a==null?void 0:a._listenId;f=f?(d={},d[f]=a,d):e;a=!b&&!c;for(d in f){var g=f[d];g.off(b,c,this);g=g._events;(a||!g||Object.keys(g).length===0)&&delete e[d]}(!this._listeningTo||Object.keys(this._listeningTo).length===0)&&delete this._listeningTo;return this};b.listenTo=function(a,b,c){if(!c)return this;this._addListeningTo(a);a.on(b,c,this);return this};b.listenToOnce=function(a,b,c){this._addListeningTo(a);a.once(b,c,this);return this};b.listenToAndRun=function(a,b,c){this.listenTo.apply(this,arguments);c.apply(this);return this};b.isListening=function(a){var b=this._events;return!b?!1:typeof a==="string"?!!b[a]:Object.keys(b).length===0};b._addListeningTo=function(a){var b=this._listeningTo||(this._listeningTo={}),c=a._listenId||(a._listenId="l"+ ++i);b[c]=a};b._getOrCreateEvents=function(a){var b=this._events||(this._events={});return b[a]||(b[a]=[])};b._getEvents=function(a){if(!a)return;var b=this._events;if(!b)return;return b[a]};b._multiEvent=function(a,b){if(h.test(b)){var c=b.split(h);for(var d=arguments.length,e=new Array(d>2?d-2:0),f=2;f<d;f++)e[f-2]=arguments[f];for(var g=0;g<c.length;g++)a.call.apply(a,[this,c[g]].concat(e));return!0}return!1};b._triggerEvents=function(a,b){var c,d=-1,e=a.length,f=b[0],g=b[1],h=b[2];switch(b.length){case 0:while(++d<e)(c=a[d]).callback.call(c.ctx);return;case 1:while(++d<e)(c=a[d]).callback.call(c.ctx,f);return;case 2:while(++d<e)(c=a[d]).callback.call(c.ctx,f,g);return;case 3:while(++d<e)(c=a[d]).callback.call(c.ctx,f,g,h);return;default:while(++d<e)(c=a[d]).callback.apply(c.ctx,b);return}};b.bind=function(a,b,c){return this.on.apply(this,arguments)};b.unbind=function(a,b,c){return this.off.apply(this,arguments)};b.removeListener=function(a,b,c){return this.off.apply(this,arguments)};b.removeAllListeners=function(){return this.off()};b.emit=function(a){for(var b=arguments.length,c=new Array(b>1?b-1:0),d=1;d<b;d++)c[d-1]=arguments[d];return this.trigger(arguments)};return a}();g["default"]=a}),98);
__d("WAWebStorageSchema",["invariant","$InternalEnum","err"],(function(a,b,c,d,e,f,g,h){var i=b("$InternalEnum")({AUTO_INCREMENT:"auto-increment",USER_DEFINED:"user-defined",COMPOSITE:"composite"}),j=Object.freeze({SIMPLE:"simple",COMPOSITE:"composite",ARRAY:"array",UNIQUE:"unique"});b=b("$InternalEnum")({STRING:"String",ARRAY_BUFFER:"ArrayBuffer"});function a(a){return{name:a,columns:[],indexes:[],encryptedColumns:{}}}function d(a){return{name:a.name,columns:a.columns.map(function(a){return babelHelpers["extends"]({},a)}),indexes:a.indexes.map(l),encryptedColumns:babelHelpers["extends"]({},a.encryptedColumns||{}),deleted:a.deleted}}function e(a){return Object.freeze({name:a.name,columns:Object.freeze(a.columns.map(Object.freeze)),indexes:Object.freeze(a.indexes.map(k)),encryptedColumns:Object.freeze(babelHelpers["extends"]({},a.encryptedColumns||{})),deleted:a.deleted})}function k(a){switch(a.type){case j.SIMPLE:return Object.freeze({type:j.SIMPLE,column:a.column});case j.ARRAY:return Object.freeze({type:j.ARRAY,column:a.column});case j.COMPOSITE:return Object.freeze({type:j.COMPOSITE,columns:Object.freeze(a.columns.map(Object.freeze))});case j.UNIQUE:return Object.freeze({type:j.UNIQUE,column:a.column})}throw c("err")("cannot freeze index of unknown type: "+a.type)}function l(a){switch(a.type){case j.SIMPLE:return{type:j.SIMPLE,column:a.column};case j.UNIQUE:return{type:j.UNIQUE,column:a.column};case j.COMPOSITE:return{type:j.COMPOSITE,columns:a.columns.map(function(a){return a})};case j.ARRAY:return{type:j.ARRAY,column:a.column}}throw c("err")("cannot clone unknown index type: "+a.type)}function f(a,b){return a.indexes.findIndex(function(a){return n(b,a)})}function m(a,b){switch(a.type){case j.SIMPLE:case j.ARRAY:case j.UNIQUE:return a.column===b;case j.COMPOSITE:return!!a.columns.find(function(a){return a===b})}throw c("err")("cannot check indexes of unknown index type: "+a.type)}function n(a,b){if(a.type!==b.type)return!1;switch(a.type){case j.SIMPLE:case j.ARRAY:case j.UNIQUE:b.type===a.type||h(0,32791);return a.column===b.column;case j.COMPOSITE:b.type===a.type||h(0,32791);return a.columns.length===b.columns.length&&!a.columns.some(function(a){return!b.columns.includes(a)})}throw c("err")("cannot compare unknown indexes of types: "+a.type+", "+b.type)}g.PrimaryKeyType=i;g.INDEX_TYPE=j;g.EncryptedValueType=b;g.emptySchema=a;g.cloneSchema=d;g.freezeSchema=e;g.findIndex=f;g.indexContainsColumn=m}),98);
__d("WAWebIdb",["invariant","Promise","WALogger","WANullthrows","WAPromiseReduce","WAWeb-dexie","WAWebDbEncryptionKey","WAWebDexieCastTypes","WAWebStorageSchema","asyncToGeneratorRuntime","err","gkx"],(function(a,b,c,d,e,f,g,h){var i;function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["[CRITICAL] Records contain unencrypted field"]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["idb failed to do Operation: "," on Table: ",". Failed with error ",""]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["[storage] trying to query with a non-existing column "," in index ",""]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["[storage] setUpdateListener for ",""]);m=function(){return a};return a}c("WAWeb-dexie").Promise.PSD.onunhandled=function(){};c("WAWeb-dexie").Promise.PSD.txRelaxedDurabilityEnabled=!0;function n(a,b,c,d){return o.apply(this,arguments)}function o(){o=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,e,f){if(!d("WAWebDbEncryptionKey").DbEncKeyStore)throw c("err")("feature is not yet implemented");var g=f?d("WAWebDbEncryptionKey").DbEncKeyStore.getDbMsgEncKeys({tableName:b.tableName}):d("WAWebDbEncryptionKey").DbEncKeyStore.getEncKeys();g=g[g.length-1];var i=new Uint8Array(16);self.crypto.getRandomValues(i);typeof a==="string"?(e===d("WAWebStorageSchema").EncryptedValueType.STRING||h(0,87945,b.tableName,b.columnName,typeof a),e=new TextEncoder().encode(a)):e=a;try{e=self.crypto.subtle.encrypt({iv:i,name:d("WAWebDbEncryptionKey").DB_ENCRYPTION_CIPHER},g.key,e);e=c("WAWeb-dexie").currentTransaction==null?e:c("WAWeb-dexie").waitFor(e);e=(yield d("WAWebDexieCastTypes").dexieCastToPromise(e));return{_data:e,iv:i,_keyId:g.id,_scheme:f?1:0}}catch(c){B(c,"encryptDbMaterial",null,a,b.columnName);throw c}});return o.apply(this,arguments)}var p=["poll-votes","chat","sync-keys","orphan-tc-token"];function q(a,b,c){var e=a._keyId;a=a._scheme;c=c&&!p.includes(b);a=p.includes(b)&&a===1;return c||a?d("WAWebDbEncryptionKey").DbEncKeyStore.getDbMsgEncKeys({tableName:b}).filter(function(a){return a.id===e})[0]:d("WAWebDbEncryptionKey").DbEncKeyStore.getEncKeys().filter(function(a){return a.id===e})[0]}function r(a,b,c,d){return s.apply(this,arguments)}function s(){s=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,e,f){if(!d("WAWebDbEncryptionKey").DbEncKeyStore)throw c("err")("feature is not yet implemented");var g=a._data,i=a.iv,j=null;j=q(a,b.tableName,f);j!=null||h(0,56353);if(g==null)return g;try{a=self.crypto.subtle.decrypt({iv:i,name:d("WAWebDbEncryptionKey").DB_ENCRYPTION_CIPHER},j.key,g);f=c("WAWeb-dexie").currentTransaction==null?a:c("WAWeb-dexie").waitFor(a);i=(yield d("WAWebDexieCastTypes").dexieCastToPromise(f));j=e===d("WAWebStorageSchema").EncryptedValueType.STRING?new TextDecoder("utf-8").decode(i):i;return j}catch(a){B(a,"decryptDbMaterial",null,b.columnName);throw a}});return s.apply(this,arguments)}var t=function(){function a(a,b,c,d,e,f,g){this.updateListener=null,this.updateListenerField=null,this.table=a,this.view=c,this.db=b,this.propFilter=d,this.tableColumns=e,this.tableEncryptedColumns=new Map(Object.keys(f).map(function(a){return[a,f[a]]})),this.shouldUseDbMsgEncKeyForEncryptedCol=g.shouldUseDbMsgEncKeyForEncryptedCol,this.packColumns=g.packColumns}var e=a.prototype;e.asyncView=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){b===void 0&&(b=!0);a=this.$1(a);b=this.$2()&&b?yield this.$3(a):a;return this.view(b)});function c(b,c){return a.apply(this,arguments)}return c}();e.$1=function(a){return a};e.$4=function(a,b){b===void 0;return a};e.$3=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var c=this;typeof a==="object"||h(0,56350);var d=Array.from(this.tableEncryptedColumns.entries()).map(function(b){var d=b[0];b=b[1];var e=a[d];return!(e==null?void 0:e._data)||!(e==null?void 0:e.iv)?e:r(e,{tableName:c.table.name,columnName:d},b,c.shouldUseDbMsgEncKeyForEncryptedCol).then(function(b){a[d]=b})});yield (i||(i=b("Promise"))).all(d);return a});function c(b){return a.apply(this,arguments)}return c}();e.$5=function(a){var c=this,d=Array.from(this.tableEncryptedColumns.entries()).map(function(b){var d=b[0];b=b[1];var e=a[d];return e==null?e:n(e,{tableName:c.table.name,columnName:d},b,c.shouldUseDbMsgEncKeyForEncryptedCol).then(function(b){a[d]=b})});return(i||(i=b("Promise"))).all(d).then(function(b){return a})};e.$6=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){b===void 0&&(b=!1);a=(yield this.$7(a));a=this.$4(a,b);return a});function c(b,c){return a.apply(this,arguments)}return c}();e.$8=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=this;a=(yield this.$9(a));a=a.map(function(a){return b.$4(a)});return a});function c(b){return a.apply(this,arguments)}return c}();e.$10=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a=(yield this.$6(a));return this.table.add(a)});function c(b){return a.apply(this,arguments)}return c}();e.$11=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a=(yield this.$6(a));return this.table.put(a)});function c(b){return a.apply(this,arguments)}return c}();e.$12=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a=(yield this.$8(a));return this.table.bulkAdd(a)});function c(b){return a.apply(this,arguments)}return c}();e.$13=function(a){var b=this;if(this.$2())return c("WAWeb-dexie").waitFor(this.$9(a)).then(function(a){a=a.map(function(a){return b.$4(a)});return b.table.bulkPut(a)});a=a.map(function(a){return b.$4(a)});return this.table.bulkPut(a)};e.$9=function(a){var c=this;if(this.$2()){var d=[],e=a.map(function(a,b){return c.$5(a).then(function(a){d[b]=a})});return(i||(i=b("Promise"))).all(e).then(function(){return d})}return(i||(i=b("Promise"))).resolve(a)};e.$7=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){if(this.$2()){var b=(yield this.$5(a));return b}return a});function c(b){return a.apply(this,arguments)}return c}();e.asyncViewMap=function(a,e){var f=this;e===void 0&&(e=!0);if(!this.$2()||!e)return(i||(i=b("Promise"))).resolve(a.map(function(a){return a?f.view(f.$1(a)):null}));a=a.map(function(a){return a!=null?f.asyncView(a,e):(i||(i=b("Promise"))).resolve(null)});return d("WAWebDexieCastTypes").dexieCastToPromise(c("WAWeb-dexie").currentTransaction==null?(i||(i=b("Promise"))).all(a):c("WAWeb-dexie").waitFor((i||(i=b("Promise"))).all(a)))};e.preflightEncryptSingleRecord=function(a){var b=this;Object.keys(a).forEach(function(c){b.tableEncryptedColumns.has(c)||delete a[c]});return this.$5(a)};e.postflightDecryptSingleRecord=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a=(yield this.$3(a));return this.view(a)});function c(b){return a.apply(this,arguments)}return c}();e.bulkCreateWith_ALREADY_ENCRYPTED_RECORDS_ONLY=function(a){var b=this;if(a.length===0)return d("WAWebDexieCastTypes").dexieCastToPromise();this.updateListener==null?void 0:this.updateListener(a.map(function(a){return b.$14(a)}));a=a.map(function(a){return b.propFilter(a)});C(a,this.tableEncryptedColumns);var c=a.map(function(a){return b.$4(a)});return d("WAWebDexieCastTypes").dexieCastToPromise(this.table.bulkAdd(c))["catch"](function(a){B(a,"bulkCreateWith_ALREADY_ENCRYPTED_RECORDS_ONLY",b.table.name,c);throw a})};e.bulkCreateOrReplace_ALREADY_ENCRYPTED_RECORDS_ONLY=function(a){var b=this;if(a.length===0)return d("WAWebDexieCastTypes").dexieCastToPromise();this.updateListener==null?void 0:this.updateListener(a.map(function(a){return b.$14(a)}));a=a.map(function(a){return b.propFilter(a)});C(a,this.tableEncryptedColumns);var c=a.map(function(a){return b.$4(a)});return d("WAWebDexieCastTypes").dexieCastToPromise(this.table.bulkPut(c))["catch"](function(a){B(a,"bulkCreateOrReplace",b.table.name,c);throw a})};e.create=function(a){var b=this;this.updateListener==null?void 0:this.updateListener([this.$14(a)]);var c=this.propFilter(a);return d("WAWebDexieCastTypes").dexieCastToPromise(this.$10(c))["catch"](function(c){B(c,"create",b.table.name,a);throw c})};e.createOrReplace=function(a){var b=this;this.updateListener==null?void 0:this.updateListener([this.$14(a)]);var c=this.propFilter(a);return d("WAWebDexieCastTypes").dexieCastToPromise(this.$11(c))["catch"](function(c){B(c,"createOrReplace",b.table.name,a);throw c})};e.createOrMerge=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){var c=this;this.updateListener==null?void 0:this.updateListener([a]);var e=this.propFilter(b),f=(yield this.$6(e,!0));return d("WAWebDexieCastTypes").dexieCastToPromise(this.db.transaction("rw",this.table,function(){return c.table.where(":id").equals(a).modify(function(a){Object.assign(a,f)}).then(function(a){if(a===1)return;return c.table.add(f)})}).then(function(){return void 0}))["catch"](function(d){B(d,"createOrMerge",c.table.name,a,b);throw d})});function c(b,c){return a.apply(this,arguments)}return c}();e.get=function(a,b){var c=this;b===void 0&&(b=!0);return d("WAWebDexieCastTypes").dexieCastToPromise(this.table.get(a)).then(function(a){return a?c.asyncView(a,b):null})["catch"](function(b){B(b,"get",c.table.name,a);throw b})};e.merge=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){this.updateListener==null?void 0:this.updateListener([a]);var c=this.propFilter(b);c=(yield this.$6(c,!0));try{yield d("WAWebDexieCastTypes").dexieCastToPromise(this.table.update(a,c)),this.updateListener==null?void 0:this.updateListener([a])}catch(c){B(c,"merge",this.table.name,a,b);throw c}});function c(b,c){return a.apply(this,arguments)}return c}();e.remove=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){try{yield d("WAWebDexieCastTypes").dexieCastToPromise(this.table["delete"](a))}catch(b){B(b,"remove",this.table.name,a);throw b}});function c(b){return a.apply(this,arguments)}return c}();e.bulkCreate=function(a){var b=this;if(a.length===0)return d("WAWebDexieCastTypes").dexieCastToPromise();this.updateListener==null?void 0:this.updateListener(a.map(function(a){return b.$14(a)}));var c=a.map(function(a){return b.propFilter(a)});if(this.$2())return d("WAWebDexieCastTypes").dexieCastToPromise(this.db.transaction("rw",this.table,function(){return b.$12(c)}))["catch"](function(c){B(c,"bulkCreate",b.table.name,a);throw c});var e=c.map(function(a){return b.$4(a)});return d("WAWebDexieCastTypes").dexieCastToPromise(this.table.bulkAdd(e))};e.bulkCreateOrReplace=function(a){var b=this;if(a.length===0)return d("WAWebDexieCastTypes").dexieCastToPromise();this.updateListener==null?void 0:this.updateListener(a.map(function(a){return b.$14(a)}));var c=a.map(function(a){return b.propFilter(a)});if(this.$2())return d("WAWebDexieCastTypes").dexieCastToPromise(this.db.transaction("rw",this.table,function(){return b.$13(c)}))["catch"](function(c){B(c,"bulkCreateOrReplace",b.table.name,a);throw c});var e=c.map(function(a){return b.$4(a)});return d("WAWebDexieCastTypes").dexieCastToPromise(this.table.bulkPut(e))};e.bulkCreateOrMerge=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var c=this;if(a.length===0)return d("WAWebDexieCastTypes").dexieCastToPromise();this.updateListener==null?void 0:this.updateListener(a.map(function(a){return c.$14(a)}));var e=new Map(),f=this.$15(),g=this,i=(yield this.$9(a));i.forEach(function(a){a=c.propFilter(a);a=c.$4(a,!0);f in a||h(0,56352);e.set(a[f],a)});function j(a){return k.apply(this,arguments)}function k(){k=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=g.table.where(":id").anyOf(Array.from(a.keys()));yield b.modify(function(b){Object.assign(b,a.get(b[f])),a["delete"](b[f])});b=Array.from(a.values());return b});return k.apply(this,arguments)}return d("WAWebDexieCastTypes").dexieCastToPromise(this.db.transaction("rw",this.table,function(){return j(e).then(function(a){return a.length===0?d("WAWebDexieCastTypes").dexieCastToPromise():c.table.bulkPut(a)})}))["catch"](function(b){B(b,"bulkCreateOrMerge",c.table.name,a);throw b})});function c(b){return a.apply(this,arguments)}return c}();e.bulkGet=function(a,e){var f=this;e===void 0&&(e=!0);return a.length===0?(i||(i=b("Promise"))).resolve([]):d("WAWebDexieCastTypes").dexieCastToPromise(this.db.transaction("r",this.table,function(){var b=a.map(function(a){return f.table.get(a)});return c("WAWeb-dexie").Promise.all(b)})).then(function(a){return f.asyncViewMap(a,e)})["catch"](function(b){B(b,"bulkGet",f.table.name,a);throw b})};e.bulkRemove=function(a){var c=this;return a.length===0?(i||(i=b("Promise"))).resolve():d("WAWebDexieCastTypes").dexieCastToPromise(this.db.transaction("rw",this.table,function(){return c.table.bulkDelete(a)}))["catch"](function(b){B(b,"bulkRemove",c.table.name,a);throw b})};e.bulkRemoveByIndex=function(a,c){var e=this;return c.length===0?(i||(i=b("Promise"))).resolve():d("WAWebDexieCastTypes").dexieCastToPromise(this.table.where(x(a,this.tableColumns)).anyOf(c)["delete"]())["catch"](function(b){B(b,"bulkRemoveByIndex",e.table.name,a,c);throw b})};e.all=function(a,b){var c=this,e=y(this.table.orderBy((a==null?void 0:a.index)?x(a.index,this.tableColumns):":id"),a);b&&(e=e.until(function(a){return b(c.$1(a))}));var f=null;switch(a==null?void 0:a.returnKeyType){case"keys":f=d("WAWebDexieCastTypes").dexieCastToPromise(e.keys());break;case"primary_key":f=d("WAWebDexieCastTypes").dexieCastToPromise(e.primaryKeys());break;default:f=d("WAWebDexieCastTypes").dexieCastToPromise(e.toArray()).then(function(b){return c.asyncViewMap(b,a==null?void 0:a.shouldDecrypt)})}return f["catch"](function(b){B(b,"all",c.table.name,a);throw b})};e.count=function(){var a=this;return d("WAWebDexieCastTypes").dexieCastToPromise(this.table.count())["catch"](function(b){B(b,"count",a.table.name);throw b})};e.bulkDeleteRange=function(a,b,c,e){var f=this,g=this.table.where(x(a,this.tableColumns)).between(b,c,!!(e==null?void 0:e.lowerInclusive),!!(e==null?void 0:e.upperInclusive));return d("WAWebDexieCastTypes").dexieCastToPromise(y(g,e)["delete"]())["catch"](function(d){B(d,"bulkDeleteRange",f.table.name,a,b,c,e);throw d})};e.equals=function(a,b,c){var e=this;return d("WAWebDexieCastTypes").dexieCastToPromise(y(this.table.where(x(a,this.tableColumns)).equals(b),c).toArray()).then(function(a){return e.asyncViewMap(a,c==null?void 0:c.shouldDecrypt)})["catch"](function(d){B(d,"equals",e.table.name,a,b,c);throw d})};e.anyOf=function(a,c,e){var f=this;return c.length===0?(i||(i=b("Promise"))).resolve([]):d("WAWebDexieCastTypes").dexieCastToPromise(y(this.table.where(x(a,this.tableColumns)).anyOf(c),e).distinct().toArray()).then(function(a){return f.asyncViewMap(a,e==null?void 0:e.shouldDecrypt)})["catch"](function(b){B(b,"anyOf",f.table.name,a,c,e);throw b})};e.startsWithAnyOf=function(a,c,e){var f=this;return c.length===0?(i||(i=b("Promise"))).resolve([]):d("WAWebDexieCastTypes").dexieCastToPromise(y(this.table.where(x(a,this.tableColumns)).startsWithAnyOf(c),e).distinct().toArray()).then(function(a){return f.asyncViewMap(a,e==null?void 0:e.shouldDecrypt)})["catch"](function(b){B(b,"startsWithAnyOf",f.table.name,a,c,e);throw b})};e.greaterThan=function(a,b,c){var e=this,f=(c==null?void 0:c.inclusive)===!0?this.table.where(x(a,this.tableColumns)).aboveOrEqual(b):this.table.where(x(a,this.tableColumns)).above(b);return d("WAWebDexieCastTypes").dexieCastToPromise(y(f,c).toArray()).then(function(a){return e.asyncViewMap(a,c==null?void 0:c.shouldDecrypt)})["catch"](function(d){B(d,"greaterThan",e.table.name,a,b,c);throw d})};e.lessThan=function(a,b,c){var e=this,f=(c==null?void 0:c.inclusive)===!0?this.table.where(x(a,this.tableColumns)).belowOrEqual(b):this.table.where(x(a,this.tableColumns)).below(b);return d("WAWebDexieCastTypes").dexieCastToPromise(y(f,c).toArray()).then(function(a){return e.asyncViewMap(a,c==null?void 0:c.shouldDecrypt)})["catch"](function(d){B(d,"lessThan",e.table.name,a,b,c);throw d})};e.between=function(a,b,c,e,f){var g=this,h=y(this.table.where(x(a,this.tableColumns)).between(b,c,!!(e==null?void 0:e.lowerInclusive),!!(e==null?void 0:e.upperInclusive)),e),i=null;switch(e==null?void 0:e.returnKeyType){case"keys":i=d("WAWebDexieCastTypes").dexieCastToPromise(h.keys());break;case"primary_key":i=d("WAWebDexieCastTypes").dexieCastToPromise(h.primaryKeys());break;default:f?i=d("WAWebDexieCastTypes").dexieCastToPromise(h.until(function(a){return f(g.$1(a))}).toArray()).then(function(a){return g.asyncViewMap(a,e==null?void 0:e.shouldDecrypt)}):i=d("WAWebDexieCastTypes").dexieCastToPromise(h.toArray()).then(function(a){return g.asyncViewMap(a,e==null?void 0:e.shouldDecrypt)})}return i["catch"](function(d){B(d,"between",g.table.name,a,b,c,e);throw d})};e.betweenCount=function(a,b,c,e){var f=this,g=this.table.where(x(a,this.tableColumns)).between(b,c,!!(e==null?void 0:e.lowerInclusive),!!(e==null?void 0:e.upperInclusive));return d("WAWebDexieCastTypes").dexieCastToPromise(y(g,e).count())["catch"](function(d){B(d,"betweenCount",f.table.name,a,b,c,e);throw d})};e.forEachSortedBy=function(a,c){var d=this;return this.table.orderBy(a).each(function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a=d.$1(a);a=(yield d.$3(a));return c(a)});return function(b){return a.apply(this,arguments)}}())["catch"](function(b){B(b,"forEachSortedBy",d.table.name,a,c);throw b})};e.forEach=function(a){var c=this;return this.table.each(function(){var d=b("asyncToGeneratorRuntime").asyncToGenerator(function*(b){b=c.$1(b);b=(yield c.$3(b));return a(b)});return function(a){return d.apply(this,arguments)}}())["catch"](function(b){B(b,"forEach",c.table.name,a);throw b})};e.clear=function(){var a=this;return d("WAWebDexieCastTypes").dexieCastToPromise(this.table.clear())["catch"](function(b){B(b,"clear",a.table.name);throw b})};e.$14=function(a){var b;b=(b=this.updateListenerField)!=null?b:this.$15();return b in a?a[b]:null};e.$15=function(){return this.table.schema.primKey.name};e.$2=function(){return this.tableEncryptedColumns.size>0};e.setUpdateListener=function(a,b){b===void 0&&(b=null),d("WALogger").LOG(m(),this.table.name),this.updateListener=a,this.updateListenerField=b};return a}();a=function(){function a(a,b){this.tableNames=new Map(),this.tableColumns=new Map(),this.tableEncryptedColumns=new Map(),this.errorHandlers=new Map(),this.name=a,this.db=new(c("WAWeb-dexie"))(this.name,{chromeTransactionDurability:"relaxed",addons:[]}),this.transformSchema=(b==null?void 0:b.transformSchema)||z,this.packColumns=!!(b==null?void 0:b.packColumns)}var e=a.prototype;e.initialize=function(a,b,c,d){var e=this;d&&(this.errorHandlers=d);return u(b,this.tableNames,this.tableColumns,this.tableEncryptedColumns,this.transformSchema).then(function(b){e.db.version(a+1).stores(b).upgrade(function(a){if(c){return(a=a[c.name])==null?void 0:a.toCollection().modify(c.callback)}})})};e.open=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){yield d("WAWebDexieCastTypes").dexieCastToPromise(this.db.open())});function c(){return a.apply(this,arguments)}return c}();e.transact=function(a,b,c){var e=this;c===void 0&&(c="rw");return d("WAWebDexieCastTypes").dexieCastToPromise(this.db.transaction(c,a,function(){return b()}))["catch"](function(a){var b=e.errorHandlers.get(a.name);if(b)b(a);else throw a})};e.close=function(){this.db.close();return d("WAWebDexieCastTypes").dexieCastToPromise()};e.view=function(a,b,d,e){this.tableNames.has(a)||h(0,75743,a);this.tableColumns.has(a)||h(0,75744,a);d=d?A(this.tableColumns.get(a)):function(a){return a};return new t(this.db.table(this.tableNames.get(a)),this.db,b,d,c("WANullthrows")(this.tableColumns.get(a)),c("WANullthrows")(this.tableEncryptedColumns.get(a)),{shouldUseDbMsgEncKeyForEncryptedCol:e,packColumns:this.packColumns})};e.available=function(){return(i||(i=b("Promise"))).resolve(!0)};e.reset=function(){this.tableNames=new Map();return d("WAWebDexieCastTypes").dexieCastToPromise(this.db["delete"]())};e.getDbName=function(){return this.name};return a}();function u(a,b,c,e,f){return d("WAPromiseReduce").promiseReduce(a,function(a,g){return f(d("WAWebStorageSchema").cloneSchema(g)).then(function(d){d.name in a&&h(0,56349);if(d.deleted===!0){a[d.name]=null;return a}b.set(g.name,d.name);c.set(g.name,d.columns.reduce(function(a,b){a.set(b.name,b);return a},new Map()));e.set(g.name,d.encryptedColumns||{});var f=d.columns.filter(function(a){return a.primaryKey});f.length>=1||h(0,75745,g.name);f=[v(f)].concat(d.indexes.map(w)).join(", ");a[d.name]=f;return a})},{})}function v(a){if(a.length>1){a.forEach(function(a){a.primaryKey&&a.primaryKey===d("WAWebStorageSchema").PrimaryKeyType.COMPOSITE||h(0,56354)});return"["+a.map(function(a){return a.packedName}).join("+")+"]"}a=a[0];a.primaryKey&&a.primaryKey!==d("WAWebStorageSchema").PrimaryKeyType.COMPOSITE||h(0,56354);return a.primaryKey===d("WAWebStorageSchema").PrimaryKeyType.AUTO_INCREMENT?a.packedName+"++":a.packedName}function w(a){switch(a.type){case d("WAWebStorageSchema").INDEX_TYPE.SIMPLE:return a.column;case d("WAWebStorageSchema").INDEX_TYPE.COMPOSITE:return"["+a.columns.join("+")+"]";case d("WAWebStorageSchema").INDEX_TYPE.ARRAY:return"*"+a.column;case d("WAWebStorageSchema").INDEX_TYPE.UNIQUE:return"&"+a.column}throw c("err")('Cannot format index of type "'+a.type+'"')}function x(a,b){var e=a.map(function(e){var f=b.get(e);if(f==null){d("WALogger").ERROR(l(),e,a.join(","));throw c("err")("format-query-index-nonexistent-column")}return f.packedName});return e.length===1?e[0]:"["+e.join("+")+"]"}function y(a,b){a=a;(b==null?void 0:b.reverse)===!0&&(a=a.reverse());(b==null?void 0:b.offset)!=null&&(a=a.offset(b.offset));(b==null?void 0:b.limit)!=null&&b.limit!==0&&(a=a.limit(b.limit));return a}function z(a){return(i||(i=b("Promise"))).resolve(a)}function A(a){return!a?function(a){return a}:function(b){var c={};a.forEach(function(a){a=a.name;Object.prototype.hasOwnProperty.call(b,a)&&(c[a]=b[a])});return c}}function B(a,b,c){d("WALogger").WARN(k(),b,c,a).sendLogs("storage-error",{sampling:0}).verbose()}function C(a,b){var e=Array.from(b.entries());a.forEach(function(a){e.forEach(function(b){var e=b[0];b[1];if(!a[e])return;if(a[e]._keyId&&a[e]._data&&a[e].iv)return;if(!c("gkx")("26258"))throw c("err")("[CRITICAL] Records contain unencrypted field");d("WALogger").LOG(j())})})}g["default"]=a}),98);
__d("WAWebNoop",[],(function(a,b,c,d,e,f){"use strict";a=function(){};b=a;f["default"]=b}),66);
__d("WAWebProfiler",["WALogger","WAShiftTimer","WATypeUtils","WAWebNoop","gkx"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["[db-read-write-stats] table = ",", reads = ",", writes = ",""]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["error while generating profiler report"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["[db-read-write-stats] Read/Write stats for the last "," seconds"]);j=function(){return a};return a}var k=20,l=function(a){this.val=a,this.prev=null,this.next=null},m=function(){function a(){this.head=new l(null),this.tail=new l(null),this.head.next=this.tail,this.tail.prev=this.head,this.size=0}var b=a.prototype;b.add=function(a){var b=this.tail.prev;b&&(a.prev=b,a.next=this.tail,b.next=a,this.tail.prev=a,this.size++)};return a}(),n=60,o=60;a=function(){function a(){var a=this;if(c("gkx")("26258")){this.dbLockStats=new Map();this.dbReadWriteStats=new Map();this.seen=new Map();this.reports={};this.removeOlderLockStatsTimer=new(d("WAShiftTimer").ShiftTimer)(c("WAWebNoop"));this.logReadWriteStatsTimer=new(d("WAShiftTimer").ShiftTimer)(c("WAWebNoop"));return}this.dbLockStats=new Map();this.dbReadWriteStats=new Map();this.seen=new Map();this.reports={};this.removeOlderLockStatsTimer=new(d("WAShiftTimer").ShiftTimer)(function(){var b=Date.now();a.dbLockStats.forEach(function(a,c){c=a.head.next;var d=a.tail;while(((e=c)==null?void 0:e.val)&&c!==d){var e;if(b-c.val.t<=n*1e3)break;e=c.prev;var f=c.next;e&&f&&(c.next=null,c.prev=null,e.next=f,f.prev=e,a.size--);c=f}});a.removeOlderLockStatsTimer.onOrAfter(n/2*1e3)});this.logReadWriteStatsTimer=new(d("WAShiftTimer").ShiftTimer)(function(){a.dbReadWriteStats.size>0&&typeof window!=="undefined"&&window.document&&(d("WALogger").DEV(j(),o).tags("db-profiler"),a.logDbReadWriteStats(),a.dbReadWriteStats=new Map()),a.logReadWriteStatsTimer.onOrBefore(o*1e3)});this.removeOlderLockStatsTimer.onOrBefore(n/2*1e3);this.logReadWriteStatsTimer.onOrBefore(o*1e3)}var b=a.prototype;b.recordReadStat=function(a){if(c("gkx")("26258"))return;this.dbReadWriteStats.has(a)||this.dbReadWriteStats.set(a,{reads:0,writes:0});a=this.dbReadWriteStats.get(a);a&&a.reads++};b.recordWriteStat=function(a){if(c("gkx")("26258"))return;this.dbReadWriteStats.has(a)||this.dbReadWriteStats.set(a,{reads:0,writes:0});a=this.dbReadWriteStats.get(a);a&&a.writes++};b.recordLockStat=function(a,b){b===void 0&&(b="default");if(c("gkx")("26258"))return;var d=Date.now();this.dbLockStats.has(b)||this.dbLockStats.set(b,new m());var e=this.dbLockStats.get(b);if(!this.seen.has(a)){b={id:a,group:b,t:d,timestamps:[]};this.seen.set(a,b);e.add(new l(b))}(e=this.seen.get(a))==null?void 0:e.timestamps.push(d)};b.lockReport=function(){if(c("gkx")("26258"))return[];var a=[];try{this.dbLockStats.forEach(function(b,c){c={group:c};var e=[],f=b.head.next,g=new Map(),h=0;while(((i=f)==null?void 0:i.val)&&f!==b.tail){var i;i=f.val;var j=i.timestamps[i.timestamps.length-1];if(!d("WATypeUtils").isNumber(i.row)&&i.timestamps.length===3){var k=0;for(;k<e.length;k++)if(e[k]<=i.t){h=k;break}k===e.length?(i.row=e.length,e.push(-1)):i.row=h}g.has(i.row)||g.set(i.row,[]);(k=g.get(i.row))==null?void 0:k.push({timeRange:[i.t,i.timestamps[1]],val:"waiting"});(k=g.get(i.row))==null?void 0:k.push({timeRange:[i.timestamps[1],j],val:"acquired"});k=i.row===void 0?-1:i.row;k!==-1&&(e[k]=Math.max(e[k],j));f=f.next}var l=[];g.forEach(function(a,b){l.push({label:b+"",data:a})});a.push(babelHelpers["extends"]({},c,{data:l}))})}catch(a){d("WALogger").ERROR(i()).verbose().devConsole(a)}return a};b.logDbReadWriteStats=function(a){a===void 0&&(a=!1);if(c("gkx")("26258"))return;Array.from(this.dbReadWriteStats.entries()).filter(function(b){b[0];b=b[1];return a||b.reads+b.writes>k}).sort(function(a,b){a[0];a=a[1];b[0];b=b[1];return b.reads+b.writes-(a.reads+a.writes)}).map(function(a){var b=a[0];a=a[1];return d("WALogger").DEV(h(),b,a.reads,a.writes).tags("db-profiler")})};b["export"]=function(){return c("gkx")("26258")?"":JSON.stringify(this.reports)};b.getAllReports=function(){if(c("gkx")("26258"))return{};this.reports.lock=this.lockReport();return this.reports};return a}();b=new a();e=b;g["default"]=e}),98);
__d("WAWebIdbLogger",["WAWebDBTableUsage","WAWebProfiler","gkx"],(function(a,b,c,d,e,f,g){function a(a){c("gkx")("26258")||c("WAWebProfiler").recordReadStat(a),d("WAWebDBTableUsage").recordTableUsageStat(a,"read")}function b(a,b){!c("gkx")("26258")&&!b&&c("WAWebProfiler").recordWriteStat(a),d("WAWebDBTableUsage").recordTableUsageStat(a,"write")}g.recordReadStat=a;g.recordWriteStat=b}),98);
__d("WAWebIdbLazyView",["Promise","WAWebBrokerGlobalAppState","WAWebIdbLogger","WAWebMiscErrors"],(function(a,b,c,d,e,f,g){var h;a=function(){function a(a,b){this.errorHandlers=new Map(),this._view=a,b&&(this.errorHandlers=b)}var e=a.prototype;e._maybeHandleError=function(a){var b=this.errorHandlers.get(a.name);b&&b(a)};e._read=function(a){var e=this;if(c("WAWebBrokerGlobalAppState").isLogoutInProgress)return(h||(h=b("Promise"))).reject(new(d("WAWebMiscErrors").DbOnLogoutAbort)("dropping db read operation due to logout"));var f=this._view();d("WAWebIdbLogger").recordReadStat(f.table.name);return a(f)["catch"](function(a){e._maybeHandleError(a);throw a})};e._write=function(a,e,f){var g=this;e===void 0&&(e=!1);f===void 0&&(f=!1);if(!e&&c("WAWebBrokerGlobalAppState").isLogoutInProgress)return(h||(h=b("Promise"))).reject(new(d("WAWebMiscErrors").DbOnLogoutAbort)("dropping db write operation due to logout"));e=this._view();d("WAWebIdbLogger").recordWriteStat(e.table.name,f);return a(e)["catch"](function(a){g._maybeHandleError(a);throw a})};e.create=function(a){return this._write(function(b){return b.create(a)})};e.preflightEncryptSingleRecord=function(a){return this._write(function(b){return b.preflightEncryptSingleRecord(a)},!1,!0)};e.postflightDecryptSingleRecord=function(a){return this._write(function(b){return b.postflightDecryptSingleRecord(a)},!1,!0)};e.bulkCreateWith_ALREADY_ENCRYPTED_RECORDS_ONLY=function(a){return this._write(function(b){return b.bulkCreateWith_ALREADY_ENCRYPTED_RECORDS_ONLY(a)})};e.bulkCreateOrReplace_ALREADY_ENCRYPTED_RECORDS_ONLY=function(a){return this._write(function(b){return b.bulkCreateOrReplace_ALREADY_ENCRYPTED_RECORDS_ONLY(a)})};e.createOrReplace=function(a){return this._write(function(b){return b.createOrReplace(a)})};e.createOrMerge=function(a,b){return this._write(function(c){return c.createOrMerge(a,b)})};e.get=function(a,b){return this._read(function(c){return c.get(a,b)})};e.merge=function(a,b){return this._write(function(c){return c.merge(a,b)})};e.remove=function(a){return this._write(function(b){return b.remove(a)})};e.bulkCreate=function(a){return this._write(function(b){return b.bulkCreate(a)})};e.bulkCreateOrReplace=function(a){return this._write(function(b){return b.bulkCreateOrReplace(a)})};e.bulkCreateOrMerge=function(a){return this._write(function(b){return b.bulkCreateOrMerge(a)})};e.bulkGet=function(a,b){return this._read(function(c){return c.bulkGet(a,b)})};e.bulkRemoveByIndex=function(a,b){return this._write(function(c){return c.bulkRemoveByIndex(a,b)})};e.bulkRemove=function(a){return this._write(function(b){return b.bulkRemove(a)})};e.betweenCount=function(a,b,c,d){return this._write(function(e){return e.betweenCount(a,b,c,d)})};e.bulkDeleteRange=function(a,b,c,d){return this._write(function(d){return d.bulkDeleteRange(a,b,c)})};e.all=function(a,b){return this._read(function(c){return c.all(a,b)})};e.count=function(){return this._read(function(a){return a.count()})};e.equals=function(a,b,c){return this._read(function(d){return d.equals(a,b,c)})};e.anyOf=function(a,b,c){return this._read(function(d){return d.anyOf(a,b,c)})};e.startsWithAnyOf=function(a,b,c){return this._read(function(d){return d.startsWithAnyOf(a,b,c)})};e.greaterThan=function(a,b,c){return this._read(function(d){return d.greaterThan(a,b,c)})};e.lessThan=function(a,b,c){return this._read(function(d){return d.lessThan(a,b,c)})};e.between=function(a,b,c,d,e){return this._read(function(f){return f.between(a,b,c,d,e)})};e.forEachSortedBy=function(a,b){return this._read(function(c){return c.forEachSortedBy(a,b)})};e.forEach=function(a){return this._read(function(b){return b.forEach(a)})};e.clear=function(a){a===void 0&&(a=!1);return this._write(function(a){return a.clear()},a)};e.setUpdateListener=function(a,b){b===void 0&&(b=null),this._view().setUpdateListener(a,b)};return a}();g["default"]=a}),98);
__d("WAWebLocalStorage",[],(function(a,b,c,d,e,f){var g;try{g=window.localStorage}catch(a){}a=g;f["default"]=a}),66);
__d("WAWebRuntimeEnvironmentUtils",[],(function(a,b,c,d,e,f){function g(){return typeof WorkerGlobalScope!=="undefined"&&typeof importScripts==="function"}function a(){return g()&&"ServiceWorkerGlobalScope"in self}f.isWorker=g;f.isServiceWorker=a}),66);
__d("WAWebWamEnumWebDbLoaderType",[],(function(a,b,c,d,e,f){a=Object.freeze({MAIN:1,WEB_WORKER:2,SERVICE_WORKER:3});f.WEB_DB_LOADER_TYPE=a}),66);
__d("WAWebWamEnumWebDbNameType",[],(function(a,b,c,d,e,f){a=Object.freeze({MODEL_STORAGE:1,FTS_STORAGE:2,JOBS_STORAGE:3,LOADGEN_STORAGE:4,LRU_MEDIA_STORAGE_IDB:5,OFFD_STORAGE:6,QPL_STORAGE:7,SIGNAL_STORAGE:8,WORKER_STORAGE:9,SW:10,WAWC:11,WAWC_DB_ENC:12});f.WEB_DB_NAME_TYPE=a}),66);
__d("WAWebWebDbLoadFromVersionFailureNonAnonymousWamEvent",["WAWebWamCodegenUtils","WAWebWamEnumWebDbLoaderType","WAWebWamEnumWebDbNameType"],(function(a,b,c,d,e,f,g){a=d("WAWebWamCodegenUtils").defineEvents({WebDbLoadFromVersionFailureNonAnonymous:[4814,{webDbLoader:[1,d("WAWebWamEnumWebDbLoaderType").WEB_DB_LOADER_TYPE],webDbName:[2,d("WAWebWamEnumWebDbNameType").WEB_DB_NAME_TYPE]},[1,1,1],"regular"]},{WebDbLoadFromVersionFailureNonAnonymous:[]});g.WebDbLoadFromVersionFailureNonAnonymousWamEvent=a}),98);
__d("WAWebSchemaVersions",["$InternalEnum","WALogger","WAResolvable","WAWebRuntimeEnvironmentUtils","WAWebWamEnumWebDbLoaderType","WAWebWamEnumWebDbNameType","WAWebWebDbLoadFromVersionFailureNonAnonymousWamEvent","err"],(function(a,b,c,d,e,f,g){function a(){var b=babelHelpers.taggedTemplateLiteralLoose(["[storage] set schema versions after dev override: ",""]);a=function(){return b};return b}function e(){var a=babelHelpers.taggedTemplateLiteralLoose(["[storage] override version url: ",":",""]);e=function(){return a};return a}function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["[storage] set schema versions: ",". is worker? ",""]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["[storage] Schema versions not initialized"]);i=function(){return a};return a}var j=b("$InternalEnum")({ModelStorage:"model-storage",FtsStorage:"fts-storage",JobsStorage:"jobs-storage",LruMediaStorage:"lru-media-storage-idb",OffdStorage:"offd-storage",QplStorage:"qpl-storage",SignalStorage:"signal-storage",WorkerStorage:"worker-storage",SW:"sw",WAWC:"wawc",WAWCDBEnc:"wawc_db_enc"}),k=new(d("WAResolvable").Resolvable)(),l=null;function m(a){switch(a){case j.ModelStorage:return d("WAWebWamEnumWebDbNameType").WEB_DB_NAME_TYPE.MODEL_STORAGE;case j.FtsStorage:return d("WAWebWamEnumWebDbNameType").WEB_DB_NAME_TYPE.FTS_STORAGE;case j.JobsStorage:return d("WAWebWamEnumWebDbNameType").WEB_DB_NAME_TYPE.JOBS_STORAGE;case j.LruMediaStorage:return d("WAWebWamEnumWebDbNameType").WEB_DB_NAME_TYPE.LRU_MEDIA_STORAGE_IDB;case j.OffdStorage:return d("WAWebWamEnumWebDbNameType").WEB_DB_NAME_TYPE.OFFD_STORAGE;case j.QplStorage:return d("WAWebWamEnumWebDbNameType").WEB_DB_NAME_TYPE.QPL_STORAGE;case j.SignalStorage:return d("WAWebWamEnumWebDbNameType").WEB_DB_NAME_TYPE.SIGNAL_STORAGE;case j.WorkerStorage:return d("WAWebWamEnumWebDbNameType").WEB_DB_NAME_TYPE.WORKER_STORAGE;case j.SW:return d("WAWebWamEnumWebDbNameType").WEB_DB_NAME_TYPE.SW;case j.WAWC:return d("WAWebWamEnumWebDbNameType").WEB_DB_NAME_TYPE.WAWC;case j.WAWCDBEnc:return d("WAWebWamEnumWebDbNameType").WEB_DB_NAME_TYPE.WAWC_DB_ENC}}function n(){if(d("WAWebRuntimeEnvironmentUtils").isServiceWorker())return d("WAWebWamEnumWebDbLoaderType").WEB_DB_LOADER_TYPE.SERVICE_WORKER;else if(d("WAWebRuntimeEnvironmentUtils").isWorker())return d("WAWebWamEnumWebDbLoaderType").WEB_DB_LOADER_TYPE.WEB_WORKER;return d("WAWebWamEnumWebDbLoaderType").WEB_DB_LOADER_TYPE.MAIN}function f(){return l!=null}function o(a){if(l==null){var b={webDbLoader:n()};a!=null&&(b.webDbName=m(a));void new(d("WAWebWebDbLoadFromVersionFailureNonAnonymousWamEvent").WebDbLoadFromVersionFailureNonAnonymousWamEvent)(b).commitAndWaitForFlush(!0);d("WALogger").ERROR(i()).sendLogs("[storage] Schema versions not initialized");throw c("err")("Schema versions not initialized")}return l}function p(a){d("WALogger").LOG(h(),Array.from(a),d("WAWebRuntimeEnvironmentUtils").isWorker()),l=a,k.resolve()}function q(){return k.promise}function r(){l=null}g.DatabaseNames=j;g.convertDBName=m;g.getLoaderType=n;g.hasSchemaVersions=f;g.getSchemaVersions=o;g.setSchemaVersions=p;g.waitUntilSchemaVersionsReady=q;g.clearSchemaVersions=r}),98);
__d("WAWebStorageCmd",["WAWebEventEmitter"],(function(a,b,c,d,e,f,g){a=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}return b}(c("WAWebEventEmitter"));b=new a();g.StorageCmd=b}),98);
__d("WAWebStorageMutation",["invariant","err"],(function(a,b,c,d,e,f,g,h){a=function(){function a(a){(a==null?void 0:a.intentionallyUsePrivateConstructor)===!0||h(0,69810),this.constructor.name!=="Mutation"||h(0,56364)}var b=a.prototype;b.validate=function(a){throw c("err")("Subclasses of Mutation must implement `validate`")};b.apply=function(a){throw c("err")("Subclasses of Mutation must implement `apply`")};return a}();g["default"]=a}),98);
__d("WAWebStorageAddArrayIndex",["invariant","WAWebStorageMutation","WAWebStorageSchema"],(function(a,b,c,d,e,f,g,h){a=function(a){babelHelpers.inheritsLoose(b,a);function b(b,c){c=a.call(this,c)||this;c.column=b;return c}var c=b.prototype;c.validate=function(a){var b=this,c=a.columns.find(function(a){return a.packedName===b.column});c||h(0,75731,this.column,a.name);c&&(!c.primaryKey||c.primaryKey===d("WAWebStorageSchema").PrimaryKeyType.COMPOSITE)||h(0,75732,a.name);a.indexes.some(function(a){return(a.type===d("WAWebStorageSchema").INDEX_TYPE.ARRAY||a.type===d("WAWebStorageSchema").INDEX_TYPE.SIMPLE||a.type===d("WAWebStorageSchema").INDEX_TYPE.UNIQUE)&&d("WAWebStorageSchema").indexContainsColumn(a,b.column)})&&h(0,75733,this.column,a.name)};c.apply=function(a){a=d("WAWebStorageSchema").cloneSchema(a);a.indexes.push(this.$AddArrayIndex1());return a};c.$AddArrayIndex1=function(){return{type:d("WAWebStorageSchema").INDEX_TYPE.ARRAY,column:this.column}};return b}(c("WAWebStorageMutation"));g["default"]=a}),98);
__d("WAWebStorageAddColumn",["invariant","WAWebStorageMutation","WAWebStorageSchema"],(function(a,b,c,d,e,f,g,h){a=function(a){babelHelpers.inheritsLoose(b,a);function b(b,c,d){d=a.call(this,d)||this;d.name=b;d.packedName=c;return d}var c=b.prototype;c.validate=function(a){var b=this;a.columns.find(function(a){return a.name===b.name})&&h(0,75717,this.name,a.name)};c.apply=function(a){a=d("WAWebStorageSchema").cloneSchema(a);a.columns.push({name:this.name,packedName:this.packedName});return a};return b}(c("WAWebStorageMutation"));g["default"]=a}),98);
__d("WAWebStorageAddCompositeIndex",["invariant","WAWebStorageMutation","WAWebStorageSchema"],(function(a,b,c,d,e,f,g,h){a=function(a){babelHelpers.inheritsLoose(b,a);function b(b,c){c=a.call(this,c)||this;c.columns=[].concat(b);return c}var c=b.prototype;c.validate=function(a){var b=this;this.columns.forEach(function(b){a.columns.find(function(a){return a.packedName===b})||h(0,75731,b,a.name)});this.columns.length>1||h(0,56264);d("WAWebStorageSchema").findIndex(a,this.$AddCompositeIndex1())===-1||h(0,75735,String(this.columns),a.name);var c=a.columns.filter(function(a){return a.primaryKey&&a.primaryKey===d("WAWebStorageSchema").PrimaryKeyType.COMPOSITE}).map(function(a){return a.name});c.length!==this.columns.length||c.some(function(a){return!b.columns.includes(a)})||h(0,75736,String(this.columns),a.name)};c.apply=function(a){a=d("WAWebStorageSchema").cloneSchema(a);a.indexes.push(this.$AddCompositeIndex1());return a};c.$AddCompositeIndex1=function(){return{type:d("WAWebStorageSchema").INDEX_TYPE.COMPOSITE,columns:this.columns}};return b}(c("WAWebStorageMutation"));g["default"]=a}),98);
__d("WAWebStorageAddEncryptedColumn",["invariant","WAWebStorageMutation","WAWebStorageSchema"],(function(a,b,c,d,e,f,g,h){a=function(a){babelHelpers.inheritsLoose(b,a);function b(b,c,d,e){e=a.call(this,e)||this;e.name=b;e.packedName=c;e.dataType=d;return e}var c=b.prototype;c.validate=function(a){var b=this;a.columns.find(function(a){return a.name===b.name})&&h(0,75738,this.name,a.name)};c.apply=function(a){a=d("WAWebStorageSchema").cloneSchema(a);a.columns.push({name:this.name,packedName:this.packedName});a.encryptedColumns[this.name]=this.dataType;return a};return b}(c("WAWebStorageMutation"));g["default"]=a}),98);
__d("WAWebStorageAddIndex",["invariant","WAWebStorageMutation","WAWebStorageSchema"],(function(a,b,c,d,e,f,g,h){a=function(a){babelHelpers.inheritsLoose(b,a);function b(b,c){c=a.call(this,c)||this;c.keyPath=b;c.column=b.split(".")[0];return c}var c=b.prototype;c.validate=function(a){var b=this,c=a.columns.find(function(a){return a.packedName===b.column});c||h(0,75731,this.column,a.name);c&&(!c.primaryKey||c.primaryKey===d("WAWebStorageSchema").PrimaryKeyType.COMPOSITE)||h(0,75732,a.name);a.indexes.some(function(a){return(a.type===d("WAWebStorageSchema").INDEX_TYPE.ARRAY||a.type===d("WAWebStorageSchema").INDEX_TYPE.SIMPLE||a.type===d("WAWebStorageSchema").INDEX_TYPE.UNIQUE)&&d("WAWebStorageSchema").indexContainsColumn(a,b.column)})&&h(0,75733,this.column,a.name)};c.apply=function(a){a=d("WAWebStorageSchema").cloneSchema(a);a.indexes.push(this.$AddIndex1());return a};c.$AddIndex1=function(){return{type:d("WAWebStorageSchema").INDEX_TYPE.SIMPLE,column:this.keyPath}};return b}(c("WAWebStorageMutation"));g["default"]=a}),98);
__d("WAWebStorageAddUniqueIndex",["invariant","WAWebStorageMutation","WAWebStorageSchema"],(function(a,b,c,d,e,f,g,h){a=function(a){babelHelpers.inheritsLoose(b,a);function b(b,c){c=a.call(this,c)||this;c.column=b;return c}var c=b.prototype;c.validate=function(a){var b=this,c=a.columns.find(function(a){return a.packedName===b.column});c||h(0,75731,this.column,a.name);c&&(!c.primaryKey||c.primaryKey===d("WAWebStorageSchema").PrimaryKeyType.COMPOSITE)||h(0,75732,a.name);a.indexes.some(function(a){return(a.type===d("WAWebStorageSchema").INDEX_TYPE.ARRAY||a.type===d("WAWebStorageSchema").INDEX_TYPE.SIMPLE||a.type===d("WAWebStorageSchema").INDEX_TYPE.UNIQUE)&&d("WAWebStorageSchema").indexContainsColumn(a,b.column)})&&h(0,75733,this.column,a.name)};c.apply=function(a){a=d("WAWebStorageSchema").cloneSchema(a);a.indexes.push(this.$AddUniqueIndex1());return a};c.$AddUniqueIndex1=function(){return{type:d("WAWebStorageSchema").INDEX_TYPE.UNIQUE,column:this.column}};return b}(c("WAWebStorageMutation"));g["default"]=a}),98);
__d("WAWebStorageAbstractPrimaryKey",["invariant","WAWebStorageMutation","err"],(function(a,b,c,d,e,f,g,h){a=function(a){babelHelpers.inheritsLoose(b,a);function b(b,c){c=a.call(this,c)||this;c.constructor.name!=="AbstractPrimaryKey"||h(0,56321);Array.isArray(b)?c.columns=[].concat(b):c.columns=[b];return c}var d=b.prototype;d.validate=function(a){a.columns.length===0||h(0,56320)};d.apply=function(a){throw c("err")("Subclass of `AbstractPrimaryKey` must implement `apply` method")};return b}(c("WAWebStorageMutation"));g["default"]=a}),98);
__d("WAWebStorageAutoIncrementingPrimaryKey",["invariant","WAWebStorageAbstractPrimaryKey","WAWebStorageSchema"],(function(a,b,c,d,e,f,g,h){a=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}var c=b.prototype;c.validate=function(b){a.prototype.validate.call(this,b),this.columns&&this.columns.length===1||h(0,56293)};c.apply=function(a){a=d("WAWebStorageSchema").cloneSchema(a);a.columns.unshift({name:this.columns[0].name,packedName:this.columns[0].packedName,primaryKey:d("WAWebStorageSchema").PrimaryKeyType.AUTO_INCREMENT});return a};return b}(c("WAWebStorageAbstractPrimaryKey"));g["default"]=a}),98);
__d("WAWebStorageCompositePrimaryKey",["invariant","WAWebStorageAbstractPrimaryKey","WAWebStorageSchema"],(function(a,b,c,d,e,f,g,h){a=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}var c=b.prototype;c.validate=function(b){a.prototype.validate.call(this,b),this.columns&&this.columns.length>1||h(0,56266)};c.apply=function(a){var b=d("WAWebStorageSchema").cloneSchema(a);this.columns.forEach(function(a){b.columns.push({name:a.name,packedName:a.packedName,primaryKey:d("WAWebStorageSchema").PrimaryKeyType.COMPOSITE})});return b};return b}(c("WAWebStorageAbstractPrimaryKey"));g["default"]=a}),98);
__d("WAWebStorageRemoveArrayIndex",["invariant","WAWebStorageMutation","WAWebStorageSchema"],(function(a,b,c,d,e,f,g,h){a=function(a){babelHelpers.inheritsLoose(b,a);function b(b,c){c=a.call(this,c)||this;c.column=b;return c}var c=b.prototype;c.validate=function(a){d("WAWebStorageSchema").findIndex(a,this.$RemoveArrayIndex1())!==-1||h(0,75718,this.column,a.name)};c.apply=function(a){var b=d("WAWebStorageSchema").cloneSchema(a);a=d("WAWebStorageSchema").findIndex(a,this.$RemoveArrayIndex1());b.indexes.splice(a,1);return b};c.$RemoveArrayIndex1=function(){return{type:d("WAWebStorageSchema").INDEX_TYPE.ARRAY,column:this.column}};return b}(c("WAWebStorageMutation"));g["default"]=a}),98);
__d("WAWebStorageRemoveColumn",["invariant","WAWebStorageMutation","WAWebStorageSchema"],(function(a,b,c,d,e,f,g,h){a=function(a){babelHelpers.inheritsLoose(b,a);function b(b,c){c=a.call(this,c)||this;c.name=b;return c}var c=b.prototype;c.validate=function(a){var b=this,c=a.columns.find(function(a){return a.name===b.name});c||h(0,75721,this.name,a.name);c.primaryKey&&h(0,75722,this.name);a.indexes.some(function(a){return d("WAWebStorageSchema").indexContainsColumn(a,b.name)})&&h(0,75723,this.name,a.name)};c.apply=function(a){var b=this;a=d("WAWebStorageSchema").cloneSchema(a);a.columns.splice(a.columns.findIndex(function(a){return a.name===b.name}),1);return a};return b}(c("WAWebStorageMutation"));g["default"]=a}),98);
__d("WAWebStorageRemoveCompositeIndex",["invariant","WAWebStorageMutation","WAWebStorageSchema"],(function(a,b,c,d,e,f,g,h){a=function(a){babelHelpers.inheritsLoose(b,a);function b(b,c){c=a.call(this,c)||this;c.columns=b.toSorted();return c}var c=b.prototype;c.validate=function(a){d("WAWebStorageSchema").findIndex(a,this.$RemoveIndex1())!==-1||h(0,75726,String(this.columns),a.name)};c.apply=function(a){var b=d("WAWebStorageSchema").cloneSchema(a);a=d("WAWebStorageSchema").findIndex(a,this.$RemoveIndex1());b.indexes.splice(a,1);return b};c.$RemoveIndex1=function(){return{type:d("WAWebStorageSchema").INDEX_TYPE.COMPOSITE,columns:this.columns}};return b}(c("WAWebStorageMutation"));g["default"]=a}),98);
__d("WAWebStorageRemoveIndex",["invariant","WAWebStorageMutation","WAWebStorageSchema"],(function(a,b,c,d,e,f,g,h){a=function(a){babelHelpers.inheritsLoose(b,a);function b(b,c){c=a.call(this,c)||this;c.column=b;return c}var c=b.prototype;c.validate=function(a){d("WAWebStorageSchema").findIndex(a,this.$RemoveIndex1())!==-1||h(0,75718,this.column,a.name)};c.apply=function(a){var b=d("WAWebStorageSchema").cloneSchema(a);a=d("WAWebStorageSchema").findIndex(a,this.$RemoveIndex1());b.indexes.splice(a,1);return b};c.$RemoveIndex1=function(){return{type:d("WAWebStorageSchema").INDEX_TYPE.SIMPLE,column:this.column}};return b}(c("WAWebStorageMutation"));g["default"]=a}),98);
__d("WAWebStorageRemoveUniqueIndex",["invariant","WAWebStorageMutation","WAWebStorageSchema"],(function(a,b,c,d,e,f,g,h){a=function(a){babelHelpers.inheritsLoose(b,a);function b(b,c){c=a.call(this,c)||this;c.column=b;return c}var c=b.prototype;c.validate=function(a){d("WAWebStorageSchema").findIndex(a,this.$RemoveUniqueIndex1())!==-1||h(0,75718,this.column,a.name)};c.apply=function(a){var b=d("WAWebStorageSchema").cloneSchema(a);a=d("WAWebStorageSchema").findIndex(a,this.$RemoveUniqueIndex1());b.indexes.splice(a,1);return b};c.$RemoveUniqueIndex1=function(){return{type:d("WAWebStorageSchema").INDEX_TYPE.UNIQUE,column:this.column}};return b}(c("WAWebStorageMutation"));g["default"]=a}),98);
__d("WAWebStorageUserDefinedPrimaryKey",["invariant","WAWebStorageAbstractPrimaryKey","WAWebStorageSchema"],(function(a,b,c,d,e,f,g,h){a=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}var c=b.prototype;c.validate=function(b){a.prototype.validate.call(this,b),this.columns&&this.columns.length===1||h(0,56293)};c.apply=function(a){a=d("WAWebStorageSchema").cloneSchema(a);a.columns.unshift({name:this.columns[0].name,packedName:this.columns[0].packedName,primaryKey:d("WAWebStorageSchema").PrimaryKeyType.USER_DEFINED});return a};return b}(c("WAWebStorageAbstractPrimaryKey"));g["default"]=a}),98);
__d("WAWebStorageMutationBuilder",["WAWebStorageAddArrayIndex","WAWebStorageAddColumn","WAWebStorageAddCompositeIndex","WAWebStorageAddEncryptedColumn","WAWebStorageAddIndex","WAWebStorageAddUniqueIndex","WAWebStorageAutoIncrementingPrimaryKey","WAWebStorageCompositePrimaryKey","WAWebStorageRemoveArrayIndex","WAWebStorageRemoveColumn","WAWebStorageRemoveCompositeIndex","WAWebStorageRemoveIndex","WAWebStorageRemoveUniqueIndex","WAWebStorageUserDefinedPrimaryKey","err"],(function(a,b,c,d,e,f,g){function a(a){var b={};return function(c){if(b[c])return b[c];var d=a(c);b[c]=d;return d}}var h=a(b);function b(a){a=a;var b=[];while(a>0){a--;var c=a%26;b.push(String.fromCharCode("a".charCodeAt(0)+c));a=Math.floor(a/26)}b.reverse();return b.join("")}function d(a,b){var d={intentionallyUsePrivateConstructor:!0};if((a==null?void 0:a.packColumns)&&b==null)throw c("err")("[storage-config-error] packing columns enabled, but packing data does not exist");var e=(a==null?void 0:a.packColumns)&&b?b:{},f=function(a){return e[a]!=null?h(e[a]):a};a=function(a){return new(c("WAWebStorageAddColumn"))(a,f(a),d)};b=function(a,b){return new(c("WAWebStorageAddEncryptedColumn"))(a,f(a),b,d)};var g=function(a){return new(c("WAWebStorageUserDefinedPrimaryKey"))({name:a,packedName:f(a)},d)},i=function(a){return new(c("WAWebStorageAutoIncrementingPrimaryKey"))({name:a,packedName:f(a)},d)},j=function(a){return new(c("WAWebStorageCompositePrimaryKey"))(a.map(function(a){return{name:a,packedName:f(a)}}),d)},k=function(a){a=a.split(".")[0];return new(c("WAWebStorageAddIndex"))(f(a),d)},l=function(a){return new(c("WAWebStorageAddArrayIndex"))(f(a),d)},m=function(a){return new(c("WAWebStorageAddCompositeIndex"))(a.map(function(a){return f(a)}),d)},n=function(a){return new(c("WAWebStorageAddUniqueIndex"))(f(a),d)},o=function(a){return new(c("WAWebStorageRemoveColumn"))(a,d)},p=function(a){return new(c("WAWebStorageRemoveIndex"))(f(a),d)},q=function(a){return new(c("WAWebStorageRemoveUniqueIndex"))(f(a),d)},r=function(a){return new(c("WAWebStorageRemoveArrayIndex"))(f(a),d)},s=function(a){return new(c("WAWebStorageRemoveCompositeIndex"))(a.map(function(a){return f(a)}),d)};return{addColumn:a,addEncryptedColumn:b,addUserDefinedPrimaryKey:g,addAutoIncrementingPrimaryKey:i,addCompositePrimaryKey:j,addIndex:k,addArrayIndex:l,addCompositeIndex:m,addUniqueIndex:n,removeColumn:o,removeIndex:p,removeUniqueIndex:q,removeArrayIndex:r,removeCompositeIndex:s}}g.memoize=a;g.columnBuilder=d}),98);
__d("WAWebStorageMutationUtils",["invariant","WAWebStorageAddArrayIndex","WAWebStorageAddColumn","WAWebStorageAddCompositeIndex","WAWebStorageAddEncryptedColumn","WAWebStorageAddIndex","WAWebStorageAddUniqueIndex","WAWebStorageAutoIncrementingPrimaryKey","WAWebStorageCompositePrimaryKey","WAWebStorageRemoveArrayIndex","WAWebStorageRemoveColumn","WAWebStorageRemoveCompositeIndex","WAWebStorageRemoveIndex","WAWebStorageRemoveUniqueIndex","WAWebStorageUserDefinedPrimaryKey"],(function(a,b,c,d,e,f,g,h){var i=[c("WAWebStorageRemoveCompositeIndex"),c("WAWebStorageRemoveArrayIndex"),c("WAWebStorageRemoveUniqueIndex"),c("WAWebStorageRemoveIndex"),c("WAWebStorageRemoveColumn"),c("WAWebStorageAutoIncrementingPrimaryKey"),c("WAWebStorageUserDefinedPrimaryKey"),c("WAWebStorageCompositePrimaryKey"),c("WAWebStorageAddColumn"),c("WAWebStorageAddIndex"),c("WAWebStorageAddArrayIndex"),c("WAWebStorageAddCompositeIndex"),c("WAWebStorageAddUniqueIndex"),c("WAWebStorageAddEncryptedColumn")];function a(a){return a.toSorted(j)}function j(a,b){var c=i.indexOf(a.constructor),d=i.indexOf(b.constructor);c!==-1||h(0,75730,a.constructor.name);d!==-1||h(0,75730,b.constructor.name);return c-d}g.sortMutations=a}),98);
__d("WAWebStorageTableBuilder",["invariant","WAWebStorageMutationUtils","WAWebStorageSchema"],(function(a,b,c,d,e,f,g,h){function i(a){return a}function j(a){return a}a=function(){function a(a,b,c){this.maxVersion=j(-1),this.versions=new Map(),this.upgraders=new Map(),this.shouldEnablePropFilter=!0,this.shouldUseDbMsgEncKeyForEncryptedCol=!0,this.name=a,this.versionManager=b,this.maxVersionAllowedRollout=c}var b=a.prototype;b.version=function(a,b,c){var e=this.versionManager.claim(a,this.maxVersionAllowedRollout,this.name);if(!e)return this;this.versions.has(a)&&h(0,75719,this.name,+a);i(a)>i(this.maxVersion)||h(0,75720,this.name);this.maxVersion=a;e=this.schema(a)||d("WAWebStorageSchema").emptySchema(this.name);b=d("WAWebStorageMutationUtils").sortMutations(b).reduce(function(a,b){b.validate(a);return b.apply(a)},d("WAWebStorageSchema").cloneSchema(e));this.versions.set(a,d("WAWebStorageSchema").freezeSchema(b));this.upgraders.set(a,c);return this};b.devOnlyDoNotUseInitWithMaxVersion=function(a,b){var c=this.versionManager.getMax()+1;c=c;return this.version(c,a,b)};b["delete"]=function(a){var b=this.versionManager.claim(a,this.maxVersionAllowedRollout,this.name);if(!b)return this;this.versions.has(a)&&h(0,75719,this.name,+a);i(a)>i(this.maxVersion)||h(0,75720,this.name);this.maxVersion=a;b=this.schema(a)||d("WAWebStorageSchema").emptySchema(this.name);b=babelHelpers["extends"]({},b,{deleted:!0});this.versions.set(a,d("WAWebStorageSchema").freezeSchema(b));return this};b.view=function(a){this.rowview=a;return this};b.enablePropFilter=function(a){this.shouldEnablePropFilter=a;return this};b.useDbMsgEncKeyForEncryptedCol=function(a){this.shouldUseDbMsgEncKeyForEncryptedCol=a;return this};b.schema=function(a){var b=this.versions.get(a);if(b)return b;b=Array.from(this.versions.keys()).map(i).sort(function(a,b){return a-b}).filter(function(b){return b<i(a)});b=b.pop();if(!b&&b!==0)return null;b=b;return this.versions.get(b)||d("WAWebStorageSchema").emptySchema(this.name)};b.tableExists=function(){return this.maxVersion!==j(-1)};b.commit=function(){return this};return a}();g["default"]=a}),98);
__d("WAWebStorageVersionManager",["WALogger"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["[storage] skipping version "," for table "," since it is higher than max version to rollout ",""]);h=function(){return a};return a}var i=function(b){babelHelpers.inheritsLoose(a,b);function a(){var a,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(a=c=b.call.apply(b,[this].concat(e))||this,c.name="DuplicateVersionError",a)||babelHelpers.assertThisInitialized(c)}return a}(babelHelpers.wrapNativeSuper(Error)),j=function(b){babelHelpers.inheritsLoose(a,b);function a(){var a,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(a=c=b.call.apply(b,[this].concat(e))||this,c.name="InvalidVersionError",a)||babelHelpers.assertThisInitialized(c)}return a}(babelHelpers.wrapNativeSuper(Error)),k=function(b){babelHelpers.inheritsLoose(a,b);function a(){var a,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(a=c=b.call.apply(b,[this].concat(e))||this,c.name="MissingVersionError",a)||babelHelpers.assertThisInitialized(c)}return a}(babelHelpers.wrapNativeSuper(Error));a=function(){function a(){this.versions=new Set(),this.$1=-1}var b=a.prototype;b.claim=function(a,b,c){if(a<0)throw new j("Versions must by greater than or equal to zero!");if(this.versions.has(a))throw new i("Version #"+a+" has already been claimed!");if(b!=null&&b<a){d("WALogger").LOG(h(),a,c,b);return!1}this.versions.add(a);this.$1=Math.max(this.getMax(),a);return!0};b.version=function(a){if(a<0)throw new j("Versions must by greater than or equal to zero!");return a};b.validate=function(){for(var a=0;a<=this.getMax();++a){if(this.versions.has(a))continue;throw new k("Schema version #"+a+" is missing!")}};b.getMax=function(){return this.$1};return a}();g.StorageVersionManager=a}),98);
__d("WAWebUserPrefsKeys",["$InternalEnum"],(function(a,b,c,d,e,f){a=b("$InternalEnum").Mirrored(["AbpropsWebRefreshId","ChatLockHide","ChatLockSecretCode","DisableLinkPreviews","DeviceCapabilities","PageLoadDebug","SyncContactToAddressbookCounts","MutexBlockStrategy","CagEventsAwarenessBannerFirstSeenTimestamp","WABrigadingState","OHAIKeyConfig","VerifiedBusinessNameLidTableMigrationComplete","BusinessProfileLidTableMigrationComplete","SNAPLPersistentId","MusicEligibleCountries","CartDbLidMigrationComplete"]);c=Object.freeze({STORAGE_TEST:"storage_test",CLIENT_TOKEN:"WAToken1",SERVER_TOKEN:"WAToken2",SECRET:"WASecretKey",SECURITY_NOTIFICATIONS:"WASecurityNotifications",BROWSER_ID:"WABrowserId",GROUP_ASSIGNED_COLOR:"WAGroupAssignedColor-17",GLOBAL_MUTE_SOUNDS:"WAGlobalSounds",GLOBAL_MUTE_CALL_RINGTONE:"WAGlobalCallRingtone",OUTGOING_MESSAGE_SOUND:"WAOutgoingMessageSound",GLOBAL_MUTE_NOTIFICATIONS:"WAGlobalNotifications",GLOBAL_MUTE_IN_APP_NOTIFICATIONS:"WAGlobalInAppNotifications",GLOBAL_MUTE_PREVIEWS:"WAGlobalPreviews",GLOBAL_OFFLINE_NOTIFICATIONS_ENABLED:"WAGlobalOfflineNotificationsEnabled",GLOBAL_OFFLINE_NOTIFICATIONS_ENABLED_ONCE:"WAGlobalOfflineNotificationsEnabledOnce",GLOBAL_COLLAPSE_MUTED:"WAGlobalCollapseMuted",NOTIFICATION_SOUND:"WANotificationSound",AUTO_DOWNLOAD_PHOTOS:"WAAutoDownloadPhotos",AUTO_DOWNLOAD_AUDIO:"WAAutoDownloadAudio",AUTO_DOWNLOAD_VIDEOS:"WAAutoDownloadVideos",AUTO_DOWNLOAD_DOCUMENTS:"WAAutoDownloadDocuments",LANG:"WALangPref",LANG_FROM_USER:"WALangUserPref",LANG_FROM_PHONE:"WALangPhonePref",LANG_DID_MISMATCH_WITH_COOKIE:"WALangPrefDidMismatchWithCookie",LAST_ACTIVE_EMOJI_TAB:"WALastActiveEmojiTab",LAST_SELECTED_COMPOSE_BOX_PANEL:"WALastActiveComposeBoxPanel",LAST_CHAT_MUTE_DURATION:"WALastChatMuteDuration",UNKNOWN_ID:"WAUnknownID",LOAD_RETRY_GENERATION:"WALoadRetryGeneration",WHATSAPP_MUTEX:"whatsapp-mutex",MUTEX_PING_TIMEOUT_SECONDS:"mutex-ping-timeout",LAST_WID:"last-wid",LAST_WID_MD:"last-wid-md",SAVE_TO_CAMERA_ROLL:"save_to_camera_roll",MARK_TRANSLATIONS:"mark_translations",PINS_DEBUG_MODE:"pins_debug_mode",IS_OPT_IN_EXTERNAL_BETA:"is_opt_in_external_beta",DEXIE_VERSION:"dexie_version",DB_SCHEMA_OPTIMIZATION_ENABLED:"db_schema_optimization_enabled",POSTCODE_AUTO_OPEN_CHANGE_POSTCODE_DONE:"postcode_auto_open_change_postcode_done",POSTCODE_AUTO_OPEN_CHANGE_POSTCODE_COUNT:"postcode_auto_open_change_postcode_count",POSTCODE_TOOLTIP_VIEW_COUNT:"postcode_tooltip_view_count",POSTCODE_TOOLTIP_VIEWED_IN_SESSION:"postcode_tooltip_viewed_in_session",LAST_PUSHNAME:"last-pushname",PTT_PLAYBACK_RATE:"WAPttPlaybackRate",LOGOUT_DIRTY_BIT:"post-logout",DAILY_STATS_START_TIME:"WADailyStatsStartTime",PRIMARY_FEATURES:"WAPrimaryFeatures",TOS_STATE_FETCH_ITERATION:"ToSStateFetchIteration",NUX_LIST:"WANuxList",BANNER_STATES:"WABannerStates",LID:"WALid",ME_DISPLAY_NAME:"me-display-name",PRESERVED_USER_KEYS:"preserved_user_keys",LAST_STATUS_USAGE:"last-status-usage",MOBILE_PLATFORM_DEPRECATED:"mobile-platform",REMEMBER_ME:"remember-me",NO_TAKEOVER:"no-takeover",WHATSAPP_LS_VERSION:"ver",USER_ACTIVITY_TIME_SPENT_EVENT:"WaTimeSpentEvent",TIME_SPENT_BITARRAY_EVENT:"WAWebTsBitarrayEvent",MEDIA_VOLUME:"video-volume",MEDIA_MUTE:"video-mute",MEDIA_HD:"hd-media",CONTACT_CHECKSUM:"contact-checksum",CONTACT_CHECKSUM_MODEL_STORAGE:"contact_checksum",FREQUENT_CONTACTS:"frequent_contacts",GK_PROTO:"gk_proto",INITIAL_HIST_BOUNDARY:"history_initial_sync_boundry",INITIAL_GROUP_PHASH:"initial_group_phash",IS_SMB:"is-smb",COMPOSE_CONTENTS_PREFIX:"compose-contents_",THEME:"theme",SYSTEM_THEME_MODE:"system-theme-mode",ABPROPS:"abprops",ABPROPS_REFRESH_ID:"abprops-refresh-id",HISTORY_SYNC_EARLIEST_DATE:"history-sync-earliest-date",CHATS_USER_SENT_MESSAGE_TO:"chats-user-sent-message-to",CONTACT_SYNC_REFRESH:"contact-sync-refresh-seconds",TOS_3:"TOS_STATE_20210210",LOCAL_TAKEOVER_OK:"local-takeover-ok",PS_KILLSWITCH_TOKEN:"ps-killswitch-token",STORAGE_DISMISS_STATE:"storage-dismiss-state",STORAGE_ALERT_FLAG:"storage-alert-flag",HOUR_24_FROM_PHONE:"hour-24-from-phone",HOUR_24:"hour-24",HOUR_24_FROM_DEVICE:"hour-24-from-device",PERSISTENT_EXPIRING_ID:"WaPersistentExpiringId",FIRST_SEEN_DESKTOP_UPSELL_BBAR:"first-seen-desktop-upsell-bbar",DESKTOP_UPSELL_USER_HAS_CLICKED_CALL_MODAL:"desktop-upsell-user-has-clicked-call-modal",DESKTOP_UPSELL_USER_HAS_DISMISSED_CHATLIST_TOASTBAR:"desktop-upsell-user-has-dismissed_chatlist-toastbar",WEB_NOTIFICATIONS_BB_STATUS:"WAWebNotificationsButterbarStatus",OFFLINE_NOTIFICATIONS_BB_STATUS:"WAOfflineNotificationsButterbarStatus",FB_SHOPS_SUNSET_BB_STATUS:"WAWebFBShopsSunsetButterbarStatus",EXISTING_LID_SIGNAL_SESSION_IS_CLEANED:"existing_lid_signal_session_is_cleaned",LID_DB_MIGRATION:"lid_db_migration",VERIFIED_BUSINESS_NAME_IS_CLEANED:"WAVerifiedBusinessNameIsCleaned",WHATSAPP_WEB_EXTERNAL_BETA:"whatsapp_web_beta",WHATSAPP_WEB_EXTERNAL_BETA_DIRTY_BIT:"whatsapp_web_beta_dirty_bit",WHATSAPP_WEB_EXTERNAL_BETA_IDB:"WAWebBetaOptInStatus",WHATSAPP_WEB_EXTERNAL_BETA_DIRTY_BIT_IDB:"WAWebBetaOptInDirtyBit",CHAT_UTM:"deeplink_utm",EXTERNAL_ENTRY_POINT:"external_entry_point",AD_CREATION_FLOW_ID_KEY:"ad_creation_flow_id_key",AD_CREATION_SEQUENCE_NUMBER_KEY:"ad_creation_sequence_number_key",AD_ENTRY_POINTS_CONFIGURATION:"ad_entry_points_configuration",AD_ACCOUNT_TOKEN:"ad_account_token",CHATLIST_PANEL_STATE:"chatlist_panel_state",CTWA_DATA_SHARING_UPSELL_ACTIVE:"ctwa_data_sharing_upsell_active",CTWA_DATA_SHARING_COOL_OFF:"ctwa_data_sharing_cool_off",CTWA_CONSUMER_TRANSPARENCY_INFO_ICON:"ctwa_consumer_transparency_info_icon",DISAPPEARING_MSG_DISCLAIMER_DIMISSED:"disappearing_msg_disclaimer_dimissed",TIME_SPENT_SESSION:"WAWebTimeSpentSession",TIME_SPENT_PENDING_BACKGROUND_NAVIGATION:"WAWebTimeSpentPendingBackgroundNavigation",WA_WEB_CACHED_RECOMMENDED_NEWSLETTERS:"WAWebCachedRecommendedNewsletters",WA_WEB_NEWSLETTERS_SUBSCRIBERS_FULL:"WAWebNewsletterSubscribersFull",WA_WEB_NEWSLETTERS_SUBSCRIBERS_LIMITED:"WAWebNewsletterSubscribersLimited",WA_WEB_CACHED_NEWSLETTERS_SUBSCRIBERS:"WAWebCachedNewsletterSubscribers",WA_WEB_CACHED_NEWSLETTER_DIRECTORY_PAGES:"WAWebCachedNewsletterDirectoryPages",WA_WEB_CACHED_NEWSLETTER_DIRECTORY_CATERGORY_PREVIEW:"WAWebCachedNewsletterDirectoryCategoryPreview",LAST_PROFILE_PIC_THUMB_UPDATE_TS:"last_profile_pic_thumb_update_ts_v2",AUTO_LOGOUT_ENABLED:"auto_logout_enabled",PAYMENT_INFO:"WAPaymentInfo",CUSTOM_PAYMENT_METHODS:"WACustomPaymentMethods",MERCHANT_PAYMENT_PARTNER:"WAMerchantPaymentPartner",WA_WEB_ID_UPSELL_SNOOZE_UNTIL:"WAWebIDUpsellSnoozeUntil",WA_WEB_DB_TABLE_USAGE_ENABLED:"WAWebDBUsageLoggingEnabled",WA_WEB_WAM_BEACONING_SETTINGS:"WAWebWAMBeaconingSettings",WA_WEB_CONTACTS_LID_MIGRATION:"WAWebContactsLidMigration",WA_WEB_SIGNAL_STORAGE_LID_MIGRATION:"WAWebSignalStorageLidMigration"});d=Object.freeze({EMOJI_VARIANT_COLLECTION:"emoji_variant_collection",RECENT_EMOJI_COLLECTION:"recent_emoji_collection",RECENT_REACTIONS_COLLECTION:"recent_reactions_collection",CHAT_PREFERENCE_COLLECTION:"chat_preference",CONVERSION_TUPLE_COLLECTION:"conversion_tuple",MUTE_COLLECTION:"mute",PROFILE_PIC_THUMB_COLLECTION:"profile_pic_thumb",UNATTRIBUTED_MESSAGE_COLLECTION:"unattributed_message_collection",CART_COLLECTION:"cart_collection",DAILY_AGGREGATED_STATS_COLLECTION:"daily_aggregated_stats"});e=Object.freeze({NOISE_INFO:"WANoiseInfo",NOISE_INFO_IV:"WANoiseInfoIv",ME_INFO:"WAMeInfo",DEVICE_ID:"WADeviceId",ROUTING_INFO:"WARoutingInfo",INITIAL_HISTORY_SYNCED:"WaInitialHistorySynced",CRITICAL_DATA_SYNCED:"critical_data_synced",HISTORY_SYNC_STATUS:"WAHistorySyncStatus",HISTORY_SYNC_REMAINING_PAUSED_SECONDS:"WAHistorySyncRemainingPausedSeconds",ADV_SECRET_KEY:"WaADVSecretKey",IS_SMB:"WAIsSMB",LAST_OFFLINE_MESSAGE:"WALastOfflineMessage",BLOCKLIST_HASH:"WABlocklistHash",SHOULD_CHECK_CONTACT_SYNC_STATUS:"WAShouldCheckContactSyncStatus",WEB_ENC_SALT:"WebEncKeySalt",MD_UPGRADE_WAM_FLAG:"MdUpgradeWamFlag",MD_HISTORY_LAST_CHUNK_PROCESSED:"MdHistoryLastChunkProcessed",UNARCHIVE_CHATS_SETTING:"WAUnarchiveChatsSetting",ARCHIVE_V2_ENABLED_SETTING:"WAArchiveV2EnabledSetting",SYNCD_PRIMARY_ALLOWS_ALL_MUTATIONS:"WASyncdPrimaryAllowsAllMutations",MD_SYNC_ACTIONS_ACTION_SANITIZED:"MdSyncActionsActionSanitized",CHAT_THREAD_LOGGING_OFFSET:"ChatThreadLoggingOffset",CHAT_THREAD_LOGGING_SECRET:"ChatThreadLoggingSecret",CHAT_THREAD_LOGGING_LAST_UPLOADED_START_TS:"ChatThreadLoggingLastUploadedStartTs",IS_COMMUNITY_DISCOVERED:"WAIsCommunityDiscovered",PAIRING_TIMESTAMP:"MdPairingTimestamp",RECENT_MAILBOX_AGE_DAYS:"MdRecentMailboxAgeDays",LAST_PERIODIC_APP_STATE_SYNC_TS:"MdLastPeriodicAppStateSyncTs",MD_LOGIN_COOKIE_REQUEST_COMPLETE:"MdLoginCookieRequestComplete",SCREEN_LOCK_DURATION_SECONDS:"WAScreenLockDuration",SCREEN_UNLOCK_TRY_COUNT:"WAScreenUnlockTryCount",SCREEN_LOCK_IV:"WAScreenLockIV",SCREEN_LOCK_DATA_IV:"WAScreenLockDataIV",SCREEN_LOCK_SALT:"WAScreenLockSalt",SCREEN_LOCK_ITERATIONS:"WAScreenLockIterations",CACHED_PROFILE_PIC_EURL:"WACachedProfilePicEURL",COMMUNITY_TAB_LAST_SEEN_TIMESTAMP:"WACommunityTabLastSeenTimestamp",KEY_SEVER_CLIENT_EXPIRATION_OVERRIDE:"key_sever_client_expiration_override",COLUMN_PACKING_ENABLED:"WAWebColumnPackingEnabled",NEWSLETTER_TAB_LAST_SEEN_TIMESTAMP:"WANewslettersTabLastSeenTimestamp",NEWSLETTER_WAS_BOOTSTRAPPED:"WANewslettersWasBootstrapped",BOT_LIST_LAST_REQUESTED_TIMESTAMP:"WABotListLastRequestedTimestamp",UGC_BOT_LIST_LAST_REQUESTED_TIMESTAMP:"WAUgcBotListLastRequestedTimestamp",UGC_BOT_LIST_LAST_BHASH:"WAUgcBotListLastBhash",IS_HOSTED_ME_ACCOUNT:"WAIsHostedMeAccount",MMS4_CONN:"WAMms4Conn"});b=Object.freeze({NOISE_INFO:"WANoiseInfo",NOISE_INFO_IV:"WANoiseInfoIv",WEB_ENC_SALT:"WAWebEncKeySalt"});var g=Object.freeze({ROUTING_INFO:"WARoutingInfo",INITIAL_HISTORY_SYNCED:"WAInitialHistorySynced",HISTORY_SYNC_STATUS:"WAHistorySyncStatus",BLOCKLIST_HASH:"WABlocklistHash",OPTOUTLIST_HASH:"WAOptOutListHash",CRITICAL_DATA_SYNCED:"WACriticalDataSynced",SHOULD_CHECK_CONTACT_SYNC_STATUS:"WAShouldCheckContactSyncStatus",ADV_SECRET_KEY:"WAADVSecretKey",MD_UPGRADE_WAM_FLAG:"WAMdUpgradeWamFlag",MD_HISTORY_LAST_CHUNK_PROCESSED:"WAMdHistoryLastChunkProcessed",UNARCHIVE_CHATS_SETTING:"WAUnarchiveChatsSetting",ARCHIVE_V2_ENABLED_SETTING:"WAArchiveV2EnabledSetting",MD_SYNC_ACTIONS_ACTION_SANITIZED:"WAMdSyncActionsActionSanitized",CHAT_THREAD_LOGGING_OFFSET:"WAChatThreadLoggingOffset",CHAT_THREAD_LOGGING_SECRET:"WAChatThreadLoggingSecret",CHAT_THREAD_LOGGING_LAST_UPLOADED_START_TS:"WAChatThreadLoggingLastUploadedStartTs",IS_COMMUNITY_DISCOVERED:"WAIsCommunityDiscovered",PAIRING_TIMESTAMP:"WAMdPairingTimestamp",RECENT_MAILBOX_AGE_DAYS:"WAMdRecentMailboxAgeDays",LAST_PERIODIC_APP_STATE_SYNC_TS:"WAMdLastPeriodicAppStateSyncTs",MD_LOGIN_COOKIE_REQUEST_COMPLETE:"WAMdLoginCookieRequestComplete",HISTORY_SYNC_CHUNK_COUNT_FOR_END_OF_RECENT_SYNC:"WAHistorySyncChunkCountForEndOfRecentSync",MOBILE_PLATFORM:"WAMobilePlatform",NON_CRITICAL_DATA_SYNC_STATUS:"WANonCriticalDataSyncStatus",SERVER_PROPS:"WAServerProps",SERVER_PROPS_ATTRIBUTES:"WAServerPropsAttributes",PRIMARY_FEATURES:"WAPrimaryFeatures",APP_VERSION_BASE:"WAVersionBase",ESTIMATED_HISTORY_SYNC_CHUNK_COUNT_FOR_END_OF_RECENT_SYNC:"WAEstimatedHistorySyncChunkCountForEndOfRecentSync",OFFLINE_PUSH_COUNT:"WAOfflinePushCount",HISTORY_SYNC_SINGLE_CHUNK_STATUS:"WAHistorySyncSingleChunkStatus",LAST_PUSH_COMPLETE_TIMESTAMP:"WALastPushCompleteTimestamp",OFFLINE_PUSH_DISABLED:"WAOfflinePushDisabled",MD_HISTORY_LAST_RECENT_SYNC_CHUNK_PROCESSED:"WAMdHistoryLastRecentSyncChunkProcessed",OFFLINE_NOTIFICATION_L10N_CONTENT:"WAOfflineNotificationContent",LOGOUT_REASON:"WALogoutReason",HISTORY_SYNC_STATUS_AFTER_PAIRING_LOGGING_COUNT:"WAHistorySyncStatusAfterPairingLoggingCount",STATUS_ALLOW_LIST:"WAStatusPostingAllowList",STATUS_DENY_LIST:"WAStatusPostingDenyList",STATUS_SENDER_KEY:"WAStatusPostingSenderkey",STATUS_PRIVACY_SETTING:"WAStatusPostingPrivacySetting",OFFLINE_NOTIFICATION_ENGAGEMENT:"WAOfflineNotificationEngagement",IS_HOSTED_ME_ACCOUNT:"WAIsHostedMeAccount",TEXT_STATUS_SUGGESTIONS:"WATextStatusSuggestions",MMS4_CONN:"WAMms4Conn",HISTORY_SYNC_TOTAL_PROCESSED_MESSAGE_COUNT:"WAHistorySyncTotalProcessedMessageCount",HAVE_PROCESSED_COEX_ADV:"WAHaveProcessedCoexAdv",USING_ACCOUNT_IDENTIFIER_FOR_SIGNAL_STORAGE:"WAUsingAccountIdentifierForSignalStorage",CONTACTS_DB_READ_USING_LID:"WAContactsDBReadUsingLid"}),h=Object.freeze({USER_PRIVACY_SETTINGS:"user-privacy-settings",INITIAL_HIST_BOUNDARY:"history_initial_sync_boundry"});f.UserPrefs=a;f.KEYS=c;f.COLLECTIONS_KEYS=d;f.MD_KEYS=e;f.MD_NOISE_KEYS=b;f.BACKEND_ONLY_KEYS=g;f.HASHED_KEYS=h}),66);
__d("WAWebStorage",["Promise","WALogger","WAWeb-dexie","WAWebBrokerGlobalAppState","WAWebIdbLazyView","WAWebLocalStorage","WAWebMiscErrors","WAWebProfiler","WAWebRuntimeEnvironmentUtils","WAWebSchemaVersions","WAWebStorageCmd","WAWebStorageMutationBuilder","WAWebStorageTableBuilder","WAWebStorageVersionManager","WAWebUserPrefsKeys","asyncToGeneratorRuntime","err","gkx"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["QuotaExceededError: log failed: ",""]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["QuotaExceededError: navigator.storage.estimate: ",""]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["QuotaExceededError: localStorage usage: key:"," length:",""]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["[storage] applying schema versions from [0 to ","] for the database: ",""]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["[storage] applying only latest schema version "," for the database: ",""]);m=function(){return a};return a}function n(){var a=babelHelpers.taggedTemplateLiteralLoose(["Logout due to: ",""]);n=function(){return a};return a}function o(){var a=babelHelpers.taggedTemplateLiteralLoose(["Logout due to: ",""]);o=function(){return a};return a}function p(){var a=babelHelpers.taggedTemplateLiteralLoose(["[storage] unknown database name: ",""]);p=function(){return a};return a}var q=1<<0,r=1<<1,s=1<<2,t={packColumns:!1},u=function(b){babelHelpers.inheritsLoose(a,b);function a(){var a,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(a=c=b.call.apply(b,[this].concat(e))||this,c.name="AlreadyInitializedError",a)||babelHelpers.assertThisInitialized(c)}return a}(babelHelpers.wrapNativeSuper(Error)),v=function(b){babelHelpers.inheritsLoose(a,b);function a(){var a,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(a=c=b.call.apply(b,[this].concat(e))||this,c.name="DuplicateTableError",a)||babelHelpers.assertThisInitialized(c)}return a}(babelHelpers.wrapNativeSuper(Error)),w=function(b){babelHelpers.inheritsLoose(a,b);function a(){var a,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(a=c=b.call.apply(b,[this].concat(e))||this,c.name="NoSuchDatabaseError",a)||babelHelpers.assertThisInitialized(c)}return a}(babelHelpers.wrapNativeSuper(Error)),x=function(b){babelHelpers.inheritsLoose(a,b);function a(){var a,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(a=c=b.call.apply(b,[this].concat(e))||this,c.name="NoSuchTableError",a)||babelHelpers.assertThisInitialized(c)}return a}(babelHelpers.wrapNativeSuper(Error)),y=function(b){babelHelpers.inheritsLoose(a,b);function a(){var a,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(a=c=b.call.apply(b,[this].concat(e))||this,c.name="NotInitializedError",a)||babelHelpers.assertThisInitialized(c)}return a}(babelHelpers.wrapNativeSuper(Error));a=function(){function a(a,b){this.tables=new Map();this.views=new Map();this.state=q;this.versions=new(d("WAWebStorageVersionManager").StorageVersionManager)();this.errorHandlers=new Map();this.$1=a;this.config=(a=b)!=null?a:t;this.$2()}var e=a.prototype;e.addErrorHandler=function(a,b){a=new a().name;this.errorHandlers.set(a,b)};e.add_OPTIMIZED_EXPERIMENT=function(a,b){a=this.add(a);b(a,d("WAWebStorageMutationBuilder").columnBuilder(this.config))};e.add=function(a){if(this.tables.has(a))throw new v('Table "'+a+'" already added. Reuse the definition.');var b=d("WAWebSchemaVersions").DatabaseNames.cast(this.$1.getDbName());if(b===void 0){d("WALogger").ERROR(p(),this.$1.getDbName()).sendLogs("[storage] unknown database name");throw c("err")("unknown database name: "+this.$1.getDbName())}b=b===d("WAWebSchemaVersions").DatabaseNames.LruMediaStorage?null:d("WAWebSchemaVersions").getSchemaVersions(b).get(b);b=new(c("WAWebStorageTableBuilder"))(a,this.versions,b);this.tables.set(a,b);return b};e.$2=function(){this.addErrorHandler(c("WAWeb-dexie").DatabaseClosedError,function(a){if(c("WAWebBrokerGlobalAppState").takeOver&&a.message.includes("DatabaseClosedError"))throw new(d("WAWebMiscErrors").DbClosedOnTakeover)(a.message)}),this.addErrorHandler(c("WAWeb-dexie").NoSuchDatabaseError,function(a){if(c("WAWebBrokerGlobalAppState").takeOver&&a.message.includes("NoSuchDatabaseError"))throw new(d("WAWebMiscErrors").DbNotFoundOnTakeover)(a.message)}),this.addErrorHandler(c("WAWeb-dexie").AbortError,function(a){a.message.includes("QuotaExceededError")&&(!c("gkx")("26258")?(void z(),d("WALogger").ERROR(o(),a).sendLogs("logout-due-to-quota-exceeded-error-intern")):d("WALogger").ERROR(n(),a).sendLogs("logout-due-to-quota-exceeded-error",{sampling:.01,sendLogsType:d("WALogger").SendLogsType.USER_FORCEFULLY_LOGGED_OUT_SAD}),d("WAWebStorageCmd").StorageCmd.trigger("storage_not_enough_space"))})};e.$3=function(){return this.$1};e.$4=function(a){if(this.views.has(a))return this.views.get(a);var b=this.$1;b=b.view(a.name,a.rowview,a.shouldEnablePropFilter,a.shouldUseDbMsgEncKeyForEncryptedCol);this.views.set(a,b);return b};e.$5=function(a){var b=this;return function(){if(b.state&(r|q))throw new y("Storage must be initialized before accessing a table!");return a()}};e.table=function(a){var b=this,d=this.tables.get(a);if(!d||!d.tableExists())throw new x("Unknown table "+a+" requested, ensure table is defined!");var e=this.$3();if(!e)throw new w('Unable to find associated database with table "'+a+'"');return new(c("WAWebIdbLazyView"))(this.$5(function(){return b.$4(d)}),this.errorHandlers)};e.lock=function(a,c){var d=this,e;if(this.state&(r|q))return(h||(h=b("Promise"))).reject(new y("Initialize storage before attempting to lock tables!"));for(var f=0;f<a.length;++f){var g;if(this.tables.has(a[f])&&((g=this.tables.get(a[f]))==null?void 0:g.tableExists()))continue;return(h||(h=b("Promise"))).reject(new x('Requested lock of unknown table "'+a[f]+'"'))}g=a.map(function(a){var b=d.tables.get(a);if(b)return b;throw new x('Requested lock of unknown table "'+a+'"')});var i=g.map(function(a){return d.$4(a)});f=this.$3().transact(a,b("asyncToGeneratorRuntime").asyncToGenerator(function*(){return c(i)}));return f["finally"](function(){})};e.$6=function(a,b){for(var c=0;c<a.length;c++)if(a[c].maxVersion===b){var d=a[c].upgraders.get(b);if(d)return{name:a[c].name,callback:d}}return void 0};e.$7=function(a,b,c){var d=b,e=c.map(function(a){return a.schema(d)}).filter(Boolean);return a.initialize(b,e,this.$6(c,d),this.errorHandlers)};e.initialize=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){if(this.state&s)throw new u("Storage instance has already been initialized");this.versions.validate();if(this.$1)yield this.$1.available();else throw new w('"'+this.$1.constructor.name+'" failed availability check!');var a=Array.from(this.tables.values()),b=this.$3();if(!a||!b)return;if(d("WAWebRuntimeEnvironmentUtils").isWorker()||(c("WAWebLocalStorage")==null?void 0:c("WAWebLocalStorage").getItem(d("WAWebUserPrefsKeys").KEYS.DB_SCHEMA_OPTIMIZATION_ENABLED))==="true")d("WALogger").WARN(m(),this.versions.getMax(),b.getDbName()),yield this.$7(b,this.versions.getMax(),a);else{d("WALogger").WARN(l(),this.versions.getMax(),b.getDbName());for(var e=0;e<=this.versions.getMax();e++)yield this.$7(b,e,a)}yield b.open();this.state=s});function e(){return a.apply(this,arguments)}return e}();e.purge=function(){this.state=r;this.views=new Map();return this.$3().reset().then(function(){return void 0})};e.doesLocalSchemaIncludeVersion=function(a){return a<=this.versions.getMax()};e.getExistingTables=function(){var a=new Map();this.tables.forEach(function(b,c){b.tableExists()&&a.set(c,b)});return a};return a}();function z(){return A.apply(this,arguments)}function A(){A=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){try{c("WAWebLocalStorage")!=null&&Object.keys(c("WAWebLocalStorage")).forEach(function(a){var b;b=(b=(b=c("WAWebLocalStorage").getItem(a))==null?void 0:b.length)!=null?b:0;b>1e3&&d("WALogger").WARN(k(),a,b)});if(navigator!=null){var a;a=(yield (a=navigator.storage)==null?void 0:a.estimate==null?void 0:a.estimate());d("WALogger").WARN(j(),JSON.stringify(a))}}catch(a){d("WALogger").WARN(i(),a)}});return A.apply(this,arguments)}g.NoSuchTableError=x;g.Storage=a}),98);
__d("WAWebModelStorageUtils",["invariant","Promise","WAWeb-dexie","WAWebDexieCastTypes","WAWebIdb","WAWebStorage","err"],(function(a,b,c,d,e,f,g,h){var i,j="model-storage",k=null;function a(){return d("WAWebDexieCastTypes").dexieCastToPromise(c("WAWeb-dexie").exists(j))}function e(a){var b=new(c("WAWebIdb"))(j,{packColumns:a.packColumns});k=new(d("WAWebStorage").Storage)(b,a)}function f(){k!=null||h(0,56367);return k}function l(){return k==null?(i||(i=b("Promise"))).reject(c("err")("[model-storage] Storage should be created first before being destroyed")):k.purge().then(function(){k=null})["catch"](function(a){k=null;throw a})}g.DATABASE_NAME=j;g.storageExists=a;g.createStorage=e;g.getStorage=f;g.destroyStorage=l}),98);
__d("WAWebModelStorageVersions",["WAWebModelStorageUtils"],(function(a,b,c,d,e,f,g){var h=148;function a(){return d("WAWebModelStorageUtils").getStorage().versions.version(0)}function b(){return d("WAWebModelStorageUtils").getStorage().versions.version(1)}function c(){return d("WAWebModelStorageUtils").getStorage().versions.version(2)}function e(){return d("WAWebModelStorageUtils").getStorage().versions.version(3)}function f(){return d("WAWebModelStorageUtils").getStorage().versions.version(4)}function i(){return d("WAWebModelStorageUtils").getStorage().versions.version(5)}function j(){return d("WAWebModelStorageUtils").getStorage().versions.version(6)}function k(){return d("WAWebModelStorageUtils").getStorage().versions.version(7)}function l(){return d("WAWebModelStorageUtils").getStorage().versions.version(8)}function m(){return d("WAWebModelStorageUtils").getStorage().versions.version(9)}function n(){return d("WAWebModelStorageUtils").getStorage().versions.version(10)}function o(){return d("WAWebModelStorageUtils").getStorage().versions.version(11)}function p(){return d("WAWebModelStorageUtils").getStorage().versions.version(12)}function q(){return d("WAWebModelStorageUtils").getStorage().versions.version(13)}function r(){return d("WAWebModelStorageUtils").getStorage().versions.version(14)}function s(){return d("WAWebModelStorageUtils").getStorage().versions.version(15)}function t(){return d("WAWebModelStorageUtils").getStorage().versions.version(16)}function u(){return d("WAWebModelStorageUtils").getStorage().versions.version(17)}function v(){return d("WAWebModelStorageUtils").getStorage().versions.version(18)}function w(){return d("WAWebModelStorageUtils").getStorage().versions.version(19)}function x(){return d("WAWebModelStorageUtils").getStorage().versions.version(20)}function y(){return d("WAWebModelStorageUtils").getStorage().versions.version(21)}function z(){return d("WAWebModelStorageUtils").getStorage().versions.version(22)}function A(){return d("WAWebModelStorageUtils").getStorage().versions.version(23)}function B(){return d("WAWebModelStorageUtils").getStorage().versions.version(24)}function C(){return d("WAWebModelStorageUtils").getStorage().versions.version(25)}function D(){return d("WAWebModelStorageUtils").getStorage().versions.version(26)}function E(){return d("WAWebModelStorageUtils").getStorage().versions.version(27)}function F(){return d("WAWebModelStorageUtils").getStorage().versions.version(28)}function G(){return d("WAWebModelStorageUtils").getStorage().versions.version(29)}function H(){return d("WAWebModelStorageUtils").getStorage().versions.version(30)}function I(){return d("WAWebModelStorageUtils").getStorage().versions.version(31)}function J(){return d("WAWebModelStorageUtils").getStorage().versions.version(32)}function K(){return d("WAWebModelStorageUtils").getStorage().versions.version(33)}function L(){return d("WAWebModelStorageUtils").getStorage().versions.version(34)}function M(){return d("WAWebModelStorageUtils").getStorage().versions.version(35)}function N(){return d("WAWebModelStorageUtils").getStorage().versions.version(36)}function O(){return d("WAWebModelStorageUtils").getStorage().versions.version(37)}function P(){return d("WAWebModelStorageUtils").getStorage().versions.version(38)}function Q(){return d("WAWebModelStorageUtils").getStorage().versions.version(39)}function R(){return d("WAWebModelStorageUtils").getStorage().versions.version(40)}function S(){return d("WAWebModelStorageUtils").getStorage().versions.version(41)}function T(){return d("WAWebModelStorageUtils").getStorage().versions.version(42)}function U(){return d("WAWebModelStorageUtils").getStorage().versions.version(43)}function V(){return d("WAWebModelStorageUtils").getStorage().versions.version(44)}function W(){return d("WAWebModelStorageUtils").getStorage().versions.version(45)}function X(){return d("WAWebModelStorageUtils").getStorage().versions.version(46)}function Y(){return d("WAWebModelStorageUtils").getStorage().versions.version(47)}function Z(){return d("WAWebModelStorageUtils").getStorage().versions.version(48)}function $(){return d("WAWebModelStorageUtils").getStorage().versions.version(49)}function aa(){return d("WAWebModelStorageUtils").getStorage().versions.version(50)}function ba(){return d("WAWebModelStorageUtils").getStorage().versions.version(51)}function ca(){return d("WAWebModelStorageUtils").getStorage().versions.version(52)}function da(){return d("WAWebModelStorageUtils").getStorage().versions.version(53)}function ea(){return d("WAWebModelStorageUtils").getStorage().versions.version(54)}function fa(){return d("WAWebModelStorageUtils").getStorage().versions.version(55)}function ga(){return d("WAWebModelStorageUtils").getStorage().versions.version(56)}function ha(){return d("WAWebModelStorageUtils").getStorage().versions.version(57)}function ia(){return d("WAWebModelStorageUtils").getStorage().versions.version(58)}function ja(){return d("WAWebModelStorageUtils").getStorage().versions.version(59)}function ka(){return d("WAWebModelStorageUtils").getStorage().versions.version(60)}function la(){return d("WAWebModelStorageUtils").getStorage().versions.version(61)}function ma(){return d("WAWebModelStorageUtils").getStorage().versions.version(62)}function na(){return d("WAWebModelStorageUtils").getStorage().versions.version(63)}function oa(){return d("WAWebModelStorageUtils").getStorage().versions.version(64)}function pa(){return d("WAWebModelStorageUtils").getStorage().versions.version(65)}function qa(){return d("WAWebModelStorageUtils").getStorage().versions.version(66)}function ra(){return d("WAWebModelStorageUtils").getStorage().versions.version(67)}function sa(){return d("WAWebModelStorageUtils").getStorage().versions.version(68)}function ta(){return d("WAWebModelStorageUtils").getStorage().versions.version(69)}function ua(){return d("WAWebModelStorageUtils").getStorage().versions.version(70)}function va(){return d("WAWebModelStorageUtils").getStorage().versions.version(71)}function wa(){return d("WAWebModelStorageUtils").getStorage().versions.version(72)}function xa(){return d("WAWebModelStorageUtils").getStorage().versions.version(73)}function ya(){return d("WAWebModelStorageUtils").getStorage().versions.version(74)}function za(){return d("WAWebModelStorageUtils").getStorage().versions.version(75)}function Aa(){return d("WAWebModelStorageUtils").getStorage().versions.version(76)}function Ba(){return d("WAWebModelStorageUtils").getStorage().versions.version(77)}function Ca(){return d("WAWebModelStorageUtils").getStorage().versions.version(78)}function Da(){return d("WAWebModelStorageUtils").getStorage().versions.version(79)}function Ea(){return d("WAWebModelStorageUtils").getStorage().versions.version(80)}function Fa(){return d("WAWebModelStorageUtils").getStorage().versions.version(81)}function Ga(){return d("WAWebModelStorageUtils").getStorage().versions.version(82)}function Ha(){return d("WAWebModelStorageUtils").getStorage().versions.version(83)}function Ia(){return d("WAWebModelStorageUtils").getStorage().versions.version(84)}function Ja(){return d("WAWebModelStorageUtils").getStorage().versions.version(85)}function Ka(){return d("WAWebModelStorageUtils").getStorage().versions.version(86)}function La(){return d("WAWebModelStorageUtils").getStorage().versions.version(87)}function Ma(){return d("WAWebModelStorageUtils").getStorage().versions.version(88)}function Na(){return d("WAWebModelStorageUtils").getStorage().versions.version(89)}function Oa(){return d("WAWebModelStorageUtils").getStorage().versions.version(90)}function Pa(){return d("WAWebModelStorageUtils").getStorage().versions.version(91)}function Qa(){return d("WAWebModelStorageUtils").getStorage().versions.version(92)}function Ra(){return d("WAWebModelStorageUtils").getStorage().versions.version(93)}function Sa(){return d("WAWebModelStorageUtils").getStorage().versions.version(94)}function Ta(){return d("WAWebModelStorageUtils").getStorage().versions.version(95)}function Ua(){return d("WAWebModelStorageUtils").getStorage().versions.version(96)}function Va(){return d("WAWebModelStorageUtils").getStorage().versions.version(97)}function Wa(){return d("WAWebModelStorageUtils").getStorage().versions.version(98)}function Xa(){return d("WAWebModelStorageUtils").getStorage().versions.version(99)}function Ya(){return d("WAWebModelStorageUtils").getStorage().versions.version(100)}function Za(){return d("WAWebModelStorageUtils").getStorage().versions.version(101)}function $a(){return d("WAWebModelStorageUtils").getStorage().versions.version(102)}function ab(){return d("WAWebModelStorageUtils").getStorage().versions.version(103)}function bb(){return d("WAWebModelStorageUtils").getStorage().versions.version(104)}function cb(){return d("WAWebModelStorageUtils").getStorage().versions.version(105)}function db(){return d("WAWebModelStorageUtils").getStorage().versions.version(106)}function eb(){return d("WAWebModelStorageUtils").getStorage().versions.version(107)}function fb(){return d("WAWebModelStorageUtils").getStorage().versions.version(108)}function gb(){return d("WAWebModelStorageUtils").getStorage().versions.version(109)}function hb(){return d("WAWebModelStorageUtils").getStorage().versions.version(110)}function ib(){return d("WAWebModelStorageUtils").getStorage().versions.version(111)}function jb(){return d("WAWebModelStorageUtils").getStorage().versions.version(112)}function kb(){return d("WAWebModelStorageUtils").getStorage().versions.version(113)}function lb(){return d("WAWebModelStorageUtils").getStorage().versions.version(114)}function mb(){return d("WAWebModelStorageUtils").getStorage().versions.version(115)}function nb(){return d("WAWebModelStorageUtils").getStorage().versions.version(116)}function ob(){return d("WAWebModelStorageUtils").getStorage().versions.version(117)}function pb(){return d("WAWebModelStorageUtils").getStorage().versions.version(118)}function qb(){return d("WAWebModelStorageUtils").getStorage().versions.version(119)}function rb(){return d("WAWebModelStorageUtils").getStorage().versions.version(120)}function sb(){return d("WAWebModelStorageUtils").getStorage().versions.version(121)}function tb(){return d("WAWebModelStorageUtils").getStorage().versions.version(122)}function ub(){return d("WAWebModelStorageUtils").getStorage().versions.version(123)}function vb(){return d("WAWebModelStorageUtils").getStorage().versions.version(124)}function wb(){return d("WAWebModelStorageUtils").getStorage().versions.version(125)}function xb(){return d("WAWebModelStorageUtils").getStorage().versions.version(126)}function yb(){return d("WAWebModelStorageUtils").getStorage().versions.version(127)}function zb(){return d("WAWebModelStorageUtils").getStorage().versions.version(128)}function Ab(){return d("WAWebModelStorageUtils").getStorage().versions.version(129)}function Bb(){return d("WAWebModelStorageUtils").getStorage().versions.version(130)}function Cb(){return d("WAWebModelStorageUtils").getStorage().versions.version(131)}function Db(){return d("WAWebModelStorageUtils").getStorage().versions.version(132)}function Eb(){return d("WAWebModelStorageUtils").getStorage().versions.version(133)}function Fb(){return d("WAWebModelStorageUtils").getStorage().versions.version(134)}function Gb(){return d("WAWebModelStorageUtils").getStorage().versions.version(135)}function Hb(){return d("WAWebModelStorageUtils").getStorage().versions.version(136)}function Ib(){return d("WAWebModelStorageUtils").getStorage().versions.version(137)}function Jb(){return d("WAWebModelStorageUtils").getStorage().versions.version(138)}function Kb(){return d("WAWebModelStorageUtils").getStorage().versions.version(139)}function Lb(){return d("WAWebModelStorageUtils").getStorage().versions.version(140)}function Mb(){return d("WAWebModelStorageUtils").getStorage().versions.version(141)}function Nb(){return d("WAWebModelStorageUtils").getStorage().versions.version(142)}function Ob(){return d("WAWebModelStorageUtils").getStorage().versions.version(143)}function Pb(){return d("WAWebModelStorageUtils").getStorage().versions.version(144)}function Qb(){return d("WAWebModelStorageUtils").getStorage().versions.version(145)}function Rb(){return d("WAWebModelStorageUtils").getStorage().versions.version(146)}function Sb(){return d("WAWebModelStorageUtils").getStorage().versions.version(147)}function Tb(){return d("WAWebModelStorageUtils").getStorage().versions.version(148)}function Ub(){return d("WAWebModelStorageUtils").getStorage().versions.version(149)}function Vb(){return d("WAWebModelStorageUtils").getStorage().versions.version(150)}function Wb(){return d("WAWebModelStorageUtils").getStorage().versions.version(151)}function Xb(){return d("WAWebModelStorageUtils").getStorage().versions.version(152)}function Yb(){return d("WAWebModelStorageUtils").getStorage().versions.version(153)}function Zb(){return d("WAWebModelStorageUtils").getStorage().versions.version(154)}function $b(){return d("WAWebModelStorageUtils").getStorage().versions.version(155)}function ac(){return d("WAWebModelStorageUtils").getStorage().versions.version(156)}function bc(){return d("WAWebModelStorageUtils").getStorage().versions.version(157)}function cc(){return d("WAWebModelStorageUtils").getStorage().versions.version(158)}function dc(){return d("WAWebModelStorageUtils").getStorage().versions.version(159)}function ec(){return d("WAWebModelStorageUtils").getStorage().versions.version(160)}function fc(){return d("WAWebModelStorageUtils").getStorage().versions.version(161)}g.versionToRollout=h;g.pendingMutationsCreateTable=a;g.collectionVersionCreateTable=b;g.syncActionsCreateTable=c;g.contactCreateTable=e;g.blocklistCreateTable=f;g.profilePicThumbCreateTable=i;g.chatCreateTable=j;g.messageCreateTable=k;g.messageInfoCreateTable=l;g.participantCreateTable=m;g.orphanReceiptCreateTable=n;g.deviceListCreateTable=o;g.inactiveReceiptCreateTable=p;g.verifiedBusinessNameCreateTable=q;g.historySyncNotificationsCreateTable=r;g.encryptedMutationsCreateTable=s;g.labelCreateTable=t;g.labelAssociationCreateTable=u;g.quickReplyCreateTable=v;g.abpropsConfigCreateTable=w;g.groupMetadataCreateTable=x;g.syncKeysCreateTable=y;g.tasksScheduledTimeCreateTable=z;g.activeMessageRangesCreateTable=A;g.ftsIndexingQueueCreateTable=B;g.cartCreateTable=C;g.missingKeysCreateTable=D;g.messageAddIsSendFailureProperties=E;g.contactAddIsContactSyncCompleted=F;g.messageAddPaymentTxnStatus=G;g.messageAddProductListPreviewInfo=H;g.verifiedBusinessNameAddPrivacyMode=I;g.messageAddPrivacyModeFields=J;g.messageInfoAddDeliveryPrivacyMode=K;g.messageAddProductListPreviewHeaderImage=L;g.contactAddDisappearingModeProperties=M;g.chatAddDisappearingModeInitiator=N;g.messageAddDisappearingModeInitiator=O;g.messageAddGroupInviteV4=P;g.groupInviteV4CreateTable=Q;g.orphanPaymentNotificationCreateTable=R;g.deviceListAddDelete=S;g.encryptHistorySyncDirectPath=T;g.peerMessageCreateTable=U;g.addUnreadMentionToChatTable=V;g.encryptHistorySyncFilehash=W;g.addSupportForHSMButtons=X;g.orphanRevokeCreateTable=Y;g.addActionToPendingMutations=Z;g.messageAddPaymentRequestNFMFields=$;g.addWaveformToAudioMessages=aa;g.addUnreadMentionCountToChatTable=ba;g.messageRemovePaymentRequestHeaderField=ca;g.recentStickersCreateTable=da;g.messageAddNativeFlowNameField=ea;g.addGroupFromKeyToGroupInviteV4=fa;g.addTcTokenToChatTable=ga;g.addTcTokenTimestampToChatTable=ha;g.privacyDisallowedListCreateTable=ia;g.deviceListAddV2Fields=ja;g.addStaticURLToImageVideoMessages=ka;g.addArchiveAtMentionViewedInDrawer=la;g.addTcTokenSenderTimestampToChatTable=ma;g.addRequiresDirectConnection=na;g.messageAddPaymentInviteServiceType=oa;g.addStatusPSACampaignFields=pa;g.reactionsCreateTable=qa;g.privacyDisallowedListAddDhashField=ra;g.messageAddPaymentBackground=sa;g.messageAddInteractiveMessageFields=ta;g.directConnectionKeysCreateTable=ua;g.addReactionTableOrphanIndex=va;g.messageAddActionLink=wa;g.favoriteStickersCreateTable=xa;g.messageAddHeaderType=ya;g.addReactionTableMsgKeyIndex=za;g.messageStatusPSAReadTimestamp=Aa;g.addHasAccessedToAbpropsConfigTable=Ba;g.addChatThreadLoggingTable=Ca;g.paymentBackgroundsCreateTable=Da;g.migrateSubgroupsArray=Ea;g.unjoinedSubgroupMetadataCreateTable=Fa;g.agentCreateTable=Ga;g.removeUnjoinedSubgroups=Ha;g.directConnectionKeysAddPostcodeColumns=Ia;g.subscriptionCreateTable=Ja;g.unjoinedSubgroupParentGroupIndex=Ka;g.removeSpamColumnsInGroupMetadata=La;g.addCommunityAdminPromotionColumns=Ma;g.orphanTcTokenCreateTable=Na;g.lidPnMappingCreateTable=Oa;g.pollVotesCreateTable=Pa;g.messageOrphansCreateTable=Qa;g.userPrefsCreateTable=Ra;g.lidDisplayNameMappingCreateTable=Sa;g.lidPnMappingRemoveDisplayName=Ta;g.renameCommunityAdminPromotionColumns=Ua;g.messageOrphansAddColumns=Va;g.messageAddPollInvalidated=Wa;g.removeCommunityAdminPromotionColumns=Xa;g.addIncognitoGroupMetadataColumn=Ya;g.membershipApprovalRequestCreateTable=Za;g.lidChatStateCreateTable=$a;g.chatAssignmentCreateTable=ab;g.pollVotesAddMsgKeyIndex=bb;g.contactAddHash=cb;g.messageHistoryCreateTable=db;g.nonMessageDataRequestCreateTable=eb;g.verifiedBusinessNameAddSmbColumn=fb;g.contactAddLidProperties=gb;g.groupMetadataAddParentIndex=hb;g.messageAddRcat=ib;g.ctwaSuggestionsCreateTable=jb;g.ctwaSuggestionsAddTrackingData=kb;g.pinInChatCreateTable=lb;g.inAppBannerCreateTable=mb;g.errorCodeColumn=nb;g.newsletterMetadataCreateTable=ob;g.addInitialHistBootstrapInlinePayloadColumn=pb;g.addPeerDataRequestSessionIdColumn=qb;g.premiumMessageCreateTable=rb;g.quickPromotionsCreateTable=sb;g.subgroupSuggestionCreateTable=tb;g.newsletterReactionsCreateTable=ub;g.addPeerDataRequestChatIdColumn=vb;g.botProfileCreateTable=wb;g.lastUpdateTimestampColumn=xb;g.paidMessagingCampaignIdColumn=yb;g.addProgressColumn=zb;g.selfMessageTypeCreateTable=Ab;g.addProcessedAndSyncTypeCompositeIndex=Bb;g.subgroupSuggestionV2CreateTable=Cb;g.syncdLogsCreateTable=Db;g.messageAddEditIndex=Eb;g.commentCreateTable=Fb;g.businessProfileCreateTable=Gb;g.newsletterMyVotesCreateTable=Hb;g.newsletterPollsVotesCreateTable=Ib;g.contactTextStatus=Jb;g.reportingTokenTable=Kb;g.reportingTokenTableTsIndex=Lb;g.messageAddIsCarouselIndex=Mb;g.addUnreadMentionMetadataColumn=Nb;g.addEphemeralityIndexToChatTable=Ob;g.removeUnreadMentionMetadataColumn=Pb;g.eventsResponsesCreateTable=Qb;g.eventResponsesAddMsgKeyIndex=Rb;g.favoriteCreateTable=Sb;g.noteCreateTable=Tb;g.abpropEventSamplingConfigCreateTable=Ub;g.createUnifiedAddonsTable=Vb;g.contactPnHash=Wb;g.messageAddIsEventMsgIndex=Xb;g.reportingInfoTable=Yb;g.messageAssociationCreateTable=Zb;g.chatAddAccountLidIndex=$b;g.stickerDownloadCreateTable=ac;g.contactPnHashIndex=bc;g.addEphemeralityIndexToGroupMetadataTable=cc;g.acsTokenCreateTable=dc;g.mediaPlaybackEventCreateTable=ec;g.optOutListCreateTable=fc}),98);
__d("WAWebSchemaContact_DEPRECATED",["WAWebModelStorageUtils","WAWebModelStorageVersions"],(function(a,b,c,d,e,f,g){function a(){var a=d("WAWebModelStorageUtils").getStorage();a.add_OPTIMIZED_EXPERIMENT("contact",function(a,b){var c=b.addColumn,e=b.addUserDefinedPrimaryKey;b=b.addIndex;return a.version((a=d("WAWebModelStorageVersions")).contactCreateTable(),[e("id"),c("name"),c("shortName"),c("pushname"),c("type"),c("verifiedName"),c("isBusiness"),c("isEnterprise"),c("verifiedLevel"),c("statusMute"),c("sectionHeader"),c("isAddressBookContact"),c("username"),c("usernamePin"),b("isAddressBookContact"),c("isHosted"),c("syncToAddressbook"),c("isOrHasBeenHosted")]).version(a.contactAddIsContactSyncCompleted(),[c("isContactSyncCompleted"),b("isContactSyncCompleted")]).version(a.contactAddDisappearingModeProperties(),[c("disappearingModeDuration"),c("disappearingModeSettingTimestamp")]).version(a.contactAddHash(),[c("contactHash"),b("contactHash")]).version(a.contactAddLidProperties(),[c("phoneNumber"),c("phoneNumberCreatedAt"),c("requestedPnTimestamp"),c("shareOwnPn"),c("displayNameLID"),b("phoneNumber")]).version(a.contactTextStatus(),[c("textStatusString"),c("textStatusEmoji"),c("textStatusEphemeralDuration"),c("textStatusLastUpdateTime"),c("textStatusExpiryTs"),b("textStatusExpiryTs")]).version(a.contactPnHash(),[c("pnContactHash")]).version(a.contactPnHashIndex(),[b("pnContactHash")]).view(function(a){return a}).commit()})}function b(){return d("WAWebModelStorageUtils").getStorage().table("contact")}g.addTable=a;g.getContactTable=b}),98);
__d("WAWebUA",["ua-parser-js"],(function(a,b,c,d,e,f,g){b={CHROME:"chrome",CHROMIUM:"chromium",FIREFOX:"firefox",SAFARI:"safari",IE:"ie",OPERA:"opera",EDGE:"edge"};d={WINDOWS:"windows",MAC:"mac os",CHROMEOS:"chromium os"};function h(a,b){var c,d,e=/(\.0)+[^\.]*$/;a=(a+"").replace(e,"").split(".");b=(b+"").replace(e,"").split(".");e=Math.min(a.length,b.length);for(c=0;c<e;c++){d=parseInt(a[c],10)-parseInt(b[c],10);if(d!==0)return d}return a.length-b.length}function i(a,b){return h(a,b)>=0}function j(a,b){return h(a,b)<0}function a(a){var b=new(c("ua-parser-js"))();b.setUA(a||"");a=(b.getBrowser().name||"").toUpperCase();var d=b.getBrowser().version||"0.0.0",e=(b.getEngine().name||"").toUpperCase(),f=(b.getOS().name||"").toUpperCase(),g=b.getOS().version||"0.0.0",h=!e||e==="WEBKIT",k=a==="SAFARI",l=a==="CHROME",m=a==="FIREFOX",n=e==="TRIDENT"||e==="EDGEHTML",o=e==="GECKO";e=e==="BLINK";var p=!l&&!k&&(""+a).includes("OCULUS"),q=!1;switch(f){case"MAC OS":l?q=i(g,"10.10")&&i(d,"41.0.0"):i(g,"10.7")&&(q=!0);break;case"WINDOWS":i(g,"8.1")&&(o?q=!0:l&&i(d,"41.0.0")&&(q=!0));break}var r=l&&i(d,"110.0.0"),s=k||l&&j(d,"76");return{isWebkit:h,isGecko:o,isTrident:n,isSafari:k,isFirefox:m,isBlink:e,isBuggyVideoLoad:l&&i(d,"76")||e&&!l,hasEmoji:q,troublesWithLotsOfVideos:l,supportsEmojiEllipsification:!s,isBrokenGetUserMedia:l&&j(d,"50"),isLocalStorageBroken:k&&i(d,"14.1")&&j(d,"14.1.2"),os:f.toLowerCase(),osVersion:g,browser:a.toLowerCase(),browserVersion:d,parser:b,isChrome:l,isOculusBroswer:p,hasCredentiallessIframeSupport:r}}e=a(typeof self!=="undefined"?self.navigator.userAgent:null);g.BROWSER_TYPE=b;g.OS_TYPE=d;g.parseUA=a;g.UA=e}),98);
__d("WAWebKeyValueCacheStore",["Promise","WALogger","WAWebAbstractStore","asyncToGeneratorRuntime","err"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["Unable to open cache: ",", error: ",""]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["Tried to delete a non-existent cache: ",""]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["Unable to delete. This error can occur if abstract method doDel gets called."]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["Unable to put. This error can occur if abstract method doPut gets called."]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["Unable to get. This error can occur if abstract method doGet gets called."]);m=function(){return a};return a}a=function(a){babelHelpers.inheritsLoose(e,a);function e(b,c,d,e){var f;f=a.call(this)||this;f.$KeyValueCacheStore1=b;f.$KeyValueCacheStore3=c;f.$KeyValueCacheStore4=d;f.$KeyValueCacheStore5=(b=e==null?void 0:e.encodeKey)!=null?b:function(a){return a};f.$KeyValueCacheStore6=(c=e==null?void 0:e.matchOptions)!=null?c:{};return f}var f=e.prototype;f.doGet=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){yield this.doOpen();a=this.$KeyValueCacheStore5(a,this.$KeyValueCacheStore1);if(!this.$KeyValueCacheStore2){d("WALogger").WARN(m());throw c("err")("Unable to get")}a=(yield this.$KeyValueCacheStore2.match(a,this.$KeyValueCacheStore6));return a==null?null:this.$KeyValueCacheStore4(a)});function e(b){return a.apply(this,arguments)}return e}();f.doPut=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){yield this.doOpen();a=this.$KeyValueCacheStore5(a,this.$KeyValueCacheStore1);if(!this.$KeyValueCacheStore2){d("WALogger").WARN(l());throw c("err")("Unable to put in cache")}yield this.$KeyValueCacheStore2.put(a,this.$KeyValueCacheStore3(b));return b});function e(b,c){return a.apply(this,arguments)}return e}();f.doDel=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){yield this.doOpen();a=this.$KeyValueCacheStore5(a,this.$KeyValueCacheStore1);if(!this.$KeyValueCacheStore2){d("WALogger").WARN(k());return(h||(h=b("Promise"))).reject(c("err")("Unable to delete"))}yield this.$KeyValueCacheStore2["delete"](a,this.$KeyValueCacheStore6)});function e(b){return a.apply(this,arguments)}return e}();f.doClear=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var a=(yield caches["delete"](this.$KeyValueCacheStore1));a||d("WALogger").LOG(j(),this.$KeyValueCacheStore1);this.$KeyValueCacheStore2=null});function c(){return a.apply(this,arguments)}return c}();f.doOpen=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){if(this.$KeyValueCacheStore2!=null)return;try{this.$KeyValueCacheStore2=(yield caches.open(this.$KeyValueCacheStore1))}catch(a){this.$KeyValueCacheStore2=null;d("WALogger").WARN(i(),this.$KeyValueCacheStore1,a);throw a}});function c(){return a.apply(this,arguments)}return c}();f.doClose=function(){this.$KeyValueCacheStore2=null;return(h||(h=b("Promise"))).resolve()};return e}(c("WAWebAbstractStore"));g["default"]=a}),98);
__d("WAWebUserPrefsPostProcessors",["WABase64"],(function(a,b,c,d,e,f,g){var h={WANoiseInfo:a,WARoutingInfo:b};function a(a){var b=a.recoveryToken,c=a.pubKey,e=a.privKey;a=a.certificateChainBuffer;b={recoveryToken:d("WABase64").decodeB64(b),staticKeyPair:{pubKey:d("WABase64").decodeB64(c),privKey:d("WABase64").decodeB64(e)},certificateChainBuffer:a!=null?d("WABase64").decodeB64(a):void 0};return b}function b(a){var b=a.domain;a=a.edgeRouting;b={domain:b,edgeRouting:a!=null?d("WABase64").decodeB64(a):null};return b}function c(a,b){var c=b;a=h[a];a!=null&&(c=a(b));return c}g.postProcessUserPref=c}),98);
__d("WAWebUserPrefsPreProcessors",["WABase64"],(function(a,b,c,d,e,f,g){var h={WANoiseInfo:a,WARoutingInfo:b};function a(a){var b=a.certificateChainBuffer,c=a.staticKeyPair,e=c.privKey;c=c.pubKey;a=a.recoveryToken;return{privKey:d("WABase64").encodeB64(e),pubKey:d("WABase64").encodeB64(c),recoveryToken:d("WABase64").encodeB64(a),certificateChainBuffer:b!=null?d("WABase64").encodeB64(b):void 0}}function b(a){var b=a.domain;a=a.edgeRouting;b={domain:b,edgeRouting:a?d("WABase64").encodeB64(a):null};return b}function c(a,b){var c=b;a=h[a];a!=null&&(c=a(b));return c}g.preProcessUserPref=c}),98);
__d("WAWebUserPrefsCacheStorage",["Promise","WALogger","WAWebKeyValueCacheStore","WAWebUserPrefsPostProcessors","WAWebUserPrefsPreProcessors","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["getItemFromCacheStorage: error while trying to parse a user preference"]);i=function(){return a};return a}function a(a){a=new Response(JSON.stringify(a),{headers:{"content-type":"application/json"}});return a}function e(a){return a.json()}function f(a,b){a=encodeURIComponent(a);b=encodeURIComponent(b);return"https://_user_prefs_key_store_.whatsapp.com/"+b+"_"+a}var j={ignoreSearch:!0,ignoreMethod:!0,ignoreVary:!0},k="wa_web_user_prefs_cache_store",l=new(c("WAWebKeyValueCacheStore"))(k,a,e,{encodeKey:f,matchOptions:j});c=function(){function a(){this.$1={}}var c=a.prototype;c.setItemToCacheStorage=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){b=d("WAWebUserPrefsPreProcessors").preProcessUserPref(a,b);this.$1[a]=b;yield l.doPut(a,b)});function c(b,c){return a.apply(this,arguments)}return c}();c.getItemFromCacheStorage=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=this.$1[a];if(b==null)try{b=(yield l.doGet(a)),this.$1[a]=b}catch(a){d("WALogger").DEV(i())}if(b==null){this.removeItemFromCacheStorage(a);return null}a=d("WAWebUserPrefsPostProcessors").postProcessUserPref(a,b);return a});function c(b){return a.apply(this,arguments)}return c}();c.removeItemFromCacheStorage=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){delete this.$1[a],yield l.doDel(a)});function c(b){return a.apply(this,arguments)}return c}();c.clearCacheStorage=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){this.$1={},yield l.doClear()});function c(){return a.apply(this,arguments)}return c}();c.bulkSetItemsToCacheStorage=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var c=this;a=a.map(function(a){return c.setItemToCacheStorage(a.key,a.value)});yield (h||(h=b("Promise"))).all(a)});function c(b){return a.apply(this,arguments)}return c}();return a}();k=new c();g.userPrefsCacheStorage=k}),98);
__d("WAWebSchemaUserPrefs",["WAWebModelStorageUtils","WAWebModelStorageVersions","WAWebStorageMutationBuilder"],(function(a,b,c,d,e,f,g){function a(){var a=d("WAWebModelStorageUtils").getStorage(),b=d("WAWebStorageMutationBuilder").columnBuilder(a.config),c=b.addColumn;b=b.addUserDefinedPrimaryKey;a.add("user-prefs").version(d("WAWebModelStorageVersions").userPrefsCreateTable(),[b("key"),c("value")]).view(function(a){return a})}function b(){return d("WAWebModelStorageUtils").getStorage().table("user-prefs")}g.addTable=a;g.getUserPrefsTable=b}),98);
__d("WAWebJidToWid",["WAJids","WAWebWidFactory"],(function(a,b,c,d,e,f,g){function a(a){return d("WAWebWidFactory").createUserWid(a)}function b(a){return d("WAWebWidFactory").toUserWid(d("WAWebWidFactory").createWid(a))}function c(a){return d("WAWebWidFactory").createDeviceWid(a)}function e(a){return d("WAWebWidFactory").toChatWid(d("WAWebWidFactory").createWid(a))}function f(a){return d("WAWebWidFactory").createWid(a)}function h(a){a=d("WAJids").extractJidFromJidWithType(a);return d("WAWebWidFactory").createWid(a)}function i(a){return d("WAWebWidFactory").createWid(a)}g.userJidToUserWid=a;g.deviceJidToUserWid=b;g.deviceJidToDeviceWid=c;g.chatJidToChatWid=e;g.groupJidToWid=f;g.jidWithTypeToWid=h;g.newsletterJidToWid=i}),98);
__d("WAWebJobOrchestratorHelper",[],(function(a,b,c,d,e,f){function g(a,b){return b instanceof Map||b instanceof Set?Array.from(b):b}function a(a,b){var c;if(a.maxConcurrency!==b.maxConcurrency)return!0;if(((c=a.jobPrioritiesQuota)==null?void 0:c.size)!==((c=b.jobPrioritiesQuota)==null?void 0:c.size))return!0;return Object.keys((c=a.maxConcurrencyPerJob)!=null?c:{}).length!==Object.keys((c=b.maxConcurrencyPerJob)!=null?c:{}).length?!0:JSON.stringify(a,g)!==JSON.stringify(b,g)}f.hasConfigChanged=a}),66);
__d("WAWebOrchestratorJobInfoEvent",[],(function(a,b,c,d,e,f){a=function(){function a(a,b,c,d){this.jobName=a,this.scenario=d,this.pendingJobsCount=c,this.jobPriority=b}var b=a.prototype;b.logJobAdded=function(){this.webcJobAddedT=Date.now()};b.logJobStarted=function(){this.webcJobStartedT=Date.now()};b.logJobCompleted=function(a){this.webcJobCompletedT=Date.now(),this.jobResultType=a};return a}();f.JobInfoEvent=a}),66);
__d("WAWebWamEnumWebcJobResultTypeCode",[],(function(a,b,c,d,e,f){a=Object.freeze({COMPLETED:0,ERROR:1,TIMEOUT:2,ABORTED:3});f.WEBC_JOB_RESULT_TYPE_CODE=a}),66);
__d("WAWebWebcJobInfoWamEvent",["WAWebWamCodegenUtils","WAWebWamEnumWebcJobResultTypeCode","WAWebWamEnumWebcScenarioType"],(function(a,b,c,d,e,f,g){b=(a=d("WAWebWamCodegenUtils")).defineEvents({WebcJobInfo:[3054,{jobName:[1,a.TYPES.STRING],jobPriority:[2,a.TYPES.STRING],jobResultType:[5,d("WAWebWamEnumWebcJobResultTypeCode").WEBC_JOB_RESULT_TYPE_CODE],pendingJobsCount:[4,a.TYPES.INTEGER],scenario:[3,d("WAWebWamEnumWebcScenarioType").WEBC_SCENARIO_TYPE],webcJobAddedT:[6,a.TYPES.INTEGER],webcJobCompletedT:[8,a.TYPES.INTEGER],webcJobStartedT:[7,a.TYPES.INTEGER]},[1,1,1],"regular"]},{WebcJobInfo:[]});g.WebcJobInfoWamEvent=b}),98);
__d("WAWebOrchestratorJobStatsLogger",["WALogger","WAWebBrokerGlobalAppState","WAWebOrchestratorJobInfoEvent","WAWebWamEnumWebcJobResultTypeCode","WAWebWamEnumWebcScenarioType","WAWebWebcJobInfoWamEvent","cr:4324","gkx"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["[job-orchestrator] "," execution time: "," ms, waiting time: "," ms, success: ",""]);h=function(){return a};return a}a=function(){function a(){this.$1=new Map()}var e=a.prototype;e.logJobCreated=function(a){if(c("gkx")("26258"))return;var b=a.jobName,e=a.jobId,f=a.jobPriority;a=a.pendingJobsCount;var g=c("WAWebBrokerGlobalAppState").getCurrentScenario();b=new(d("WAWebOrchestratorJobInfoEvent").JobInfoEvent)(b,f,a,g);b.logJobAdded();this.$1.set(e,b)};e.logJobStarted=function(a){if(c("gkx")("26258"))return;a=this.$1.get(a);a==null?void 0:a.logJobStarted()};e.logJobCompleted=function(a){this.$2(a,d("WAWebWamEnumWebcJobResultTypeCode").WEBC_JOB_RESULT_TYPE_CODE.COMPLETED)};e.logJobError=function(a){this.$2(a,d("WAWebWamEnumWebcJobResultTypeCode").WEBC_JOB_RESULT_TYPE_CODE.ERROR)};e.logJobTimeout=function(a){this.$2(a,d("WAWebWamEnumWebcJobResultTypeCode").WEBC_JOB_RESULT_TYPE_CODE.TIMEOUT)};e.logJobAborted=function(a){this.$2(a,d("WAWebWamEnumWebcJobResultTypeCode").WEBC_JOB_RESULT_TYPE_CODE.ABORTED)};e.$2=function(a,b){if(c("gkx")("26258"))return;var d=this.$1.get(a);d==null?void 0:d.logJobCompleted(b);this.$3(d);this.$1["delete"](a)};e.$3=function(a){if(!a)return;var c=a.jobName,e=a.webcJobCompletedT,f=a.webcJobStartedT,g=a.webcJobAddedT,i=a.jobResultType;e=e-f;f=f-g;g=i===d("WAWebWamEnumWebcJobResultTypeCode").WEBC_JOB_RESULT_TYPE_CODE.COMPLETED;d("WALogger").LOG(h(),c,e,f,g);i=new(d("WAWebWebcJobInfoWamEvent").WebcJobInfoWamEvent)({jobName:a.jobName,jobPriority:a.jobPriority,jobResultType:a.jobResultType,pendingJobsCount:a.pendingJobsCount,scenario:a.scenario,webcJobAddedT:a.webcJobAddedT,webcJobCompletedT:a.webcJobCompletedT,webcJobStartedT:a.webcJobStartedT});if(i.scenario===d("WAWebWamEnumWebcScenarioType").WEBC_SCENARIO_TYPE.IDLE){f=(e=b("cr:4324")==null?void 0:b("cr:4324").JOB_EVENT_SAMPLING_RATE[c])!=null?e:1;i.weight=f}i.commit()};return a}();g.JobStatsLogger=a}),98);
__d("WAWebJobOrchestrator",["WAConcurrentBucketJobQueue","WADefaultJobNoQueue","WAJobOrchestratorTypes","WALogger","WATimeUtils","WAWebBrokerGlobalAppState","WAWebClientFeatureFlags","WAWebJobOrchestratorHelper","WAWebOrchestratorJobStatsLogger","WAWebWamEnumWebcScenarioType"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["[job-orchestrator] config changed "]);h=function(){return a};return a}var i={maxConcurrency:1,bestEffortWaitTimeoutSec:d("WATimeUtils").FIVE_MINUTES,jobPrioritiesQuota:new Map([[(b=d("WAJobOrchestratorTypes")).JOB_PRIORITY.HIGH,5],[b.JOB_PRIORITY.LOW,1],[b.JOB_PRIORITY.OFFLINE,3],[b.JOB_PRIORITY.HISTORY_SYNC,1]])},j={maxConcurrency:1,bestEffortWaitTimeoutSec:d("WATimeUtils").FIVE_MINUTES,jobPrioritiesQuota:new Map([[b.JOB_PRIORITY.HIGH,5],[b.JOB_PRIORITY.LOW,1],[b.JOB_PRIORITY.OFFLINE,1],[b.JOB_PRIORITY.HISTORY_SYNC,1]])},k={maxConcurrency:1,bestEffortWaitTimeoutSec:d("WATimeUtils").FIVE_MINUTES,jobPrioritiesQuota:new Map([[b.JOB_PRIORITY.HIGH,2],[b.JOB_PRIORITY.LOW,1],[b.JOB_PRIORITY.OFFLINE,1],[b.JOB_PRIORITY.HISTORY_SYNC,1]])},l="default",m="bucket";function n(){var a=c("WAWebBrokerGlobalAppState").getCurrentScenario();if(d("WAWebClientFeatureFlags").isFeatureEnabled("debug_win_long_sync"))return k;if(a===d("WAWebWamEnumWebcScenarioType").WEBC_SCENARIO_TYPE.IDLE)return i;return a===d("WAWebWamEnumWebcScenarioType").WEBC_SCENARIO_TYPE.OFFLINE_RESUME?j:i}var o=i,p;function q(){p||(p=new(d("WAWebOrchestratorJobStatsLogger").JobStatsLogger)());return p}var r={};function a(a){a===void 0&&(a=!1);a=a?l:m;var b=n(),c;if(r[a]){d("WAWebJobOrchestratorHelper").hasConfigChanged(o,b)&&(d("WALogger").LOG(h()),o=b,r[a].updateConfig(b));return r[a]}switch(a){case"bucket":c=new(d("WAConcurrentBucketJobQueue").WAConcurrentBucketJobQueue)();break;default:c=new(d("WADefaultJobNoQueue").WADefaultJobNoQueue)();break}c.init(b,q());r[a]=c;o=b;return c}g.getInstance=a}),98);
__d("WAWebMarketingMessagesUserFeedbackGatingUtils",["WAWebABProps"],(function(a,b,c,d,e,f,g){function a(){return d("WAWebABProps").getABPropConfigValue("mm_message_level_feedback_enabled")}function b(){return d("WAWebABProps").getABPropConfigValue("mm_message_level_feedback_not_interested_menu_enabled")}function c(){return d("WAWebABProps").getABPropConfigValue("mm_opt_out_enabled")}function e(){return d("WAWebABProps").getABPropConfigValue("mm_opt_out_list_server_sync_enabled")}g.isMMMessageLevelFeedbackEnabled=a;g.isMMMessageLevelFeedbackNotInterestedMenuEnabled=b;g.isMMOptOutEnabled=c;g.isMMOptOutListServerSyncEnabled=e}),98);
__d("WAWebOrchestratorNonPersistedJob",["WAJobOrchestratorTypes","WAWebJobOrchestrator","err"],(function(a,b,c,d,e,f,g){function a(a,b,e){if(typeof b!=="function")throw c("err")("getNonPersistJob got invalid function param");var f=d("WAWebJobOrchestrator").getInstance((e==null?void 0:e.priority)===d("WAJobOrchestratorTypes").JOB_PRIORITY.SKIP);return{fireAndForget:function(){var c=arguments;f.enqueue(a,function(){return b.apply(null,c)},e)},waitUntilCompleted:function(){var c=arguments,d=f.enqueue(a,function(){return b.apply(null,c)},e);return d}}}g.createNonPersistedJob=a}),98);
__d("WAWebSchemaOptOutList",["WAWebModelStorageUtils","WAWebModelStorageVersions","WAWebStorageMutationBuilder"],(function(a,b,c,d,e,f,g){function a(){var a=d("WAWebModelStorageUtils").getStorage(),b=d("WAWebStorageMutationBuilder").columnBuilder(a.config);b=b.addUserDefinedPrimaryKey;a.add("optoutlist").version(d("WAWebModelStorageVersions").optOutListCreateTable(),[b("id")]).view(function(a){return{id:a.id}})}function b(){return d("WAWebModelStorageUtils").getStorage().table("optoutlist")}g.addTable=a;g.getOptOutListTable=b}),98);
__d("WAWebUpdateLidMetadataApi",["WAWebApiContact","WAWebBackendApi","WAWebWidFactory","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function a(a){return h.apply(this,arguments)}function h(){h=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a=a.updates;var b=a.map(function(a){var b=a.lid;a=a.data;return{lid:d("WAWebWidFactory").toUserWid(b),shareOwnPn:(b=a.shareOwnPn)!=null?b:null,displayNameLID:(b=a.displayNameLID)!=null?b:null,requestedPnTimestamp:(b=a.requestedPnTimestamp)!=null?b:null,username:(b=a.username)!=null?b:null}});yield d("WAWebBackendApi").frontendSendAndReceive("bulkUpdateLidContactState",{lidContactDataMappings:b});yield d("WAWebApiContact").updateLidMetadata(a)});return h.apply(this,arguments)}g.updateLidMetadata=a}),98);
__d("WAWebUpdateLidMetadataJob",["WAWebOrchestratorNonPersistedJob","WAWebUpdateLidMetadataApi"],(function(a,b,c,d,e,f,g){function a(a){a={updates:a};return d("WAWebOrchestratorNonPersistedJob").createNonPersistedJob("updateLidMetadata",function(a){return d("WAWebUpdateLidMetadataApi").updateLidMetadata(a)}).waitUntilCompleted(a)}g.updateLidMetadataJob=a}),98);
__d("WAWebWorkerSafeBackendApi",["WAWebBackendApi"],(function(a,b,c,d,e,f,g){function a(a,b){d("WAWebBackendApi").fireAndForgetInternalDoNotUse("workerSafeEvent",a,b)}function b(a,b){return d("WAWebBackendApi").sendAndReceiveInternalDoNotUse("workerSafeEvent",a,b)}g.workerSafeFireAndForget=a;g.workerSafeSendAndReceive=b}),98);